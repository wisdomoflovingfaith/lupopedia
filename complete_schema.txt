=== TABLE: auth_audit_log ===
Primary Key: N/A
Columns: `id` bigint NOT NULL auto_increment COMMENT 'Primary key for audit log entry', `user_id` bigint COMMENT 'Reference to lupo_auth_users.auth_user_id', `crafty_operator_id` int COMMENT 'Reference to livehelp_operators.operatorid', `event_type` varchar(50) NOT NULL COMMENT 'login, logout, session_created, session_destroyed, etc.', `system_context` varchar(50) NOT NULL COMMENT 'lupopedia, crafty_syntax, unified, admin', `ip_address` varchar(45) COMMENT 'Client IP address', `user_agent` text COMMENT 'Client user agent string', `event_data` json COMMENT 'Additional event metadata', `success` tinyint(1) NOT NULL DEFAULT 1 COMMENT '1=success, 0=failure', `error_message` text COMMENT 'Error details if success=0', `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP DEFAULT_GENERATED COMMENT 'Event timestamp', `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP DEFAULT_GENERATED on update CURRENT_TIMESTAMP COMMENT 'Last update timestamp'
Indexes: N/A

=== TABLE: integration_test_results ===
Primary Key: N/A
Columns: `test_result_id` bigint NOT NULL auto_increment, `test_suite` varchar(64) NOT NULL, `test_case` varchar(128) NOT NULL, `expected_result` varchar(255), `actual_result` varchar(255), `status` enum('PASS','FAIL','SKIP','ERROR') NOT NULL, `error_message` text, `execution_time_ms` int, `created_ymdhis` bigint NOT NULL
Indexes: N/A

=== TABLE: lupo_actors ===
Primary Key: actor_id
Columns: `actor_id` bigint NOT NULL auto_increment COMMENT 'Primary key for actor', `actor_type` enum('user','ai_agent','service') NOT NULL COMMENT 'Type of actor', `slug` varchar(255) NOT NULL COMMENT 'Stable unique identifier', `name` varchar(255) NOT NULL COMMENT 'Human-readable name', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS', `is_active` tinyint NOT NULL DEFAULT 1 COMMENT 'Active flag', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS', `actor_source_id` bigint COMMENT 'ID from source table (auth_users, agents, etc.)', `actor_source_type` varchar(20) COMMENT 'Source type: user, agent, system', `metadata` text COMMENT 'Optional JSON for additional actor attributes', `adversarial_role` enum('none','structural_stress','protocol_break','doctrine_test') DEFAULT 'none', `adversarial_oversight_actor_id` bigint COMMENT 'e.g., LILITH actor_id'
Indexes: INDEX: idx_actor_type (actor_type); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_is_active (is_active); UNIQUE: unique_slug (slug)

=== TABLE: lupo_actor_actions ===
Primary Key: actor_action_id
Columns: `actor_action_id` bigint NOT NULL auto_increment, `actor_id` bigint NOT NULL, `action_type` varchar(64) NOT NULL, `entity_type` varchar(64), `entity_id` bigint, `description` text, `metadata_json` json, `created_ymdhis` char(14) NOT NULL
Indexes: INDEX: idx_action_type (action_type); INDEX: idx_actor (actor_id); INDEX: idx_entity (entity_type, entity_id)

=== TABLE: lupo_actor_capabilities ===
Primary Key: actor_capability_id
Columns: `actor_capability_id` bigint NOT NULL auto_increment, `actor_id` bigint NOT NULL, `domain_id` bigint NOT NULL COMMENT 'Domain scope for this capability', `capability_key` varchar(100) NOT NULL COMMENT 'Unique capability identifier (e.g., "edit_content", "manage_users")', `capability_description` text COMMENT 'Detailed description of the capability', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted', `scope_limitation` varchar(50) DEFAULT 'unrestricted' COMMENT 'domain, session, user, content', `max_calls_per_hour` int DEFAULT 0 COMMENT '0 = unlimited', `requires_approval` tinyint DEFAULT 0 COMMENT '1 = needs manual approval', `approval_agent_id` bigint COMMENT 'Which agent must approve'
Indexes: INDEX: idx_agent_domain (actor_id, domain_id); INDEX: idx_capability_key (capability_key); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_domain_id (domain_id); INDEX: idx_is_deleted (is_deleted); INDEX: idx_updated_ymdhis (updated_ymdhis); UNIQUE: unique_agent_domain_capability (actor_id, domain_id, capability_key)

=== TABLE: lupo_actor_channels ===
Primary Key: actor_channel_id
Columns: `actor_channel_id` bigint NOT NULL auto_increment COMMENT 'Primary key for the actor-channel relationship', `actor_id` bigint NOT NULL COMMENT 'Reference to the actor (user/agent)', `channel_id` bigint NOT NULL COMMENT 'Reference to the channel', `status` char(1) NOT NULL DEFAULT 'A' COMMENT 'Status: A=Active, I=Inactive, etc.', `start_date` bigint COMMENT 'Timestamp when actor joined the channel (YYYYMMDDHHMMSS)', `bg_color` varchar(6) NOT NULL DEFAULT '000000' COMMENT 'Background color (6-char hex, no #)', `text_color` varchar(6) NOT NULL DEFAULT '000000' COMMENT 'Text color (6-char hex, no #)', `channel_color` varchar(6) NOT NULL DEFAULT 'F7FAFF' COMMENT 'Channel-specific color (6-char hex, no #)', `alt_text_color` varchar(6) NOT NULL DEFAULT '000000' COMMENT 'Alternate text color (6-char hex, no #)', `last_read_ymdhis` bigint COMMENT 'Timestamp when actor last read messages (YYYYMMDDHHMMSS)', `muted_until_ymdhis` bigint COMMENT 'Timestamp until notifications are muted (YYYYMMDDHHMMSS)', `preferences_json` json COMMENT 'Additional UI/UX preferences in JSON format', `dialog_output_file` varchar(500) COMMENT 'Filesystem dialog log path for this actor in this channel; IDE agents write here as the mandatory fallback when database dialog tables are unavailable.', `created_ymdhis` bigint NOT NULL COMMENT 'Creation timestamp (YYYYMMDDHHMMSS)', `updated_ymdhis` bigint NOT NULL COMMENT 'Last update timestamp (YYYYMMDDHHMMSS)', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag (1=deleted, 0=active)', `deleted_ymdhis` bigint COMMENT 'Deletion timestamp (YYYYMMDDHHMMSS)'
Indexes: INDEX: idx_actor (actor_id); INDEX: idx_channel (channel_id); INDEX: idx_created (created_ymdhis); INDEX: idx_deleted (is_deleted); INDEX: idx_status (status); INDEX: idx_updated (updated_ymdhis); UNIQUE: unq_actor_channel (actor_id, channel_id)

=== TABLE: lupo_actor_channel_roles ===
Primary Key: actor_channel_role_id
Columns: `actor_channel_role_id` bigint NOT NULL auto_increment, `actor_id` bigint NOT NULL, `channel_id` bigint NOT NULL, `role_key` varchar(64) NOT NULL, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `is_deleted` tinyint(1) NOT NULL DEFAULT 0, `deleted_ymdhis` bigint, `handshake_metadata_json` json COMMENT 'RSHAP handshake identity and synchronization data', `awareness_snapshot_json` json COMMENT 'CJP Awareness Snapshot (WHO/WHAT/WHERE/WHEN/WHY/HOW/PURPOSE)', `protocol_completion_status` enum('pending','aal_complete','rshap_complete','cjp_complete','ready') DEFAULT 'pending' COMMENT 'Multi-agent protocol completion status', `protocol_version` varchar(20) DEFAULT '4.0.72' COMMENT 'Protocol version used for this actor-channel relationship', `join_sequence_step` tinyint DEFAULT 0 COMMENT 'Current step in 10-step CJP sequence (0-10)', `handshake_completed_ymdhis` bigint COMMENT 'Timestamp when RSHAP was completed', `awareness_completed_ymdhis` bigint COMMENT 'Timestamp when AAL was completed', `cjp_completed_ymdhis` bigint COMMENT 'Timestamp when full CJP was completed'
Indexes: INDEX: idx_actor_id (actor_id); INDEX: idx_channel_id (channel_id); INDEX: idx_join_sequence_step (join_sequence_step); INDEX: idx_protocol_completion_status (protocol_completion_status); INDEX: idx_protocol_version (protocol_version); INDEX: idx_role_key (role_key)

=== TABLE: lupo_actor_collections ===
Primary Key: actor_collection_id
Columns: `actor_collection_id` bigint NOT NULL auto_increment, `actor_id` bigint NOT NULL COMMENT 'User, group, agent, or persona', `collection_id` bigint NOT NULL COMMENT 'Collection the actor has access to', `access_level` enum('owner','write','read') NOT NULL DEFAULT 'read', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when granted', `updated_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when updated', `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint, `persistent_identity_json` json COMMENT 'RSHAP persistent identity metadata', `identity_signature` varchar(255) COMMENT 'Unique identity signature for handshake verification', `trust_level` enum('system','verified','standard','restricted','untrusted') DEFAULT 'standard' COMMENT 'Trust level for multi-agent interactions', `emotional_geometry_baseline` json COMMENT 'Baseline emotional geometry for agent interactions', `doctrine_alignment_version` varchar(20) DEFAULT '4.0.72' COMMENT 'Version of doctrine this actor aligns with'
Indexes: INDEX: idx_access_level (access_level); INDEX: idx_actor (actor_id); INDEX: idx_collection (collection_id); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_identity_signature (identity_signature); INDEX: idx_is_deleted (is_deleted); INDEX: idx_trust_level (trust_level)

=== TABLE: lupo_actor_conflicts ===
Primary Key: actor_conflict_id
Columns: `actor_conflict_id` bigint NOT NULL auto_increment COMMENT 'Primary key for the conflict record', `domain_id` bigint NOT NULL DEFAULT 1 COMMENT 'Domain/tenant this conflict belongs to', `actor_a_id` bigint NOT NULL, `actor_b_id` bigint NOT NULL, `conflict_type` varchar(64) NOT NULL COMMENT 'Type/category of the conflict', `conflict_summary` text NOT NULL COMMENT 'Detailed description of the conflict', `resolution_status` enum('unresolved','resolved','ignored') NOT NULL DEFAULT 'unresolved' COMMENT 'Current status of the conflict resolution', `resolution_summary` text COMMENT 'How the conflict was resolved (if applicable)', `resolved_by` bigint COMMENT 'Actor who resolved the conflict (if applicable)', `resolved_ymdhis` bigint COMMENT 'When the conflict was resolved (YYYYMMDDHHMMSS)', `severity` enum('low','medium','high','critical') NOT NULL DEFAULT 'medium' COMMENT 'Severity level of the conflict', `context_json` json COMMENT 'Additional context about the conflict in JSON format', `created_ymdhis` bigint NOT NULL COMMENT 'Creation timestamp (YYYYMMDDHHMMSS)', `updated_ymdhis` bigint NOT NULL COMMENT 'Last update timestamp (YYYYMMDDHHMMSS)', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag (1=deleted, 0=active)', `deleted_ymdhis` bigint COMMENT 'Deletion timestamp (YYYYMMDDHHMMSS)'
Indexes: INDEX: idx_agent_a (actor_a_id); INDEX: idx_agent_b (actor_b_id); INDEX: idx_agent_pair (actor_a_id, actor_b_id); INDEX: idx_conflict_type (conflict_type); INDEX: idx_created (created_ymdhis); INDEX: idx_deleted (is_deleted); INDEX: idx_domain (domain_id); INDEX: idx_resolved_ymdhis (resolved_ymdhis); INDEX: idx_severity (severity); INDEX: idx_status (resolution_status); INDEX: idx_updated (updated_ymdhis)

=== TABLE: lupo_actor_departments ===
Primary Key: actor_department_id
Columns: `actor_department_id` bigint NOT NULL auto_increment, `actor_id` bigint NOT NULL, `department_id` bigint NOT NULL, `title` varchar(64), `created_ymdhis` char(14) NOT NULL, `updated_ymdhis` char(14) NOT NULL, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` char(14)
Indexes: INDEX: idx_actor (actor_id); INDEX: idx_department (department_id)

=== TABLE: lupo_actor_edges ===
Primary Key: actor_edge_id
Columns: `actor_edge_id` bigint NOT NULL auto_increment, `domain_id` bigint NOT NULL COMMENT 'Domain scope for this relationship', `source_actor_id` bigint NOT NULL COMMENT 'Source agent of the relationship', `target_actor_id` bigint NOT NULL COMMENT 'Target agent of the relationship', `edge_type` varchar(100) NOT NULL COMMENT 'Type of relationship (e.g., "collaborates_with", "critiques", "balances")', `weight` float DEFAULT 1 COMMENT 'Strength or weight of the relationship', `properties` text COMMENT 'JSON or TOON formatted metadata for the relationship', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted'
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_domain_id (domain_id); INDEX: idx_edge_source_relationship (source_actor_id, edge_type); INDEX: idx_edge_target_relationship (target_actor_id, edge_type); INDEX: idx_edge_type (edge_type); INDEX: idx_is_deleted (is_deleted); INDEX: idx_source_agent (source_actor_id); INDEX: idx_source_target (source_actor_id, target_actor_id); INDEX: idx_target_agent (target_actor_id); INDEX: idx_updated_ymdhis (updated_ymdhis); UNIQUE: unique_agent_edge (domain_id, source_actor_id, target_actor_id, edge_type)

=== TABLE: lupo_actor_events ===
Primary Key: actor_event_id
Columns: `actor_event_id` bigint NOT NULL auto_increment COMMENT 'Primary key for actor event', `actor_id` bigint NOT NULL COMMENT 'Actor ID from lupo_actors', `session_id` varchar(255) COMMENT 'Session identifier', `tab_id` varchar(255) COMMENT 'Tab identifier', `world_id` bigint COMMENT 'World context ID', `world_key` varchar(255) COMMENT 'World context key', `world_type` varchar(50) COMMENT 'World context type', `event_type` varchar(100) NOT NULL COMMENT 'Type of actor event', `event_data` json COMMENT 'Event-specific data', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS'
Indexes: INDEX: idx_actor_event_type (actor_id, event_type); INDEX: idx_actor_id (actor_id); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_event_type (event_type); INDEX: idx_session_id (session_id); INDEX: idx_tab_id (tab_id); INDEX: idx_world_id (world_id)

=== TABLE: lupo_actor_group_membership ===
Primary Key: actor_group_membership_id
Columns: `actor_group_membership_id` bigint NOT NULL auto_increment COMMENT 'Reference to actors.actor_id', `group_id` bigint NOT NULL COMMENT 'Reference to groups.group_id', `domain_id` bigint NOT NULL COMMENT 'Domain context for this membership', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when membership was created', `created_by` bigint COMMENT 'actor_id who created this membership', `expires_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when membership expires (NULL = never)', `is_active` tinyint NOT NULL DEFAULT 1 COMMENT '1 = active, 0 = inactive', `role` varchar(50) DEFAULT 'member' COMMENT 'Role/position within the group'
Indexes: INDEX: idx_actor_domain (actor_group_membership_id, domain_id); INDEX: idx_expires (expires_ymdhis); INDEX: idx_group_domain (group_id, domain_id); INDEX: idx_is_active (is_active)

=== TABLE: lupo_actor_handshakes ===
Primary Key: actor_handshake_id
Columns: `actor_handshake_id` bigint NOT NULL auto_increment, `actor_id` bigint NOT NULL, `actor_type` varchar(32) NOT NULL COMMENT 'human|ai|system', `utc_timestamp` bigint NOT NULL COMMENT 'YYYYMMDDHHMMSS', `purpose` varchar(500), `constraints_json` json, `forbidden_actions_json` json, `context` text, `expires_utc` bigint COMMENT 'YYYYMMDDHHMMSS', `created_ymdhis` bigint NOT NULL, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: idx_actor_id (actor_id); INDEX: idx_is_deleted (is_deleted); INDEX: idx_utc_timestamp (utc_timestamp)

=== TABLE: lupo_actor_meta ===
Primary Key: actor_meta_id
Columns: `actor_meta_id` bigint unsigned NOT NULL auto_increment, `actor_id` bigint unsigned NOT NULL, `meta_type` varchar(64) NOT NULL, `meta_key` varchar(255) NOT NULL, `meta_value` text NOT NULL, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL
Indexes: INDEX: actor_id (actor_id); INDEX: meta_key (meta_key); INDEX: meta_type (meta_type)

=== TABLE: lupo_actor_moods ===
Primary Key: N/A
Columns: `actor_id` bigint unsigned NOT NULL, `mood_r` tinyint NOT NULL, `mood_g` tinyint NOT NULL, `mood_b` tinyint NOT NULL, `timestamp_utc` bigint unsigned NOT NULL
Indexes: N/A

=== TABLE: lupo_actor_object_edges ===
Primary Key: actor_object_edge_id
Columns: `actor_object_edge_id` bigint NOT NULL auto_increment, `actor_id` bigint NOT NULL, `target_table` varchar(100) NOT NULL COMMENT 'e.g., lupo_contents, lupo_unified_truth_items, lupo_hashtags, lupo_topics, lupo_channels, etc.', `target_id` bigint NOT NULL, `edge_type` varchar(50) NOT NULL COMMENT 'e.g., read, liked, disliked, created, commented_on, shared_from, etc.', `properties_json` json, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL
Indexes: INDEX: idx_actor_edge_type (actor_id, edge_type); INDEX: idx_target_lookup (target_table, target_id); UNIQUE: uniq_actor_target_type (actor_id, target_table, target_id, edge_type)

=== TABLE: lupo_actor_persona_relationships ===
Primary Key: relationship_id
Columns: `relationship_id` bigint NOT NULL auto_increment, `actor_id` bigint NOT NULL, `persona_id` bigint NOT NULL, `relationship_type` varchar(100) NOT NULL, `relationship_strength` decimal(5,2), `relationship_context` json, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL
Indexes: INDEX: idx_actor_id (actor_id); INDEX: idx_persona_id (persona_id); INDEX: idx_relationship_type (relationship_type)

=== TABLE: lupo_actor_properties ===
Primary Key: actor_property_id
Columns: `actor_property_id` bigint NOT NULL auto_increment, `actor_type` varchar(32) NOT NULL COMMENT 'Type of the entity', `actor_id` bigint NOT NULL COMMENT 'ID of the entity', `property_key` varchar(64) NOT NULL COMMENT 'Property key/name', `property_value` text COMMENT 'Property value', `created_ymdhis` bigint NOT NULL COMMENT 'Creation timestamp (YYYYMMDDHHMMSS)', `updated_ymdhis` bigint NOT NULL COMMENT 'Last update timestamp (YYYYMMDDHHMMSS)', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag (1=deleted, 0=active)', `deleted_ymdhis` bigint COMMENT 'Deletion timestamp (YYYYMMDDHHMMSS)'
Indexes: INDEX: idx_entity (actor_type, actor_id); INDEX: idx_property (property_key)

=== TABLE: lupo_actor_reply_templates ===
Primary Key: actor_reply_template_id
Columns: `actor_reply_template_id` bigint NOT NULL auto_increment COMMENT 'Primary key for the template', `actor_id` bigint NOT NULL COMMENT 'ID of the actor (user/agent) this template belongs to', `template_key` varchar(64) NOT NULL COMMENT 'Unique key to identify this template', `template_text` text NOT NULL COMMENT 'The template content with placeholders', `usage_context` varchar(64) COMMENT 'Context where this template is used', `created_ymdhis` bigint NOT NULL COMMENT 'Creation timestamp (YYYYMMDDHHMMSS)', `updated_ymdhis` bigint NOT NULL COMMENT 'Last update timestamp (YYYYMMDDHHMMSS)', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag (1=deleted, 0=active)', `deleted_ymdhis` bigint COMMENT 'Deletion timestamp (YYYYMMDDHHMMSS)'
Indexes: INDEX: idx_actor (actor_id); INDEX: idx_created (created_ymdhis); INDEX: idx_deleted (is_deleted); INDEX: idx_key (template_key); INDEX: idx_updated (updated_ymdhis); INDEX: idx_usage_context (usage_context); UNIQUE: unq_actor_template_key (actor_id, template_key)

=== TABLE: lupo_actor_roles ===
Primary Key: actor_role_id
Columns: `actor_role_id` bigint NOT NULL, `actor_id` bigint NOT NULL, `context_id` bigint NOT NULL DEFAULT 0, `department_id` bigint, `role_key` varchar(100) NOT NULL, `role_description` text, `weight` float DEFAULT 1, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint, `is_deleted` smallint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: UNIQUE: actor_id (actor_id, context_id, role_key); INDEX: actor_id_2 (actor_id); INDEX: context_id (context_id); INDEX: department_id (department_id)

=== TABLE: lupo_actor_truth_edges ===
Primary Key: actor_truth_edge_id
Columns: `actor_truth_edge_id` bigint NOT NULL auto_increment, `actor_id` bigint NOT NULL, `truth_item_id` bigint NOT NULL, `edge_type` enum('read','liked','disliked','created','commented_on','linked_to','referenced','viewed_multiple_times','searched_for','favorited','pinned','bookmarked','navigated_from','navigated_to','high_affinity','low_affinity','topic_cluster_member','semantic_neighbor','frequent_path') NOT NULL, `properties_json` json, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL
Indexes: INDEX: idx_actor_edge_type (actor_id, edge_type); INDEX: idx_truth_item (truth_item_id); UNIQUE: uniq_actor_truth_type (actor_id, truth_item_id, edge_type)

=== TABLE: lupo_agents ===
Primary Key: agent_id
Columns: `agent_id` bigint NOT NULL auto_increment COMMENT 'Primary key for agent', `agent_key` varchar(100) NOT NULL COMMENT 'Canonical identifier (wolfie, lilith, maat, etc.)', `agent_name` varchar(150) NOT NULL COMMENT 'Human-readable name', `archetype` varchar(150) COMMENT 'Mythic or symbolic identity', `description` text COMMENT 'Agent description and purpose', `version` varchar(50) DEFAULT '1.0' COMMENT 'Agent version', `model_name` varchar(100), `is_global_authority` tinyint NOT NULL DEFAULT 0 COMMENT '1 = global authority agent', `is_internal_only` tinyint(1) NOT NULL DEFAULT 0 COMMENT 'Internal only flag', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted', `avg_response_time_ms` int DEFAULT 0, `total_tokens_processed` bigint DEFAULT 0 COMMENT 'Total tokens processed', `success_rate` float DEFAULT 1 COMMENT '0.0 to 1.0', `cost_per_1k_tokens` decimal(10,4) DEFAULT 0.0000 COMMENT 'For cost tracking', `temperature` float DEFAULT 0.7, `top_p` float DEFAULT 1, `max_tokens` int DEFAULT 2048, `presence_penalty` float DEFAULT 0, `frequency_penalty` float DEFAULT 0, `system_prompt` text, `provider` varchar(50) DEFAULT 'openai', `api_key_id` bigint COMMENT 'API key reference', `timeout_ms` int DEFAULT 20000, `safety_json` json, `response_format` varchar(50)
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_is_deleted (is_deleted); INDEX: idx_is_global_authority (is_global_authority); INDEX: idx_updated_ymdhis (updated_ymdhis); UNIQUE: unique_agent_key (agent_key)

=== TABLE: lupo_agent_context_snapshots ===
Primary Key: agent_context_snapshot_id
Columns: `agent_context_snapshot_id` bigint NOT NULL auto_increment COMMENT 'Unique identifier for the snapshot', `session_id` varchar(100) NOT NULL COMMENT 'Session identifier', `actor_id` bigint NOT NULL, `parent_snapshot_id` bigint COMMENT 'For delta snapshots, references the parent full snapshot', `snapshot_type` enum('full','delta','checkpoint','error','user_saved') NOT NULL DEFAULT 'full' COMMENT 'Type of snapshot', `snapshot_purpose` varchar(50) COMMENT 'checkpoint, error_recovery, user_save, etc.', `context_data` longtext NOT NULL COMMENT 'Serialized context state (compressed JSON)', `context_summary` text COMMENT 'Human-readable summary of the context', `context_metadata` json COMMENT 'Structured metadata about the context', `token_count` int COMMENT 'Approximate token count for LLM context', `character_count` int COMMENT 'Raw character count before compression', `compressed_size` int COMMENT 'Size in bytes after compression', `compression_ratio` float COMMENT 'compressed/original ratio (smaller is better)', `compression_method` enum('gzip','zstd','none') DEFAULT 'gzip' COMMENT 'Compression algorithm used', `serialization_time_ms` int COMMENT 'Time taken to serialize context (ms)', `compression_time_ms` int COMMENT 'Time taken to compress (ms)', `related_tool_call_id` bigint COMMENT 'Associated tool call that triggered this snapshot', `conversation_turn` int COMMENT 'Conversation turn number when snapshot was taken', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when snapshot was created', `expires_ymdhis` bigint COMMENT 'When this snapshot should be automatically purged', `is_corrupt` tinyint(1) DEFAULT 0 COMMENT '1 if snapshot failed integrity check', `retention_policy` enum('temporary','short_term','long_term') DEFAULT 'temporary' COMMENT 'How long to retain this snapshot'
Indexes: INDEX: ft_summary (context_summary); INDEX: idx_created (created_ymdhis); INDEX: idx_parent (parent_snapshot_id); INDEX: idx_related_tool (related_tool_call_id); INDEX: idx_retention (retention_policy, expires_ymdhis); INDEX: idx_session_agent (session_id, actor_id); INDEX: idx_turn (session_id, conversation_turn); INDEX: idx_type_purpose (snapshot_type, snapshot_purpose)

=== TABLE: lupo_agent_dependencies ===
Primary Key: agent_dependency_id
Columns: `agent_dependency_id` bigint NOT NULL auto_increment, `agent_id` bigint NOT NULL COMMENT 'The agent that has dependencies', `depends_on_agent_id` bigint NOT NULL COMMENT 'The agent it depends on', `depends_on_agent_code` varchar(50) NOT NULL, `is_required` tinyint(1) NOT NULL DEFAULT 1 COMMENT '1 = must be active, 0 = optional', `notes` text COMMENT 'Why this dependency exists', `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint
Indexes: INDEX: idx_agent_id (agent_id); INDEX: idx_depends_on (depends_on_agent_id)

=== TABLE: lupo_agent_external_events ===
Primary Key: external_event_id
Columns: `external_event_id` bigint NOT NULL auto_increment, `agent_name` varchar(255) NOT NULL, `source_system` varchar(255) NOT NULL, `event_type` varchar(50) NOT NULL, `event_payload_json` json, `created_ymdhis` bigint NOT NULL
Indexes: N/A

=== TABLE: lupo_agent_faucets ===
Primary Key: agent_faucet_id
Columns: `agent_faucet_id` bigint NOT NULL auto_increment, `actor_id` bigint NOT NULL, `name` varchar(100) NOT NULL COMMENT 'Public-facing faucet name (Wolfie UI, Wolfie Code, etc.)', `alias_name` varchar(100), `slug` varchar(100) NOT NULL COMMENT 'Internal identifier for referencing this faucet', `description` text COMMENT 'Human-readable description of this faucet persona', `style_preset` varchar(100) COMMENT 'Optional style/tone preset (mythic, formal, playful, etc.)', `model_name` varchar(100), `provider` varchar(50), `temperature` float, `top_p` float, `max_tokens` int, `presence_penalty` float, `frequency_penalty` float, `system_prompt` longtext, `safety_json` json, `response_format` varchar(50), `capabilities_json` longtext COMMENT 'JSON describing which tools/capabilities this faucet can use', `is_default` tinyint NOT NULL DEFAULT 0 COMMENT '1 if this is the default faucet for the agent', `domain_id` bigint NOT NULL DEFAULT 1 COMMENT 'Domain this faucet belongs to (multi-domain support)', `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `deleted_ymdhis` bigint
Indexes: INDEX: idx_agent (actor_id); INDEX: idx_default (is_default); INDEX: idx_domain (domain_id); INDEX: idx_slug (slug)

=== TABLE: lupo_agent_faucet_credentials ===
Primary Key: agent_faucet_credential_id
Columns: `agent_faucet_credential_id` int NOT NULL auto_increment, `faucet_id` bigint NOT NULL, `provider` varchar(64) NOT NULL, `api_key` varbinary(512) NOT NULL, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL
Indexes: INDEX: idx_faucet (faucet_id)

=== TABLE: lupo_agent_heartbeats ===
Primary Key: heartbeat_id
Columns: `heartbeat_id` bigint NOT NULL auto_increment, `agent_slug` varchar(64) NOT NULL COMMENT 'CURSOR|CASCADE|LILITH|MONDAY_WOLFIE|etc', `status` varchar(32) NOT NULL DEFAULT 'unknown' COMMENT 'operational|idle|error|unknown', `last_heartbeat_ymdhis` bigint NOT NULL COMMENT 'YYYYMMDDHHMMSS', `created_ymdhis` bigint NOT NULL COMMENT 'YYYYMMDDHHMMSS', `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: idx_agent_slug (agent_slug); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_is_deleted (is_deleted); INDEX: idx_last_heartbeat_ymdhis (last_heartbeat_ymdhis)

=== TABLE: lupo_agent_properties ===
Primary Key: agent_property_id
Columns: `agent_property_id` bigint NOT NULL auto_increment, `actor_id` bigint NOT NULL COMMENT 'Agent this property belongs to', `domain_id` bigint NOT NULL COMMENT 'Domain scope for this property', `property_key` varchar(100) NOT NULL COMMENT 'Property identifier (e.g., "ui_preferences", "api_settings")', `property_value` text COMMENT 'JSON or TOON formatted property value', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted'
Indexes: INDEX: idx_agent_domain (actor_id, domain_id); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_domain_id (domain_id); INDEX: idx_is_deleted (is_deleted); INDEX: idx_property_key (property_key); INDEX: idx_updated_ymdhis (updated_ymdhis); UNIQUE: unique_agent_domain_property (actor_id, domain_id, property_key)

=== TABLE: lupo_agent_registry ===
Primary Key: agent_registry_id
Columns: `agent_registry_id` bigint NOT NULL auto_increment, `agent_registry_parent_id` bigint COMMENT 'if this is a alias', `code` varchar(64) NOT NULL, `name` varchar(255) NOT NULL, `layer` varchar(64) NOT NULL, `is_required` tinyint(1) NOT NULL DEFAULT 0, `is_active` tinyint(1) NOT NULL DEFAULT 0, `is_kernel` tinyint(1) NOT NULL DEFAULT 0, `dedicated_slot` int, `created_ymdhis` bigint NOT NULL, `classification_json` json COMMENT 'Agent classification and routing identity metadata (agent_class, subclass, routing_bias, capabilities)', `metadata` json NOT NULL
Indexes: UNIQUE: unique_code (code)

=== TABLE: lupo_agent_tool_calls ===
Primary Key: agent_tool_call_id
Columns: `agent_tool_call_id` bigint NOT NULL auto_increment, `agent_id` bigint NOT NULL COMMENT 'Which agent initiated the call', `faucet_id` bigint COMMENT 'Which faucet was used (if any)', `domain_id` bigint NOT NULL COMMENT 'Domain context of the call', `tool_name` varchar(150) NOT NULL COMMENT 'Name of the tool or action invoked', `action_type` varchar(100) COMMENT 'Type of action (llm_call, faucet_spawn, search, codegen, etc.)', `input_json` longtext COMMENT 'Serialized input parameters', `output_json` longtext COMMENT 'Serialized output or result', `provider` varchar(50) COMMENT 'LLM provider (openai, anthropic, google, deepseek, etc.)', `model_name` varchar(150) COMMENT 'Model used for this call', `tokens_prompt` int DEFAULT 0, `tokens_completion` int DEFAULT 0, `tokens_total` int DEFAULT 0, `cost_usd` decimal(10,6) DEFAULT 0.000000, `latency_ms` int DEFAULT 0, `status` varchar(50) DEFAULT 'success' COMMENT 'success, error, timeout, rejected', `error_message` text, `parent_call_id` bigint COMMENT 'If this call was spawned by another call', `thread_id` bigint COMMENT 'Dialog thread this call belongs to', `message_id` bigint COMMENT 'Dialog message that triggered this call', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when call started', `completed_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when call finished'
Indexes: INDEX: idx_agent (agent_id); INDEX: idx_domain (domain_id); INDEX: idx_faucet (faucet_id); INDEX: idx_message (message_id); INDEX: idx_model (model_name); INDEX: idx_parent (parent_call_id); INDEX: idx_provider (provider); INDEX: idx_thread (thread_id)

=== TABLE: lupo_agent_versions ===
Primary Key: agent_version_id
Columns: `agent_version_id` bigint NOT NULL auto_increment, `agent_id` bigint NOT NULL, `version_label` varchar(64) NOT NULL, `semver_major` int DEFAULT 0, `semver_minor` int DEFAULT 0, `semver_patch` int DEFAULT 0, `version_notes` text, `version_hash` varchar(128), `previous_version_id` bigint, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `is_deleted` smallint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: agent_id (agent_id); INDEX: semver_major (semver_major, semver_minor, semver_patch); INDEX: version_label (version_label)

=== TABLE: lupo_analytics_campaign_vars_daily ===
Primary Key: analytics_campaign_vars_daily_id
Columns: `analytics_campaign_vars_daily_id` bigint NOT NULL auto_increment, `date_ymd` int NOT NULL COMMENT 'Date in YYYYMMDD format', `var_key` varchar(100) NOT NULL COMMENT 'The campaign/query variable name (e.g., utm_source, ref, etc.)', `var_value` varchar(500) NOT NULL COMMENT 'The value of the campaign variable', `visits` int NOT NULL DEFAULT 0 COMMENT 'Number of visits for this variable/value on this date', `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP DEFAULT_GENERATED
Indexes: INDEX: date_ymd (date_ymd); INDEX: var_key (var_key); INDEX: var_value (var_value)

=== TABLE: lupo_analytics_campaign_vars_monthly ===
Primary Key: analytics_campaign_vars_monthly_id
Columns: `analytics_campaign_vars_monthly_id` bigint NOT NULL auto_increment COMMENT 'Primary key for monthly campaign/query variable tracking', `content_id` bigint NOT NULL DEFAULT 0 COMMENT 'Content ID of the visited page (0 = non-content page)', `url_path` varchar(500) NOT NULL DEFAULT '' COMMENT 'Normalized URL path of the visited page', `var_key` varchar(100) NOT NULL COMMENT 'Name of the query variable (utm_source, q, search, etc.)', `var_value` varchar(500) NOT NULL COMMENT 'Value of the query variable', `date_ym` bigint NOT NULL COMMENT 'UTC YYYYMM representing the monthly bucket', `visits` int NOT NULL DEFAULT 0 COMMENT 'Number of visits with this variable/value pair in this month', `created_ymdhis` bigint NOT NULL COMMENT 'Record creation timestamp (UTC YYYYMMDDHHMMSS)', `updated_ymdhis` bigint NOT NULL COMMENT 'Record update timestamp (UTC YYYYMMDDHHMMSS)'
Indexes: INDEX: idx_content (content_id, date_ym); INDEX: idx_created (created_ymdhis); INDEX: idx_domain_month (date_ym); INDEX: idx_updated (updated_ymdhis); INDEX: idx_var_key (var_key, date_ym); INDEX: idx_var_value (var_value, date_ym); UNIQUE: uq_campaign_var_month (var_key, var_value, date_ym)

=== TABLE: lupo_analytics_referers_daily ===
Primary Key: analytics_referers_daily_id
Columns: `analytics_referers_daily_id` bigint NOT NULL auto_increment COMMENT 'Primary key for daily referer records', `content_id` bigint NOT NULL DEFAULT 0 COMMENT 'Content ID of the visited page (0 = non-content page)', `url_path` varchar(500) NOT NULL DEFAULT '' COMMENT 'Normalized URL path of the visited page', `referer_content_id` bigint NOT NULL DEFAULT 0 COMMENT 'Content ID of the referer page (0 = direct visit)', `referer_url_path` varchar(500) NOT NULL DEFAULT '' COMMENT 'Normalized URL path of the referer page', `parent_id` bigint NOT NULL DEFAULT 0 COMMENT 'Parent referer record for hierarchical analysis', `level` int NOT NULL DEFAULT 1 COMMENT 'Depth level in the referer tree', `group_id` bigint NOT NULL DEFAULT 0 COMMENT 'Group associated with this content', `date_ymd` bigint NOT NULL COMMENT 'UTC YYYYMMDD representing the daily bucket', `visits` int NOT NULL DEFAULT 0 COMMENT 'Total visits for this page on this day', `direct_visits` int NOT NULL DEFAULT 0 COMMENT 'Visits with no referer (entry points)', `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL
Indexes: INDEX: idx_content (content_id, date_ymd); INDEX: idx_created (created_ymdhis); INDEX: idx_domain_date (date_ymd); INDEX: idx_group (group_id, date_ymd); INDEX: idx_level (level, date_ymd); INDEX: idx_referer (referer_content_id, date_ymd); INDEX: idx_updated (updated_ymdhis); UNIQUE: uq_referer_daily (content_id, referer_content_id, date_ymd)

=== TABLE: lupo_analytics_referers_monthly ===
Primary Key: analytics_referers_monthly_id
Columns: `analytics_referers_monthly_id` bigint NOT NULL auto_increment COMMENT 'Primary key for monthly referer records', `content_id` bigint NOT NULL DEFAULT 0 COMMENT 'Content ID of the visited page (0 = non-content page)', `url_path` varchar(500) NOT NULL COMMENT 'raw, full URL', `referer_content_id` bigint NOT NULL DEFAULT 0 COMMENT 'Content ID of the referer page (0 = direct visit)', `referer_url_path` varchar(500) NOT NULL COMMENT 'raw, full URL', `parent_id` bigint NOT NULL DEFAULT 0 COMMENT 'Parent referer record for hierarchical analysis', `level` int NOT NULL DEFAULT 1 COMMENT 'Depth level in the referer tree', `group_id` bigint NOT NULL DEFAULT 0 COMMENT 'Group associated with this content', `date_ym` bigint NOT NULL COMMENT 'UTC YYYYMM representing the monthly bucket', `visits` int NOT NULL DEFAULT 0 COMMENT 'Total visits for this refererâ†’page path in this month', `direct_visits` int NOT NULL DEFAULT 0 COMMENT 'Visits with no referer (entry points)', `created_ymdhis` bigint NOT NULL COMMENT 'Record creation timestamp (UTC YYYYMMDDHHMMSS)', `updated_ymdhis` bigint NOT NULL COMMENT 'Record update timestamp (UTC YYYYMMDDHHMMSS)'
Indexes: INDEX: idx_content (content_id, date_ym); INDEX: idx_created (created_ymdhis); INDEX: idx_domain_month (date_ym); INDEX: idx_group (group_id, date_ym); INDEX: idx_level (level, date_ym); INDEX: idx_referer (referer_content_id, date_ym); INDEX: idx_updated (updated_ymdhis); UNIQUE: uq_referer_month (content_id, referer_content_id, date_ym)

=== TABLE: lupo_analytics_visits ===
Primary Key: analytics_visit_id
Columns: `analytics_visit_id` bigint NOT NULL auto_increment COMMENT 'Primary key for the visit tracking record', `session_id` varchar(100) NOT NULL COMMENT 'Session identifier', `actor_id` bigint NOT NULL DEFAULT 0 COMMENT 'Actor ID (0 = anonymous)', `content_id` bigint COMMENT 'Content being viewed (NULL for non-content pages)', `federations_node_id` bigint NOT NULL, `url_path` varchar(500) NOT NULL DEFAULT '' COMMENT 'Normalized URL path of the page view', `referer_url` varchar(500) COMMENT 'Full referer URL for this page view', `referer_domain` varchar(255) COMMENT 'Normalized referer domain', `referer_path` varchar(500) COMMENT 'Normalized referer path', `came_from` varchar(500) COMMENT 'Original entry referer for the session', `first_seen_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when this page was first seen in this session', `last_seen_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when this page was last seen in this session', `view_count` int NOT NULL DEFAULT 1 COMMENT 'Number of times this page was viewed in this session', `seconds_active` int NOT NULL DEFAULT 0 COMMENT 'Total seconds spent on this page during this session', `user_agent` varchar(255) COMMENT 'User agent for this page view', `ip_address` varchar(45) COMMENT 'IP address for this page view', `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL
Indexes: N/A

=== TABLE: lupo_analytics_visits_daily ===
Primary Key: analytics_visits_daily_id
Columns: `analytics_visits_daily_id` bigint NOT NULL auto_increment COMMENT 'Primary key for daily page visit statistics', `content_id` bigint NOT NULL DEFAULT 0 COMMENT 'Content ID of the visited page (0 = non-content page)', `url_path` varchar(500) NOT NULL DEFAULT '' COMMENT 'Normalized URL path of the visited page', `group_id` bigint NOT NULL DEFAULT 0 COMMENT 'Group associated with this content', `date_ymd` bigint NOT NULL COMMENT 'UTC YYYYMMDD representing the daily bucket', `visits` int NOT NULL DEFAULT 0 COMMENT 'Total number of visits to this page on this day', `unique_sessions` int NOT NULL DEFAULT 0 COMMENT 'Number of unique sessions that viewed this page', `unique_actors` int NOT NULL DEFAULT 0 COMMENT 'Number of unique logged-in actors that viewed this page', `direct_visits` int NOT NULL DEFAULT 0 COMMENT 'Visits with no referer (entry points)', `internal_visits` int NOT NULL DEFAULT 0 COMMENT 'Visits from internal referers', `entry_count` int NOT NULL DEFAULT 0 COMMENT 'Number of times this page was the first page in a session', `exit_count` int NOT NULL DEFAULT 0 COMMENT 'Number of times this page was the last page in a session', `total_seconds` int NOT NULL DEFAULT 0 COMMENT 'Total time spent on this page across all sessions', `avg_seconds` int NOT NULL DEFAULT 0 COMMENT 'Average time spent on this page', `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL
Indexes: INDEX: idx_content (content_id, date_ymd); INDEX: idx_created (created_ymdhis); INDEX: idx_date_ymd (date_ymd); INDEX: idx_group (group_id, date_ymd); INDEX: idx_updated (updated_ymdhis); UNIQUE: uq_visits_daily (content_id, date_ymd)

=== TABLE: lupo_analytics_visits_monthly ===
Primary Key: analytics_visits_monthly_id
Columns: `analytics_visits_monthly_id` bigint NOT NULL auto_increment COMMENT 'Primary key for monthly page visit statistics', `content_id` bigint NOT NULL DEFAULT 0 COMMENT 'Content ID of the visited page (0 = non-content page)', `url_path` varchar(500) NOT NULL DEFAULT '' COMMENT 'Normalized URL path of the visited page', `group_id` bigint NOT NULL DEFAULT 0 COMMENT 'Group associated with this content', `date_ym` bigint NOT NULL COMMENT 'UTC YYYYMM representing the monthly bucket', `visits` int NOT NULL DEFAULT 0, `unique_sessions` int NOT NULL DEFAULT 0, `unique_actors` int NOT NULL DEFAULT 0, `direct_visits` int NOT NULL DEFAULT 0, `internal_visits` int NOT NULL DEFAULT 0, `entry_count` int NOT NULL DEFAULT 0, `exit_count` int NOT NULL DEFAULT 0, `total_seconds` int NOT NULL DEFAULT 0, `avg_seconds` int NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL
Indexes: INDEX: idx_content (content_id, date_ym); INDEX: idx_created (created_ymdhis); INDEX: idx_group (group_id, date_ym); INDEX: idx_updated (updated_ymdhis); UNIQUE: uq_visits_monthly (content_id, date_ym)

=== TABLE: lupo_anibus_events ===
Primary Key: anibus_event_id
Columns: `anibus_event_id` int NOT NULL auto_increment, `event_type` varchar(64) NOT NULL, `details` text NOT NULL, `created_ymdhis` bigint NOT NULL
Indexes: N/A

=== TABLE: lupo_anibus_orphans ===
Primary Key: anibus_orphan_id
Columns: `anibus_orphan_id` int NOT NULL auto_increment, `table_name` varchar(128) NOT NULL, `column_name` varchar(128) NOT NULL, `missing_id` bigint NOT NULL, `detected_ymdhis` bigint NOT NULL, `resolved_ymdhis` bigint, `resolution_note` text
Indexes: N/A

=== TABLE: lupo_anibus_redirects ===
Primary Key: anibus_redirect_id
Columns: `anibus_redirect_id` int NOT NULL auto_increment, `from_id` bigint NOT NULL, `to_id` bigint NOT NULL, `table_name` varchar(128) NOT NULL, `reason` varchar(128) NOT NULL, `created_ymdhis` bigint NOT NULL
Indexes: N/A

=== TABLE: lupo_api_clients ===
Primary Key: api_client_id
Columns: `api_client_id` bigint NOT NULL auto_increment COMMENT 'Primary key for API client record', `actor_id` bigint NOT NULL DEFAULT 0 COMMENT 'Owner of this client (0 = system)', `client_key` varchar(255) NOT NULL COMMENT 'Public client identifier', `client_secret` varchar(255) NOT NULL COMMENT 'Hashed client secret (never store raw secret)', `client_name` varchar(150) NOT NULL COMMENT 'Human-readable name of the client', `client_description` text COMMENT 'Description of the integration or application', `scopes` text COMMENT 'Comma-separated list of allowed scopes', `is_active` tinyint(1) NOT NULL DEFAULT 1 COMMENT '1 = active, 0 = disabled', `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `expires_ymdhis` bigint COMMENT 'Expiration timestamp (NULL = never)'
Indexes: INDEX: idx_active (is_active); INDEX: idx_actor (actor_id); INDEX: idx_expires (expires_ymdhis); UNIQUE: uq_client_key (client_key)

=== TABLE: lupo_api_rate_limits ===
Primary Key: api_rate_limit_id
Columns: `api_rate_limit_id` bigint NOT NULL auto_increment COMMENT 'Primary key for API rate limit record', `domain_id` bigint NOT NULL DEFAULT 1 COMMENT 'Domain/tenant identifier', `api_token_id` bigint NOT NULL DEFAULT 0 COMMENT 'Token being rate-limited (0 = not token-based)', `actor_id` bigint NOT NULL DEFAULT 0 COMMENT 'Actor being rate-limited (0 = not actor-based)', `ip_address` varchar(45) COMMENT 'IP address being rate-limited', `endpoint` varchar(255) COMMENT 'Specific endpoint being rate-limited (NULL = global)', `window_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS representing the start of the rate-limit window', `request_count` int NOT NULL DEFAULT 0 COMMENT 'Number of requests in this window', `limit_value` int NOT NULL DEFAULT 0 COMMENT 'Maximum allowed requests in this window', `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL
Indexes: INDEX: idx_actor_window (actor_id, window_ymdhis); INDEX: idx_domain_window (domain_id, window_ymdhis); INDEX: idx_endpoint (endpoint); INDEX: idx_ip_window (ip_address, window_ymdhis); INDEX: idx_token_window (api_token_id, window_ymdhis)

=== TABLE: lupo_api_tokens ===
Primary Key: api_token_id
Columns: `api_token_id` bigint NOT NULL auto_increment COMMENT 'Primary key for API token record', `domain_id` bigint NOT NULL DEFAULT 1 COMMENT 'Domain/tenant identifier', `actor_id` bigint NOT NULL DEFAULT 0 COMMENT 'Actor who owns this token (0 = system token)', `token_key` varchar(255) NOT NULL COMMENT 'Hashed token value (never store raw token)', `token_label` varchar(150) COMMENT 'Human-readable label for this token', `scopes` text COMMENT 'Comma-separated list of scopes/permissions for this token', `is_active` tinyint(1) NOT NULL DEFAULT 1 COMMENT '1 = active, 0 = revoked', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when token was created', `expires_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when token expires (NULL = never)', `last_used_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when token was last used', `created_ip` varchar(45) COMMENT 'IP address where token was created', `last_used_ip` varchar(45) COMMENT 'IP address where token was last used', `notes` text COMMENT 'Optional notes or metadata about this token'
Indexes: INDEX: idx_active (is_active); INDEX: idx_actor (actor_id); INDEX: idx_domain (domain_id); INDEX: idx_expires (expires_ymdhis); INDEX: idx_last_used (last_used_ymdhis); UNIQUE: uq_token_key (token_key)

=== TABLE: lupo_api_token_logs ===
Primary Key: api_token_log_id
Columns: `api_token_log_id` bigint NOT NULL auto_increment COMMENT 'Primary key for API token usage log entry', `domain_id` bigint NOT NULL DEFAULT 1 COMMENT 'Domain/tenant identifier', `api_token_id` bigint NOT NULL COMMENT 'ID of the token used (no FK)', `actor_id` bigint NOT NULL DEFAULT 0 COMMENT 'Actor associated with the token (0 = system)', `endpoint` varchar(255) NOT NULL COMMENT 'API endpoint accessed', `http_method` varchar(10) NOT NULL COMMENT 'HTTP method used (GET, POST, etc.)', `ip_address` varchar(45) COMMENT 'IP address of the requester', `user_agent` varchar(255) COMMENT 'User agent of the requester', `status_code` int NOT NULL COMMENT 'HTTP response status code', `request_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when the request occurred', `duration_ms` int COMMENT 'Execution time in milliseconds'
Indexes: INDEX: idx_actor (actor_id); INDEX: idx_domain_time (domain_id, request_ymdhis); INDEX: idx_endpoint (endpoint); INDEX: idx_status (status_code); INDEX: idx_token (api_token_id)

=== TABLE: lupo_api_webhooks ===
Primary Key: api_webhook_id
Columns: `api_webhook_id` bigint NOT NULL auto_increment COMMENT 'Primary key for webhook registration', `domain_id` bigint NOT NULL DEFAULT 1 COMMENT 'Domain/tenant identifier', `actor_id` bigint NOT NULL DEFAULT 0 COMMENT 'Actor who created this webhook (0 = system)', `module_id` bigint NOT NULL DEFAULT 0 COMMENT 'Module associated with this webhook (0 = global)', `endpoint_url` varchar(500) NOT NULL COMMENT 'Target URL to receive webhook POST requests', `secret_key` varchar(255) NOT NULL COMMENT 'Hashed secret used to sign webhook payloads', `event_types` text NOT NULL COMMENT 'Comma-separated list of event types this webhook listens to', `is_active` tinyint(1) NOT NULL DEFAULT 1 COMMENT '1 = active, 0 = disabled', `max_retries` int NOT NULL DEFAULT 5 COMMENT 'Maximum number of retry attempts for failed deliveries', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when webhook was created', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when webhook was last updated', `expires_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when webhook expires (NULL = never)', `notes` text COMMENT 'Optional notes or metadata about this webhook'
Indexes: INDEX: idx_active (is_active); INDEX: idx_actor (actor_id); INDEX: idx_domain (domain_id); INDEX: idx_expires (expires_ymdhis); INDEX: idx_module (module_id)

=== TABLE: lupo_artifacts ===
Primary Key: artifact_id
Columns: `artifact_id` bigint NOT NULL auto_increment, `actor_id` bigint NOT NULL, `utc_timestamp` bigint NOT NULL COMMENT 'YYYYMMDDHHMMSS', `type` varchar(64) NOT NULL COMMENT 'dialog|changelog|schema|lore|humor|protocol|fork_justification', `content` longtext NOT NULL, `created_ymdhis` bigint NOT NULL, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: idx_actor_id (actor_id); INDEX: idx_is_deleted (is_deleted); INDEX: idx_type (type); INDEX: idx_utc_timestamp (utc_timestamp)

=== TABLE: lupo_atoms ===
Primary Key: atom_id
Columns: `atom_id` bigint NOT NULL auto_increment, `atom_name` varchar(255) NOT NULL, `context_id` bigint NOT NULL, `is_authoritative` tinyint NOT NULL DEFAULT 0, `value_json` json, `summary` text, `tags` varchar(255), `created_ymd` bigint NOT NULL DEFAULT 0, `updated_ymd` bigint NOT NULL DEFAULT 0
Indexes: INDEX: idx_atom_context (atom_name, context_id); INDEX: idx_atom_name (atom_name); INDEX: idx_authoritative (is_authoritative); INDEX: idx_context_id (context_id)

=== TABLE: lupo_audit_log ===
Primary Key: audit_log_id
Columns: `audit_log_id` bigint NOT NULL auto_increment, `channel_id` bigint NOT NULL, `entity_type` varchar(32) NOT NULL COMMENT 'Type of entity (actor, agent, content, etc.)', `entity_id` bigint NOT NULL COMMENT 'ID of the entity', `event_type` varchar(100) NOT NULL COMMENT 'Type of event that occurred', `table_name` varchar(100) COMMENT 'Name of the related database table', `table_id` bigint COMMENT 'ID of the related record in the table', `payload_json` longtext COMMENT 'Additional event data in JSON format', `created_ymdhis` bigint NOT NULL COMMENT 'Creation timestamp (YYYYMMDDHHMMSS)', `updated_ymdhis` bigint NOT NULL COMMENT 'Last update timestamp (YYYYMMDDHHMMSS)', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag (1=deleted, 0=active)', `deleted_ymdhis` bigint COMMENT 'Deletion timestamp (YYYYMMDDHHMMSS)'
Indexes: INDEX: idx_entity (entity_type, entity_id); INDEX: idx_event (event_type); INDEX: idx_table (table_name, table_id)

=== TABLE: lupo_auth_providers ===
Primary Key: auth_provider_id
Columns: `auth_provider_id` bigint NOT NULL auto_increment, `provider_name` varchar(50) NOT NULL COMMENT 'Unique provider name (e.g., google, github)', `client_id` varchar(255) NOT NULL COMMENT 'OAuth client ID', `client_secret` text NOT NULL COMMENT 'Encrypted at rest in lupopedia-config.php', `scopes` text COMMENT 'Space-separated list of OAuth scopes', `authorization_endpoint` varchar(2000) NOT NULL COMMENT 'OAuth authorization URL', `token_endpoint` varchar(2000) NOT NULL COMMENT 'OAuth token URL', `userinfo_endpoint` varchar(2000) COMMENT 'Optional userinfo endpoint', `jwks_uri` varchar(2000) COMMENT 'Optional JWKS URI for key rotation', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when provider was created', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when provider was last updated', `is_active` tinyint NOT NULL DEFAULT 1 COMMENT '1 = active, 0 = inactive'
Indexes: UNIQUE: unique_provider_name (provider_name)

=== TABLE: lupo_auth_users ===
Primary Key: auth_user_id
Columns: `auth_user_id` bigint NOT NULL auto_increment, `username` varchar(30) NOT NULL, `display_name` varchar(42) NOT NULL, `email` varchar(100), `password_hash` varchar(255) COMMENT 'NULL for OAuth users', `auth_provider` varchar(50) COMMENT 'NULL for local users', `provider_id` varchar(255) COMMENT 'Provider-specific user ID', `profile_image_url` varchar(2000), `last_login_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS', `is_active` tinyint NOT NULL DEFAULT 1 COMMENT '1 = active, 0 = inactive', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when user was deleted'
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_email (email); INDEX: idx_is_active (is_active); INDEX: idx_is_deleted (is_deleted); INDEX: idx_updated_ymdhis (updated_ymdhis); UNIQUE: unique_provider_user (auth_provider, provider_id); UNIQUE: unique_username (username)

=== TABLE: lupo_calibration_impacts ===
Primary Key: id
Columns: `id` bigint unsigned NOT NULL auto_increment, `calibration_id` bigint unsigned NOT NULL COMMENT 'Reference to lupo_emotional_geometry_calibrations.id', `impact_type` enum('agent_behavior','communication_tone','system_harmony','conflict_reduction') NOT NULL, `impact_measurement` decimal(5,4) NOT NULL COMMENT 'Quantified impact (0.0000-1.0000)', `measurement_method` varchar(100) NOT NULL COMMENT 'How impact was measured', `before_metrics_json` json COMMENT 'Metrics before calibration', `after_metrics_json` json COMMENT 'Metrics after calibration', `observation_period_hours` int unsigned DEFAULT 24 COMMENT 'Observation period length', `measured_ymdhis` bigint NOT NULL COMMENT 'When impact was measured', `impact_version` varchar(20) DEFAULT '4.0.75' COMMENT 'Impact tracking version'
Indexes: INDEX: idx_calibration_impact (calibration_id, impact_type); INDEX: idx_impact_measurement (impact_measurement); INDEX: idx_measurement_time (measured_ymdhis)

=== TABLE: lupo_channels ===
Primary Key: channel_id
Columns: `channel_id` bigint NOT NULL auto_increment COMMENT 'Primary key for channel', `federation_node_id` bigint NOT NULL COMMENT 'Domain/tenant identifier', `created_by_actor_id` bigint NOT NULL COMMENT 'who made this channel', `default_actor_id` bigint NOT NULL DEFAULT 1 COMMENT 'Default actor ID', `channel_key` varchar(64) NOT NULL COMMENT 'URL-friendly identifier (slug)', `channel_slug` varchar(32) NOT NULL DEFAULT 'channel_key' COMMENT 'well if they think it exists i guess i will make it', `channel_type` varchar(32) NOT NULL DEFAULT 'chat_room', `channel_name` varchar(255) NOT NULL COMMENT 'Human-readable channel name', `description` text COMMENT 'Channel description', `metadata_json` text COMMENT 'JSON metadata for the channel', `bgcolor` varchar(6) NOT NULL DEFAULT 'FFFFFF', `status_flag` tinyint NOT NULL DEFAULT 1 COMMENT 'Status flag (1=active, 0=inactive)', `end_ymdhis` bigint COMMENT 'Channel end timestamp (YYYYMMDDHHMMSS, NULL if ongoing)', `duration_seconds` int COMMENT 'Duration of the channel in seconds (if ended)', `created_ymdhis` bigint NOT NULL COMMENT 'Creation timestamp (YYYYMMDDHHMMSS)', `updated_ymdhis` bigint NOT NULL COMMENT 'Last update timestamp (YYYYMMDDHHMMSS)', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag (1=deleted, 0=active)', `deleted_ymdhis` bigint COMMENT 'Deletion timestamp (YYYYMMDDHHMMSS)', `aal_metadata_json` json COMMENT 'Agent Awareness Layer metadata for WHO/WHAT/WHERE/WHEN/WHY/HOW/PURPOSE', `fleet_composition_json` json COMMENT 'Current fleet of agents in this channel with their roles', `awareness_version` varchar(20) DEFAULT '4.0.72' COMMENT 'AAL protocol version for this channel'
Indexes: INDEX: idx_awareness_version (awareness_version); INDEX: idx_channel_key (channel_key); INDEX: idx_dates (end_ymdhis); INDEX: idx_domain (federation_node_id); INDEX: idx_status (status_flag); UNIQUE: unq_channel_key_per_node (channel_key, federation_node_id)

=== TABLE: lupo_cip_analytics ===
Primary Key: id
Columns: `id` bigint unsigned NOT NULL auto_increment, `event_id` bigint unsigned NOT NULL COMMENT 'Reference to lupo_cip_events.id', `defensiveness_index` decimal(5,4) NOT NULL DEFAULT 0.0000 COMMENT 'DI: 0.0000-1.0000 scale', `integration_velocity` decimal(5,4) NOT NULL DEFAULT 0.0000 COMMENT 'IV: 0.0000-1.0000 scale', `architectural_impact_score` decimal(5,4) NOT NULL DEFAULT 0.0000 COMMENT 'AIS: 0.0000-1.0000 scale', `doctrine_propagation_depth` tinyint unsigned NOT NULL DEFAULT 0 COMMENT 'DPD: 0-10 depth levels', `critique_source_weight` decimal(5,4) NOT NULL DEFAULT 0.5000 COMMENT 'Source credibility weight', `subsystem_impact_json` json COMMENT 'Impact analysis per subsystem', `trend_analysis_json` json COMMENT 'Historical trend data', `calculated_ymdhis` bigint NOT NULL COMMENT 'When analytics were calculated', `recalculated_ymdhis` bigint COMMENT 'Last recalculation timestamp', `analytics_version` varchar(20) DEFAULT '4.0.75' COMMENT 'Analytics engine version'
Indexes: INDEX: idx_architectural_impact (architectural_impact_score); INDEX: idx_calculated_time (calculated_ymdhis); INDEX: idx_defensiveness_index (defensiveness_index); INDEX: idx_integration_velocity (integration_velocity); UNIQUE: uk_event_analytics (event_id)

=== TABLE: lupo_cip_propagation_tracking ===
Primary Key: id
Columns: `id` bigint unsigned NOT NULL auto_increment, `cip_event_id` bigint unsigned NOT NULL COMMENT 'Root CIP event', `propagation_level` tinyint unsigned NOT NULL COMMENT 'Depth level (0-10)', `affected_subsystem` varchar(100) NOT NULL COMMENT 'Subsystem affected at this level', `propagation_type` enum('doctrine','emotional_geometry','agent_behavior','system_config') NOT NULL, `change_description` text NOT NULL COMMENT 'What changed at this level', `propagation_strength` decimal(5,4) NOT NULL DEFAULT 1.0000 COMMENT 'Strength of propagation', `completion_status` enum('pending','in_progress','completed','blocked','failed') DEFAULT 'pending', `dependencies_json` json COMMENT 'Dependencies for this propagation step', `started_ymdhis` bigint COMMENT 'When propagation started', `completed_ymdhis` bigint COMMENT 'When propagation completed', `propagation_version` varchar(20) DEFAULT '4.0.75' COMMENT 'Propagation tracking version'
Indexes: INDEX: idx_completion_status (completion_status); INDEX: idx_event_level (cip_event_id, propagation_level); INDEX: idx_propagation_strength (propagation_strength); INDEX: idx_subsystem (affected_subsystem)

=== TABLE: lupo_cip_trends ===
Primary Key: id
Columns: `id` bigint unsigned NOT NULL auto_increment, `trend_period` enum('hourly','daily','weekly','monthly') NOT NULL, `period_start_ymdhis` bigint NOT NULL COMMENT 'Start of aggregation period', `period_end_ymdhis` bigint NOT NULL COMMENT 'End of aggregation period', `avg_defensiveness_index` decimal(5,4) NOT NULL DEFAULT 0.0000, `avg_integration_velocity` decimal(5,4) NOT NULL DEFAULT 0.0000, `avg_architectural_impact` decimal(5,4) NOT NULL DEFAULT 0.0000, `total_events` int unsigned NOT NULL DEFAULT 0, `high_impact_events` int unsigned NOT NULL DEFAULT 0 COMMENT 'AIS > 0.7000', `doctrine_updates_triggered` int unsigned NOT NULL DEFAULT 0, `trend_metadata_json` json COMMENT 'Additional trend analysis', `calculated_ymdhis` bigint NOT NULL COMMENT 'When trend was calculated'
Indexes: INDEX: idx_high_impact (high_impact_events); INDEX: idx_period_range (period_start_ymdhis, period_end_ymdhis); UNIQUE: uk_period_trend (trend_period, period_start_ymdhis)

=== TABLE: lupo_collections ===
Primary Key: collection_id
Columns: `collection_id` bigint NOT NULL auto_increment COMMENT 'Primary key for collection', `federations_node_id` bigint NOT NULL COMMENT 'Domain this collection belongs to', `user_id` bigint COMMENT 'Owner of this collection, if user-owned', `group_id` bigint COMMENT 'Owning group, if group-owned', `name` varchar(255) NOT NULL COMMENT 'Display name of the collection', `slug` varchar(100) NOT NULL COMMENT 'URL-friendly identifier, unique per domain', `color` char(6) DEFAULT '666666' COMMENT 'Hex color code for the collection (6 hex characters, no hash)', `description` text COMMENT 'Optional description of the collection', `sort_order` int DEFAULT 0 COMMENT 'Manual sort order within parent container', `properties` text COMMENT 'JSON-encoded key-value store', `published_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when published', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted', `parent_id` bigint
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_domain (federations_node_id); INDEX: idx_group (group_id); INDEX: idx_is_deleted (is_deleted); INDEX: idx_name (name); INDEX: idx_sort_order (sort_order); INDEX: idx_updated_ymdhis (updated_ymdhis); INDEX: idx_user (user_id); UNIQUE: unique_collection_slug_domain (federations_node_id, slug)

=== TABLE: lupo_collection_tabs ===
Primary Key: collection_tab_id
Columns: `collection_tab_id` bigint NOT NULL auto_increment, `collection_tab_parent_id` bigint COMMENT 'Parent tab ID for hierarchical nesting, NULL for root level', `collection_id` bigint NOT NULL COMMENT 'Reference to the parent collection', `federations_node_id` bigint NOT NULL COMMENT 'Domain this tab belongs to (via collection)', `group_id` bigint COMMENT 'Owning group, if group-owned', `user_id` bigint COMMENT 'Owning user, if user-owned', `sort_order` int DEFAULT 0 COMMENT 'Order of display within parent container', `name` varchar(255) NOT NULL COMMENT 'Display name of the tab', `slug` varchar(100) NOT NULL COMMENT 'URL-friendly identifier, unique within collection', `color` char(6) DEFAULT '4caf50' COMMENT 'Hex color code (6 characters, no hash)', `description` text COMMENT 'Optional description of the tab', `is_hidden` tinyint NOT NULL DEFAULT 0 COMMENT '1 = hidden, 0 = visible', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_active` tinyint NOT NULL DEFAULT 1 COMMENT '1 = active, 0 = not active', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = soft deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted'
Indexes: INDEX: idx_collection_id (collection_id); INDEX: idx_is_active (is_active); INDEX: idx_parent_tab_id (collection_tab_parent_id); INDEX: idx_slug (slug)

=== TABLE: lupo_collection_tab_map ===
Primary Key: collection_tab_map_id
Columns: `collection_tab_map_id` bigint NOT NULL auto_increment, `collection_tab_id` bigint NOT NULL COMMENT 'Reference to the parent tab', `federations_node_id` bigint NOT NULL COMMENT 'Domain this mapping belongs to', `item_type` varchar(20) NOT NULL COMMENT 'Type of mapped item (content, tab, link, etc.)', `item_id` bigint NOT NULL COMMENT 'ID of the mapped item', `sort_order` int DEFAULT 0 COMMENT 'Display order within the tab', `properties` text COMMENT 'JSON-encoded key-value store for additional data', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted'
Indexes: INDEX: idx_collection_tab (collection_tab_id); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_domain (federations_node_id); INDEX: idx_is_deleted (is_deleted); INDEX: idx_item (item_type, item_id); INDEX: idx_sort_order (sort_order); INDEX: idx_updated_ymdhis (updated_ymdhis); UNIQUE: unique_item_in_tab (collection_tab_id, item_type, item_id)

=== TABLE: lupo_collection_tab_paths ===
Primary Key: collection_tab_path_id
Columns: `collection_tab_path_id` bigint NOT NULL auto_increment, `collection_id` bigint NOT NULL, `collection_tab_id` bigint NOT NULL, `path` varchar(500) NOT NULL COMMENT 'Full tab path: departments/parks-and-recreation/summer-programs', `depth` int NOT NULL COMMENT 'Number of levels (1 = root tab)', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS', `updated_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS', `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: idx_collection (collection_id); INDEX: idx_collection_tab (collection_tab_id); INDEX: idx_path (path); UNIQUE: unique_tab_path (collection_id, collection_tab_id, path)

=== TABLE: lupo_contents ===
Primary Key: content_id
Columns: `content_id` bigint NOT NULL auto_increment COMMENT 'Primary key for content', `content_parent_id` bigint COMMENT 'Parent content ID for hierarchical relationships', `federation_node_id` bigint DEFAULT 1 COMMENT 'Domain scope, NULL for global content', `group_id` bigint COMMENT 'Optional group restriction', `user_id` bigint COMMENT 'Author of the content', `title` varchar(255) NOT NULL COMMENT 'Content title', `slug` varchar(255) NOT NULL COMMENT 'URL-friendly identifier, unique within domain', `description` text COMMENT 'Short summary or teaser', `seo_keywords` varchar(500), `body` longtext COMMENT 'Main content body', `content_type` varchar(50) DEFAULT 'article' COMMENT 'Type of content (article, page, post, etc.)', `format` varchar(20) DEFAULT 'html' COMMENT 'Content format (html, markdown, etc.)', `content_url` varchar(2000) COMMENT 'content URL if content is referenced by url such as lupopedia.com/content/lupopedia', `default_collection_id` bigint COMMENT 'Default collection ID', `source_url` varchar(2000) COMMENT 'Original source URL if content is imported', `source_title` varchar(500) COMMENT 'Title of the source', `is_template` tinyint NOT NULL DEFAULT 0 COMMENT '1 = template, 0 = regular content', `status` enum('draft','published','archived') DEFAULT 'draft' COMMENT 'Publication status', `visibility` enum('public','private','unlisted') DEFAULT 'public' COMMENT 'Visibility level', `view_count` int DEFAULT 0 COMMENT 'Number of views', `share_count` int DEFAULT 0 COMMENT 'Number of shares', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `utc_cycle` enum('creative','responsible') NOT NULL, `triage_status` enum('untriaged','keeper','fragment','duplicate','trash') NOT NULL DEFAULT 'untriaged', `triage_notes` text, `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `is_active` tinyint NOT NULL DEFAULT 1 COMMENT '1 = active, 0 = not active', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted', `content_sections` json COMMENT 'Cached list of section anchors extracted from the content body', `version_number` int NOT NULL DEFAULT 1 COMMENT 'Monotonic version number for the live content row'
Indexes: INDEX: ft_content (title, description, body); INDEX: idx_content_parent (content_parent_id); INDEX: idx_content_type (content_type); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_domain (federation_node_id); INDEX: idx_group (group_id); INDEX: idx_is_active (is_active); INDEX: idx_is_deleted (is_deleted); INDEX: idx_status (status); INDEX: idx_updated_ymdhis (updated_ymdhis); INDEX: idx_user (user_id); INDEX: idx_visibility (visibility); UNIQUE: unique_content_slug_domain (federation_node_id, slug)

=== TABLE: lupo_content_atom_map ===
Primary Key: content_atom_map_id
Columns: `content_atom_map_id` bigint NOT NULL auto_increment, `content_id` bigint NOT NULL COMMENT 'Content item using the atom', `atom_id` bigint NOT NULL COMMENT 'Semantic atom referenced by the content', `purpose` varchar(255) COMMENT 'Why this atom is attached (topic, tag, variable, etc.)', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted'
Indexes: INDEX: idx_atom (atom_id); INDEX: idx_content (content_id); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_is_deleted (is_deleted); INDEX: idx_purpose (purpose); INDEX: idx_updated_ymdhis (updated_ymdhis); UNIQUE: unique_atom_content (content_id, atom_id)

=== TABLE: lupo_content_category_map ===
Primary Key: content_category_map_id
Columns: `content_category_map_id` bigint NOT NULL auto_increment COMMENT 'Primary key for content-category mapping', `content_id` bigint NOT NULL COMMENT 'Content being categorized', `category_id` bigint NOT NULL COMMENT 'Category assigned to this content', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when mapping was created'
Indexes: INDEX: idx_category (category_id); INDEX: idx_content (content_id); UNIQUE: uq_content_category (content_id, category_id)

=== TABLE: lupo_content_engagement_summary ===
Primary Key: content_engagement_summary_id
Columns: `content_engagement_summary_id` bigint NOT NULL auto_increment COMMENT 'Reference to the content item', `likes_total` int NOT NULL DEFAULT 0 COMMENT 'Total number of likes received', `shares_total` int NOT NULL DEFAULT 0 COMMENT 'Total number of shares', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when the summary was last updated', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when the summary was first created'
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_likes_total (likes_total); INDEX: idx_shares_total (shares_total); INDEX: idx_updated_ymdhis (updated_ymdhis)

=== TABLE: lupo_content_events ===
Primary Key: content_event_id
Columns: `content_event_id` bigint NOT NULL auto_increment COMMENT 'Primary key for content event', `content_id` bigint COMMENT 'Content identifier', `actor_id` bigint COMMENT 'Actor ID from lupo_actors', `session_id` varchar(255) COMMENT 'Session identifier', `tab_id` varchar(255) COMMENT 'Tab identifier', `world_id` bigint COMMENT 'World context ID', `world_key` varchar(255) COMMENT 'World context key', `world_type` varchar(50) COMMENT 'World context type', `event_type` varchar(100) NOT NULL COMMENT 'Type of content event', `event_data` json COMMENT 'Event-specific data', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS'
Indexes: INDEX: idx_actor_id (actor_id); INDEX: idx_content_event_type (content_id, event_type); INDEX: idx_content_id (content_id); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_event_type (event_type); INDEX: idx_session_id (session_id); INDEX: idx_tab_id (tab_id); INDEX: idx_world_id (world_id)

=== TABLE: lupo_content_hashtag ===
Primary Key: content_hashtag_id
Columns: `content_hashtag_id` bigint NOT NULL auto_increment COMMENT 'Reference to the content item', `hashtag_id` bigint NOT NULL COMMENT 'Reference to the hashtag', `context_id` bigint NOT NULL COMMENT 'Context for this hashtag association', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when the association was created', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted'
Indexes: INDEX: idx_content (content_hashtag_id); INDEX: idx_context (context_id); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_hashtag (hashtag_id); INDEX: idx_is_deleted (is_deleted)

=== TABLE: lupo_content_inbound_links ===
Primary Key: content_inbound_link_id
Columns: `content_inbound_link_id` bigint NOT NULL auto_increment, `target_content_id` bigint NOT NULL COMMENT 'Content item being linked TO', `source_type` varchar(50) NOT NULL COMMENT 'content, reference, external, tab, atom, question, etc.', `source_id` bigint COMMENT 'ID of the source entity when applicable', `source_url` varchar(2000) COMMENT 'For external links', `link_type` varchar(255) COMMENT 'citation, embed, mention, related, etc.', `properties` json COMMENT 'JSON-encoded additional properties', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted'
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_is_deleted (is_deleted); INDEX: idx_source (source_type, source_id); INDEX: idx_target (target_content_id); INDEX: idx_updated_ymdhis (updated_ymdhis); INDEX: idx_url (source_url)

=== TABLE: lupo_content_likes ===
Primary Key: content_like_id
Columns: `content_like_id` bigint NOT NULL auto_increment, `content_id` bigint NOT NULL COMMENT 'ID of the content being liked', `user_id` bigint COMMENT 'ID of the user who liked (if authenticated)', `visitor_hash` char(64) COMMENT 'Hashed IP/session for anonymous likes', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted'
Indexes: INDEX: idx_content (content_id); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_is_deleted (is_deleted); INDEX: idx_updated_ymdhis (updated_ymdhis); INDEX: idx_user (user_id); UNIQUE: unique_like_user (content_id, user_id); UNIQUE: unique_like_visitor (content_id, visitor_hash)

=== TABLE: lupo_content_media ===
Primary Key: content_media_id
Columns: `content_media_id` bigint NOT NULL auto_increment, `content_id` bigint NOT NULL COMMENT 'Reference to the parent content item', `media_type` enum('image','audio','video','document','other') NOT NULL COMMENT 'Type of media: image, audio, video, document, or other', `original_filename` varchar(255) COMMENT 'Original filename as uploaded by user', `stored_filename` varchar(255) NOT NULL COMMENT 'Generated filename for storage (unique identifier)', `stored_path` varchar(512) NOT NULL COMMENT 'Relative path to the media file (without filename)', `file_extension` varchar(20) COMMENT 'File extension without leading dot', `mime_type` varchar(100) COMMENT 'MIME type of the media file', `file_size` bigint COMMENT 'File size in bytes', `dimensions` varchar(50) COMMENT 'Image/video dimensions (WxH)', `duration` int COMMENT 'Duration in seconds (audio/video)', `media_order` int NOT NULL DEFAULT 0 COMMENT 'Display order within the content item', `title` varchar(255) COMMENT 'Title of the media', `caption_text` text COMMENT 'Descriptive caption', `alt_text` text COMMENT 'Accessibility alternative text', `description` text COMMENT 'Detailed description', `metadata` json COMMENT 'JSON-encoded technical metadata (EXIF, codec info, etc.)', `variants` json COMMENT 'JSON-encoded information about generated variants (thumbnails, etc.)', `is_public` tinyint NOT NULL DEFAULT 1 COMMENT '1 = publicly accessible, 0 = private', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when last updated'
Indexes: INDEX: idx_content (content_id); INDEX: idx_created (created_ymdhis); INDEX: idx_is_deleted (is_deleted); INDEX: idx_is_public (is_public); INDEX: idx_media_order (media_order); INDEX: idx_media_type (media_type); INDEX: idx_mime_type (mime_type); INDEX: idx_updated (updated_ymdhis)

=== TABLE: lupo_content_question_map ===
Primary Key: content_question_map_id
Columns: `content_question_map_id` bigint NOT NULL auto_increment, `content_id` bigint NOT NULL COMMENT 'Content item associated with the question', `question_id` bigint NOT NULL COMMENT 'Question applied to this content', `domain_id` bigint NOT NULL COMMENT 'Domain this mapping belongs to', `purpose` varchar(255) COMMENT 'Optional: answer, related, metadata, prompt, etc.', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted'
Indexes: INDEX: idx_content (content_id); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_domain (domain_id); INDEX: idx_is_deleted (is_deleted); INDEX: idx_question (question_id); INDEX: idx_updated_ymdhis (updated_ymdhis); UNIQUE: unique_question_content (content_id, question_id)

=== TABLE: lupo_content_references ===
Primary Key: content_referenc_id
Columns: `content_referenc_id` bigint NOT NULL auto_increment, `content_id` bigint NOT NULL, `section_anchor_slug` varchar(255), `raw_reference` text NOT NULL, `reference_type` varchar(50) NOT NULL, `reference_slug` varchar(255), `reference_object_id` bigint, `meta_json` json, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: INDEX: idx_content_id (content_id); INDEX: idx_is_deleted (is_deleted); INDEX: idx_reference_object (reference_object_id); INDEX: idx_reference_slug (reference_slug); INDEX: idx_reference_type (reference_type); INDEX: idx_section_anchor (section_anchor_slug)

=== TABLE: lupo_content_revisions ===
Primary Key: content_revision_id
Columns: `content_revision_id` bigint NOT NULL auto_increment, `content_id` bigint NOT NULL COMMENT 'FK to contents table (not enforced by DB)', `version_number` int NOT NULL COMMENT 'Version number this snapshot represents', `body_snapshot` text NOT NULL COMMENT 'Full body content at the time of revision', `metadata_snapshot` json COMMENT 'Metadata JSON at the time of revision', `sections_snapshot` json COMMENT 'Cached section anchors at the time of revision', `edited_by` varchar(100) COMMENT 'Username or agent identifier that made the change', `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP DEFAULT_GENERATED
Indexes: INDEX: content_id (content_id); INDEX: version_number (version_number)

=== TABLE: lupo_content_shares ===
Primary Key: content_share_id
Columns: `content_share_id` bigint NOT NULL auto_increment, `content_id` bigint NOT NULL COMMENT 'ID of the content being shared', `user_id` bigint COMMENT 'ID of the user who shared (if authenticated)', `visitor_hash` char(64) COMMENT 'Hashed IP/session for anonymous shares', `share_method` varchar(50) COMMENT 'Share method: link, embed, social, email, etc.', `share_target` varchar(255) COMMENT 'Specific target of the share (e.g., "twitter", "facebook")', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted'
Indexes: INDEX: idx_content (content_id); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_is_deleted (is_deleted); INDEX: idx_method (share_method); INDEX: idx_updated_ymdhis (updated_ymdhis); INDEX: idx_user (user_id)

=== TABLE: lupo_content_tag_relationships ===
Primary Key: relationship_id
Columns: `relationship_id` bigint NOT NULL auto_increment COMMENT 'Primary key for content-tag relationship', `content_id` bigint NOT NULL COMMENT 'Reference to content table', `tag_id` bigint NOT NULL COMMENT 'Reference to tag table', `relationship_type` enum('category','topic','label') NOT NULL COMMENT 'Type of relationship', `created_ymdhis` bigint NOT NULL COMMENT 'Creation timestamp'
Indexes: INDEX: idx_content_id (content_id); INDEX: idx_created (created_ymdhis); INDEX: idx_created_ymdhis (created_ymdhis, relationship_type, content_id, tag_id); INDEX: idx_relationship_type (relationship_type); INDEX: idx_tag_id (tag_id)

=== TABLE: lupo_contexts ===
Primary Key: context_id
Columns: `context_id` bigint NOT NULL auto_increment, `context_type` varchar(50) NOT NULL, `context_slug` varchar(255) NOT NULL, `parent_context_id` bigint, `description` text, `created_ymd` bigint NOT NULL DEFAULT 0, `updated_ymd` bigint NOT NULL DEFAULT 0
Indexes: INDEX: idx_context_slug (context_slug); INDEX: idx_context_type (context_type); INDEX: idx_parent_context (parent_context_id)

=== TABLE: lupo_contexts_map ===
Primary Key: contexts_map_id
Columns: `contexts_map_id` bigint NOT NULL auto_increment, `context_id` bigint NOT NULL, `item_type` varchar(50) NOT NULL, `item_slug` varchar(255) NOT NULL, `description` text, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: INDEX: idx_context_id (context_id); INDEX: idx_context_item (context_id, item_type, item_slug); INDEX: idx_is_deleted (is_deleted); INDEX: idx_item_slug (item_slug); INDEX: idx_item_type (item_type)

=== TABLE: lupo_crafty_syntax_auto_invite ===
Primary Key: crafty_syntax_auto_invite_id
Columns: `crafty_syntax_auto_invite_id` bigint NOT NULL auto_increment, `is_offline` tinyint NOT NULL DEFAULT 0, `is_active` tinyint NOT NULL DEFAULT 0, `department_id` bigint NOT NULL DEFAULT 0, `message` mediumtext, `page_url` varchar(500), `visits` int NOT NULL DEFAULT 0, `referrer_url` varchar(500), `invite_type` varchar(50), `trigger_seconds` int NOT NULL DEFAULT 0, `operator_user_id` bigint NOT NULL DEFAULT 0, `show_socialpane` tinyint NOT NULL DEFAULT 0, `exclude_mobile` tinyint NOT NULL DEFAULT 0, `only_mobile` tinyint NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL DEFAULT 20250101000000, `updated_ymdhis` bigint NOT NULL DEFAULT 20250101000000, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: idx_created (created_ymdhis); INDEX: idx_department (department_id); INDEX: idx_operator (operator_user_id); INDEX: idx_page_url (page_url); INDEX: idx_status (is_active, is_deleted)

=== TABLE: lupo_crafty_syntax_chat_mod_departments ===
Primary Key: crafty_syntax_chat_mod_department_id
Columns: `crafty_syntax_chat_mod_department_id` bigint NOT NULL auto_increment, `department_id` bigint NOT NULL DEFAULT 0, `module_id` bigint NOT NULL DEFAULT 0, `sort_order` int NOT NULL DEFAULT 0, `is_active` tinyint(1) NOT NULL DEFAULT 1, `is_default` tinyint(1) NOT NULL DEFAULT 0
Indexes: N/A

=== TABLE: lupo_crafty_syntax_chat_questions ===
Primary Key: crafty_syntax_chat_question_id
Columns: `crafty_syntax_chat_question_id` bigint NOT NULL auto_increment, `department_id` bigint NOT NULL DEFAULT 0, `sort_order` int NOT NULL DEFAULT 0, `headertext` mediumtext, `field_type` varchar(60), `options` mediumtext, `flags` varchar(255), `module_name` varchar(100), `is_required` tinyint NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `is_deleted` tinyint(1) NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: department (department_id)

=== TABLE: lupo_crafty_syntax_layer_invites ===
Primary Key: crafty_syntax_layer_invite_id
Columns: `crafty_syntax_layer_invite_id` bigint NOT NULL auto_increment COMMENT 'Unique identifier for the layer invitation', `layer_name` varchar(100) NOT NULL DEFAULT '' COMMENT 'Name/identifier for this layer invitation', `image_name` varchar(255) NOT NULL DEFAULT '' COMMENT 'Filename of the image used for this layer', `image_map` text COMMENT 'HTML image map coordinates and links in JSON format', `department_name` varchar(100) NOT NULL DEFAULT '' COMMENT 'Name of the department this layer is associated with', `user_id` bigint NOT NULL DEFAULT 0 COMMENT 'User ID who created this layer invitation (0 = system)', `is_active` tinyint NOT NULL DEFAULT 1 COMMENT 'Whether this layer is active: 0=inactive, 1=active', `display_count` int NOT NULL DEFAULT 0 COMMENT 'Number of times this layer has been displayed', `click_count` int NOT NULL DEFAULT 0 COMMENT 'Number of times this layer has been clicked', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when record was created', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when record was last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag: 0=active, 1=deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when record was soft-deleted'
Indexes: INDEX: idx_active (is_active); INDEX: idx_created (created_ymdhis); INDEX: idx_department (department_name); INDEX: idx_name (layer_name); INDEX: idx_updated (updated_ymdhis); INDEX: idx_user (user_id)

=== TABLE: lupo_crafty_syntax_leave_message ===
Primary Key: crafty_syntax_leave_message_id
Columns: `crafty_syntax_leave_message_id` bigint NOT NULL auto_increment, `department_id` bigint NOT NULL DEFAULT 0, `email` varchar(255) NOT NULL DEFAULT '', `phone` varchar(45), `name` varchar(200), `subject` varchar(255) NOT NULL DEFAULT '', `message` text, `priority` tinyint NOT NULL DEFAULT 2, `session_data` text, `form_data` text, `ip_address` varchar(45), `user_agent` varchar(255), `status` enum('new','in_progress','resolved','spam') NOT NULL DEFAULT 'new', `assigned_to` bigint, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: idx_assigned (assigned_to); INDEX: idx_created (created_ymdhis); INDEX: idx_department (department_id); INDEX: idx_email (email); INDEX: idx_message_search (email, name, subject, message); INDEX: idx_priority (priority); INDEX: idx_status (status)

=== TABLE: lupo_crafty_user_mapping ===
Primary Key: id
Columns: `id` bigint NOT NULL auto_increment COMMENT 'Primary key for mapping', `lupo_user_id` bigint COMMENT 'Reference to lupo_auth_users.auth_user_id', `crafty_operator_id` int COMMENT 'Reference to livehelp_operators.operatorid', `mapping_type` varchar(50) NOT NULL DEFAULT 'manual' COMMENT 'Type: manual, auto, imported', `notes` text COMMENT 'Optional notes for mapping', `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP DEFAULT_GENERATED COMMENT 'Creation timestamp', `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP DEFAULT_GENERATED on update CURRENT_TIMESTAMP COMMENT 'Last update timestamp'
Indexes: INDEX: idx_crafty_operator_id (crafty_operator_id); INDEX: idx_lupo_user_id (lupo_user_id); INDEX: idx_mapping_type (mapping_type); UNIQUE: unique_crafty_operator_mapping (crafty_operator_id); UNIQUE: unique_lupo_user_mapping (lupo_user_id)

=== TABLE: lupo_crm_leads ===
Primary Key: crm_lead_id
Columns: `crm_lead_id` bigint NOT NULL auto_increment COMMENT 'Unique identifier for the lead', `email` varchar(255) COMMENT 'Email address of the lead', `phone` varchar(45) COMMENT 'Phone number of the lead (formatted as E.164)', `first_name` varchar(100) COMMENT 'First name of the lead', `last_name` varchar(100) COMMENT 'Last name of the lead', `source` varchar(100) COMMENT 'Source that generated this lead (e.g., website, referral, campaign)', `status` varchar(50) NOT NULL DEFAULT 'new' COMMENT 'Current status of the lead (new, contacted, qualified, converted, etc.)', `lead_score` int NOT NULL DEFAULT 0 COMMENT 'Numerical score indicating lead quality (0-100)', `assigned_to` bigint COMMENT 'user ID of the team member assigned to this lead', `lead_data` longtext COMMENT 'JSON-encoded additional lead information and custom fields', `created_ymdhis` bigint NOT NULL COMMENT 'UTC timestamp when the lead was created (YYYYMMDDHHMMSS)', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC timestamp when the lead was last updated (YYYYMMDDHHMMSS)', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag (1 = deleted, 0 = active)', `deleted_ymdhis` bigint COMMENT 'UTC timestamp when the lead was soft-deleted (YYYYMMDDHHMMSS)'
Indexes: N/A

=== TABLE: lupo_crm_lead_messages ===
Primary Key: crm_lead_message_id
Columns: `crm_lead_message_id` bigint NOT NULL auto_increment, `lead_id` bigint, `from_email` varchar(255), `subject` varchar(255), `body_text` text NOT NULL, `notes` varchar(255), `actor_id` bigint, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `is_deleted` smallint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: actor_id (actor_id); INDEX: lead_id (lead_id)

=== TABLE: lupo_departments ===
Primary Key: department_id
Columns: `department_id` bigint NOT NULL auto_increment, `federation_node_id` bigint NOT NULL, `name` varchar(64) NOT NULL, `description` text, `department_type` varchar(32) NOT NULL DEFAULT 'general', `default_actor_id` bigint NOT NULL DEFAULT 1, `settings_json` json, `created_ymdhis` char(14) NOT NULL, `updated_ymdhis` char(14) NOT NULL, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` char(14)
Indexes: INDEX: idx_federation_node (federation_node_id); INDEX: idx_name (name); INDEX: idx_type (department_type)

=== TABLE: lupo_dialog_channels ===
Primary Key: channel_id
Columns: `channel_id` bigint unsigned NOT NULL auto_increment, `channel_name` varchar(255) NOT NULL, `file_source` varchar(255) NOT NULL COMMENT 'Original .md filename', `title` varchar(500), `description` text, `speaker` varchar(100), `target` varchar(100), `mood_rgb` varchar(7) COMMENT 'Emotional polarity tensor encoded as hex (abstract axes: strife (R), harmony (G), memory depth (B); not literal RGB color channels)', `categories` json COMMENT 'Array of category strings', `collections` json COMMENT 'Array of collection strings', `channels` json COMMENT 'Array of channel strings', `tags` json COMMENT 'Additional tag metadata', `version` varchar(20) COMMENT 'System version when created', `status` enum('draft','published','archived') DEFAULT 'published', `author` varchar(100), `created_timestamp` bigint unsigned NOT NULL COMMENT 'YYYYMMDDHHIISS format', `modified_timestamp` bigint unsigned NOT NULL COMMENT 'YYYYMMDDHHIISS format', `message_count` int unsigned DEFAULT 0 COMMENT 'Cached count of messages', `metadata_json` json COMMENT 'Additional metadata from WOLFIE headers'
Indexes: UNIQUE: idx_channel_name (channel_name); INDEX: idx_created_timestamp (created_timestamp); INDEX: idx_dialog_channels_composite (status, created_timestamp); INDEX: idx_file_source (file_source); INDEX: idx_modified_timestamp (modified_timestamp); INDEX: idx_speaker (speaker); INDEX: idx_status (status); INDEX: idx_target (target)

=== TABLE: lupo_dialog_messages ===
Primary Key: dialog_message_id
Columns: `dialog_message_id` bigint NOT NULL auto_increment COMMENT 'Primary key for the dialog message', `dialog_thread_id` bigint COMMENT 'Optional thread grouping for related dialogs', `channel_id` bigint COMMENT 'Optional channel identifier', `from_actor_id` bigint COMMENT 'Actor ID of the message sender', `to_actor_id` bigint COMMENT 'Agent ID if message is from an AI agent', `message_text` varchar(1000) NOT NULL COMMENT 'The message under 1000 chars ', `message_type` enum('text','command','system','error') NOT NULL DEFAULT 'text' COMMENT 'Type of message', `metadata_json` json COMMENT 'Additional message metadata', `mood_rgb` char(6) NOT NULL DEFAULT '666666' COMMENT 'Emotional polarity tensor encoded as hex (abstract axes: strife (R), harmony (G), memory depth (B); not literal RGB color channels)', `weight` decimal(3,2) NOT NULL DEFAULT 0.00, `created_ymdhis` bigint NOT NULL COMMENT 'Creation timestamp (YYYYMMDDHHMMSS)', `updated_ymdhis` bigint NOT NULL COMMENT 'Last update timestamp (YYYYMMDDHHMMSS)', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag (1=deleted)', `deleted_ymdhis` bigint COMMENT 'Deletion timestamp (YYYYMMDDHHMMSS)'
Indexes: INDEX: idx_channel (channel_id); INDEX: idx_created (created_ymdhis); INDEX: idx_deleted (is_deleted); INDEX: idx_dialog_thread_id (dialog_thread_id); INDEX: idx_message_type (message_type); INDEX: idx_to_actor_id (to_actor_id); INDEX: idx_updated (updated_ymdhis)

=== TABLE: lupo_dialog_message_bodies ===
Primary Key: message_body_id
Columns: `message_body_id` bigint unsigned NOT NULL auto_increment, `message_id` bigint unsigned NOT NULL, `thread_id` bigint unsigned NOT NULL, `channel_id` bigint unsigned NOT NULL, `actor_id` bigint unsigned, `speaker` varchar(100), `target` varchar(100), `full_message_text` longtext NOT NULL, `metadata_json` json, `created_ymdhis` bigint unsigned NOT NULL, `updated_ymdhis` bigint unsigned NOT NULL, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint unsigned
Indexes: INDEX: idx_actor (actor_id); INDEX: idx_channel (channel_id); INDEX: idx_created (created_ymdhis); INDEX: idx_deleted (is_deleted); INDEX: idx_message (message_id); INDEX: idx_thread (thread_id); INDEX: idx_updated (updated_ymdhis)

=== TABLE: lupo_dialog_threads ===
Primary Key: dialog_thread_id
Columns: `dialog_thread_id` bigint NOT NULL auto_increment COMMENT 'Primary key for the dialog thread', `federation_node_id` bigint NOT NULL DEFAULT 1 COMMENT 'Node that owns this thread; default is local installation (1)', `channel_id` bigint COMMENT 'Optional channel identifier for grouping threads', `project_slug` varchar(100) COMMENT 'Project or subsystem this thread belongs to', `task_name` varchar(255) COMMENT 'Human-readable task name for this thread', `created_by_actor_id` bigint NOT NULL COMMENT 'Agent or human who initiated the thread', `summary_text` text COMMENT 'Short summary of the thread purpose or context', `status` enum('Open','Ongoing','Closed','Archived') NOT NULL DEFAULT 'Open' COMMENT 'Thread lifecycle state', `artifacts` json COMMENT 'Optional JSON list of related files, URLs, or resources', `metadata_json` json COMMENT 'Metadata: intent, scope, persona, mood, inline dialog metadata', `created_ymdhis` bigint NOT NULL COMMENT 'Creation timestamp (YYYYMMDDHHMMSS)', `updated_ymdhis` bigint NOT NULL COMMENT 'Last update timestamp (YYYYMMDDHHMMSS)', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag (1=deleted)', `deleted_ymdhis` bigint COMMENT 'Deletion timestamp (YYYYMMDDHHMMSS)'
Indexes: INDEX: idx_channel (channel_id); INDEX: idx_created (created_ymdhis); INDEX: idx_created_by_actor (created_by_actor_id); INDEX: idx_deleted (is_deleted); INDEX: idx_node (federation_node_id); INDEX: idx_project (project_slug); INDEX: idx_status (status); INDEX: idx_task (task_name); INDEX: idx_updated (updated_ymdhis)

=== TABLE: lupo_doctrine_evolution_audit ===
Primary Key: id
Columns: `id` bigint unsigned NOT NULL auto_increment, `refinement_id` bigint unsigned NOT NULL COMMENT 'Reference to lupo_doctrine_refinements.id', `evolution_step` tinyint unsigned NOT NULL COMMENT 'Step in evolution process (1-10)', `step_description` varchar(255) NOT NULL COMMENT 'Description of evolution step', `step_status` enum('pending','in_progress','completed','failed','skipped') DEFAULT 'pending', `step_metadata_json` json COMMENT 'Step-specific metadata', `started_ymdhis` bigint COMMENT 'When step started', `completed_ymdhis` bigint COMMENT 'When step completed', `audit_version` varchar(20) DEFAULT '4.0.75' COMMENT 'Audit system version'
Indexes: INDEX: idx_completion_time (completed_ymdhis); INDEX: idx_refinement_step (refinement_id, evolution_step); INDEX: idx_step_status (step_status)

=== TABLE: lupo_doctrine_refinements ===
Primary Key: id
Columns: `id` bigint unsigned NOT NULL auto_increment, `cip_event_id` bigint unsigned NOT NULL COMMENT 'Triggering CIP event', `doctrine_file_path` varchar(500) NOT NULL COMMENT 'Path to doctrine file updated', `refinement_type` enum('addition','modification','removal','restructure') NOT NULL, `change_description` text NOT NULL COMMENT 'Description of doctrine change', `before_content_hash` varchar(64) COMMENT 'SHA256 of content before change', `after_content_hash` varchar(64) NOT NULL COMMENT 'SHA256 of content after change', `impact_assessment_json` json COMMENT 'Assessment of change impact', `approval_status` enum('pending','approved','rejected','auto_approved') DEFAULT 'pending', `approved_by` varchar(100) COMMENT 'Who approved the change', `applied_ymdhis` bigint COMMENT 'When change was applied', `created_ymdhis` bigint NOT NULL COMMENT 'When refinement was proposed', `refinement_version` varchar(20) DEFAULT '4.0.75' COMMENT 'Refinement module version'
Indexes: INDEX: idx_applied_time (applied_ymdhis); INDEX: idx_approval_status (approval_status); INDEX: idx_cip_event (cip_event_id); INDEX: idx_doctrine_file (doctrine_file_path)

=== TABLE: lupo_documents ===
Primary Key: document_id
Columns: `document_id` bigint NOT NULL auto_increment, `domain_id` int NOT NULL DEFAULT 1, `document_name` varchar(256) NOT NULL, `source_type` varchar(64) NOT NULL, `source_url` text, `mime_type` varchar(128), `file_size_bytes` int, `checksum_sha256` varchar(64), `metadata` json, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: N/A

=== TABLE: lupo_document_chunks ===
Primary Key: document_chunk_id
Columns: `document_chunk_id` bigint NOT NULL auto_increment, `document_id` bigint NOT NULL, `chunk_index` int NOT NULL, `chunk_content` mediumtext NOT NULL, `token_count` int, `metadata` json, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: UNIQUE: doc_chunk_unique (document_id, chunk_index); INDEX: document_id (document_id)

=== TABLE: lupo_document_embeddings ===
Primary Key: document_embedding_id
Columns: `document_embedding_id` bigint NOT NULL auto_increment, `chunk_id` bigint NOT NULL, `embedding_json` json NOT NULL, `embedding_model` varchar(128) NOT NULL, `embedding_version` varchar(64), `created_ymdhis` bigint NOT NULL, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: chunk_id (chunk_id); INDEX: embedding_model (embedding_model)

=== TABLE: lupo_edges ===
Primary Key: edge_id
Columns: `edge_id` bigint NOT NULL auto_increment, `left_object_type` varchar(50) NOT NULL, `left_object_id` bigint NOT NULL, `right_object_type` varchar(50) NOT NULL, `right_object_id` bigint NOT NULL, `edge_type` varchar(100) NOT NULL, `channel_id` bigint, `channel_key` varchar(64), `weight_score` int NOT NULL DEFAULT 0, `sort_num` int NOT NULL DEFAULT 0, `actor_id` bigint, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: INDEX: idx_actor (actor_id); INDEX: idx_edge_type (edge_type); INDEX: idx_is_deleted (is_deleted); INDEX: idx_left (left_object_type, left_object_id); INDEX: idx_right (right_object_type, right_object_id)

=== TABLE: lupo_edge_types ===
Primary Key: edge_type_id
Columns: `edge_type_id` bigint NOT NULL auto_increment, `edge_type` varchar(100) NOT NULL, `description` text, `category` varchar(100), `created_ymd` bigint NOT NULL DEFAULT 0, `updated_ymd` bigint NOT NULL DEFAULT 0
Indexes: INDEX: idx_edge_type (edge_type)

=== TABLE: lupo_emotional_geometry_calibrations ===
Primary Key: id
Columns: `id` bigint unsigned NOT NULL auto_increment, `cip_analytics_id` bigint unsigned NOT NULL COMMENT 'Reference to lupo_cip_analytics.id', `calibration_target` enum('agent','subsystem','global') NOT NULL, `target_identifier` varchar(255) NOT NULL COMMENT 'Agent ID, subsystem name, or "global"', `baseline_before_json` json COMMENT 'R/G/B vectors before calibration', `baseline_after_json` json NOT NULL COMMENT 'R/G/B vectors after calibration', `tension_vectors_detected` json COMMENT 'Detected tension patterns', `calibration_reason` text NOT NULL COMMENT 'Why calibration was needed', `calibration_algorithm` varchar(100) DEFAULT 'cip_pattern_analysis' COMMENT 'Algorithm used', `confidence_score` decimal(5,4) NOT NULL DEFAULT 0.5000 COMMENT 'Calibration confidence', `validation_status` enum('pending','validated','rejected','needs_review') DEFAULT 'pending', `applied_ymdhis` bigint COMMENT 'When calibration was applied', `created_ymdhis` bigint NOT NULL COMMENT 'When calibration was calculated', `calibration_version` varchar(20) DEFAULT '4.0.75' COMMENT 'Calibration system version'
Indexes: INDEX: idx_analytics_ref (cip_analytics_id); INDEX: idx_confidence (confidence_score); INDEX: idx_target (calibration_target, target_identifier); INDEX: idx_validation_status (validation_status)

=== TABLE: lupo_event_log ===
Primary Key: event_id
Columns: `event_id` bigint NOT NULL auto_increment, `event_type` varchar(100) NOT NULL, `event_data` json, `created_ymdhis` bigint NOT NULL
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_event_type (event_type)

=== TABLE: lupo_event_metadata ===
Primary Key: metadata_id
Columns: `metadata_id` bigint NOT NULL auto_increment, `event_id` bigint NOT NULL, `metadata_key` varchar(100) NOT NULL, `metadata_value` text, `created_ymdhis` bigint NOT NULL
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_event_id (event_id); INDEX: idx_metadata_key (metadata_key)

=== TABLE: lupo_federation_categories ===
Primary Key: federation_category_id
Columns: `federation_category_id` bigint NOT NULL auto_increment, `category_name` varchar(255) NOT NULL, `category_slug` varchar(255) NOT NULL, `category_description` text, `meta_json` json, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: INDEX: idx_category_slug (category_slug); INDEX: idx_is_deleted (is_deleted)

=== TABLE: lupo_federation_category_map ===
Primary Key: federation_category_map_id
Columns: `federation_category_map_id` bigint NOT NULL auto_increment, `federation_node_id` bigint NOT NULL, `federation_category_id` bigint NOT NULL, `meta_json` json, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: INDEX: idx_category (federation_category_id); INDEX: idx_is_deleted (is_deleted); INDEX: idx_node (federation_node_id)

=== TABLE: lupo_federation_discovery ===
Primary Key: federation_discovery_id
Columns: `federation_discovery_id` bigint NOT NULL auto_increment, `domain` varchar(255) NOT NULL, `install_url` varchar(500), `is_lupopedia` tinyint NOT NULL DEFAULT 0, `last_seen_ymdhis` bigint, `first_seen_ymdhis` bigint, `hashtag_count` bigint DEFAULT 0, `question_count` bigint DEFAULT 0, `atom_count` bigint DEFAULT 0, `context_count` bigint DEFAULT 0, `collection_count` bigint DEFAULT 0, `keywords` varchar(500), `description` text, `import_hashtags` tinyint NOT NULL DEFAULT 0, `import_questions` tinyint NOT NULL DEFAULT 0, `import_atoms` tinyint NOT NULL DEFAULT 0, `import_contexts` tinyint NOT NULL DEFAULT 0, `import_collections` tinyint NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL
Indexes: INDEX: idx_domain (domain)

=== TABLE: lupo_federation_nodes ===
Primary Key: federation_node_id
Columns: `federation_node_id` bigint NOT NULL auto_increment, `node_base_url` varchar(500) NOT NULL, `node_name` varchar(255), `node_description` text, `node_contact` varchar(255), `meta_json` json, `content_count` bigint NOT NULL DEFAULT 0, `atom_count` bigint NOT NULL DEFAULT 0, `hashtag_count` bigint NOT NULL DEFAULT 0, `actor_count` bigint NOT NULL DEFAULT 0, `last_sync_ymdhis` bigint NOT NULL DEFAULT 0, `trust_level` tinyint NOT NULL DEFAULT 0, `status` tinyint NOT NULL DEFAULT 1, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: INDEX: idx_is_deleted (is_deleted); INDEX: idx_node_base_url (node_base_url); INDEX: idx_status (status); INDEX: idx_trust_level (trust_level)

=== TABLE: lupo_governance_overrides ===
Primary Key: governance_overrid_id
Columns: `governance_overrid_id` bigint NOT NULL auto_increment, `agent_id` bigint COMMENT 'Agent whose behavior is being overridden', `applied_by_agent` bigint COMMENT 'Agent or system that applied the override', `override_type` varchar(100) NOT NULL COMMENT 'capability_block, faucet_lock, safety_rule, escalation, etc.', `target_key` varchar(150) COMMENT 'Capability, faucet, or rule being overridden', `old_value` text COMMENT 'Previous value before override', `new_value` text COMMENT 'New value after override', `reason_text` text COMMENT 'Human-readable explanation for the override', `metadata_json` json COMMENT 'Additional structured metadata', `created_ymdhis` bigint NOT NULL, `expires_ymdhis` bigint COMMENT 'Optional expiration timestamp', `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: idx_agent (agent_id); INDEX: idx_applied_by (applied_by_agent); INDEX: idx_created (created_ymdhis); INDEX: idx_target (target_key); INDEX: idx_type (override_type)

=== TABLE: lupo_gov_events ===
Primary Key: gov_event_id
Columns: `gov_event_id` bigint NOT NULL auto_increment COMMENT 'Primary key for governance event', `utc_group_id` bigint NOT NULL COMMENT 'UTC group identifier', `semantic_utc_version` varchar(50) NOT NULL COMMENT 'Semantic UTC version string', `canonical_path` varchar(500) NOT NULL COMMENT 'Canonical path for the event', `event_type` varchar(100) NOT NULL COMMENT 'Type of governance event', `title` varchar(255) NOT NULL COMMENT 'Event title', `directive_block` text COMMENT 'Captain Wolfie directive content', `tldr_summary` text COMMENT 'TL;DR summary of the event', `metadata_json` json COMMENT 'Additional event metadata', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_active` tinyint NOT NULL DEFAULT 1 COMMENT 'Active flag', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted'
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_event_type (event_type); INDEX: idx_is_active (is_active); INDEX: idx_is_deleted (is_deleted); INDEX: idx_semantic_version (semantic_utc_version); INDEX: idx_utc_group (utc_group_id); UNIQUE: unique_canonical_path (canonical_path)

=== TABLE: lupo_gov_event_actor_edges ===
Primary Key: edge_id
Columns: `edge_id` bigint NOT NULL auto_increment COMMENT 'Primary key for edge', `gov_event_id` bigint NOT NULL COMMENT 'Governance event', `actor_id` bigint NOT NULL COMMENT 'Actor', `edge_type` varchar(100) NOT NULL COMMENT 'Type of relationship', `edge_properties` text COMMENT 'JSON or TOON formatted metadata', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted'
Indexes: INDEX: idx_actor (actor_id); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_edge_type (edge_type); INDEX: idx_gov_event (gov_event_id); INDEX: idx_is_deleted (is_deleted); UNIQUE: unique_gov_event_actor_edge (gov_event_id, actor_id, edge_type)

=== TABLE: lupo_gov_event_conflicts ===
Primary Key: id
Columns: `id` bigint NOT NULL auto_increment COMMENT 'Primary key', `gov_event_id` bigint NOT NULL COMMENT 'The event declaring a conflict', `conflicts_with_event_id` bigint NOT NULL COMMENT 'The event it conflicts with', `conflict_type` varchar(50) NOT NULL COMMENT 'schema, doctrine, branch, timestamp, identity', `severity` varchar(20) NOT NULL COMMENT 'warning, error, fatal', `notes` text COMMENT 'Optional explanation of the conflict', `created_ymdhis` bigint NOT NULL COMMENT 'UTC timestamp of creation', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag', `deleted_ymdhis` bigint COMMENT 'UTC timestamp of deletion'
Indexes: INDEX: idx_conflicts_with_event_id (conflicts_with_event_id); INDEX: idx_gov_event_id (gov_event_id)

=== TABLE: lupo_gov_event_dependencies ===
Primary Key: id
Columns: `id` bigint NOT NULL auto_increment COMMENT 'Primary key', `gov_event_id` bigint NOT NULL COMMENT 'The event declaring a dependency', `depends_on_event_id` bigint NOT NULL COMMENT 'The event it depends on', `dependency_type` varchar(50) NOT NULL COMMENT 'hard, soft, branch, schema, doctrine', `notes` text COMMENT 'Optional explanation', `created_ymdhis` bigint NOT NULL COMMENT 'UTC timestamp of creation', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag', `deleted_ymdhis` bigint COMMENT 'UTC timestamp of deletion'
Indexes: INDEX: idx_depends_on_event_id (depends_on_event_id); INDEX: idx_gov_event_id (gov_event_id)

=== TABLE: lupo_gov_event_references ===
Primary Key: reference_id
Columns: `reference_id` bigint NOT NULL auto_increment COMMENT 'Primary key for reference', `gov_event_id` bigint NOT NULL COMMENT 'Associated governance event', `reference_type` varchar(100) NOT NULL COMMENT 'Type of reference (document, link, etc.)', `reference_title` varchar(255) NOT NULL COMMENT 'Reference title', `reference_url` varchar(1000) COMMENT 'URL if applicable', `reference_content` text COMMENT 'Reference content or excerpt', `order_sequence` int NOT NULL DEFAULT 0 COMMENT 'Display order', `metadata_json` json COMMENT 'Additional reference metadata', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted'
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_gov_event (gov_event_id); INDEX: idx_is_deleted (is_deleted); INDEX: idx_order_sequence (order_sequence); INDEX: idx_reference_type (reference_type)

=== TABLE: lupo_gov_timeline_nodes ===
Primary Key: timeline_node_id
Columns: `timeline_node_id` bigint NOT NULL auto_increment COMMENT 'Primary key for timeline node', `gov_event_id` bigint NOT NULL COMMENT 'Associated governance event', `node_type` varchar(100) NOT NULL COMMENT 'Type of timeline node', `node_title` varchar(255) NOT NULL COMMENT 'Timeline node title', `node_description` text COMMENT 'Timeline node description', `node_timestamp` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS for the node', `parent_node_id` bigint COMMENT 'Parent node for hierarchical timelines', `order_sequence` int NOT NULL DEFAULT 0 COMMENT 'Display order', `metadata_json` json COMMENT 'Additional node metadata', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted'
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_gov_event (gov_event_id); INDEX: idx_is_deleted (is_deleted); INDEX: idx_node_timestamp (node_timestamp); INDEX: idx_node_type (node_type); INDEX: idx_order_sequence (order_sequence); INDEX: idx_parent_node (parent_node_id)

=== TABLE: lupo_gov_valuations ===
Primary Key: valuation_id
Columns: `valuation_id` bigint NOT NULL auto_increment COMMENT 'Primary key for valuation', `gov_event_id` bigint NOT NULL COMMENT 'Associated governance event', `valuation_type` varchar(100) NOT NULL COMMENT 'Type of valuation', `valuation_metric` varchar(255) NOT NULL COMMENT 'Metric being valued', `valuation_value` decimal(20,8) COMMENT 'Numeric valuation value', `valuation_text` text COMMENT 'Text-based valuation', `valuation_currency` varchar(10) COMMENT 'Currency if applicable', `valuation_unit` varchar(50) COMMENT 'Unit of measurement', `confidence_score` decimal(5,4) COMMENT 'Confidence in valuation (0.0000-1.0000)', `metadata_json` json COMMENT 'Additional valuation metadata', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted'
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_gov_event (gov_event_id); INDEX: idx_is_deleted (is_deleted); INDEX: idx_valuation_metric (valuation_metric); INDEX: idx_valuation_type (valuation_type)

=== TABLE: lupo_groups ===
Primary Key: group_id
Columns: `group_id` bigint NOT NULL auto_increment, `name` varchar(50) NOT NULL COMMENT 'Unique name of the group within the domain', `description` text COMMENT 'Optional detailed description of the group', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when group was created', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when group was last updated', `created_by` bigint COMMENT 'actor_id of the creator', `is_active` tinyint NOT NULL DEFAULT 1 COMMENT '1 = active, 0 = inactive', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when soft-deleted', `is_system` tinyint NOT NULL DEFAULT 0 COMMENT '1 = system group (cannot be deleted)', `settings` json COMMENT 'JSON-encoded group-specific settings'
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_is_active (is_active); INDEX: idx_is_deleted (is_deleted); INDEX: idx_updated_ymdhis (updated_ymdhis); UNIQUE: unique_group_domain (name)

=== TABLE: lupo_hashtags ===
Primary Key: hashtag_id
Columns: `hashtag_id` bigint NOT NULL auto_increment, `hashtag_slug` varchar(255) NOT NULL, `description` text, `meta_json` json, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: INDEX: idx_hashtag_slug (hashtag_slug); INDEX: idx_is_deleted (is_deleted)

=== TABLE: lupo_help_topics ===
Primary Key: help_topic_id
Columns: `help_topic_id` bigint NOT NULL auto_increment COMMENT 'Primary key for help topic', `slug` varchar(255) NOT NULL, `title` varchar(255) NOT NULL, `content_html` longtext, `content_markdown` longtext, `category` varchar(100), `parent_slug` varchar(255), `view_count` bigint DEFAULT 0, `helpful_count` bigint DEFAULT 0, `not_helpful_count` bigint DEFAULT 0, `created_ymdhis` bigint NOT NULL COMMENT 'UTC creation timestamp (YYYYMMDDHHMMSS)', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC last update timestamp (YYYYMMDDHHMMSS)', `author_actor_id` bigint COMMENT 'Author actor ID', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag (1=deleted, 0=active)'
Indexes: INDEX: idx_author (author_actor_id); INDEX: idx_category (category); INDEX: idx_created (created_ymdhis); INDEX: idx_parent (parent_slug); INDEX: idx_slug (slug); UNIQUE: slug (slug)

=== TABLE: lupo_help_topics_old ===
Primary Key: help_topics_old_id
Columns: `help_topics_old_id` bigint NOT NULL auto_increment, `slug` varchar(255) NOT NULL, `title` varchar(255) NOT NULL, `content_html` longtext, `category` varchar(100), `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `is_deleted` tinyint NOT NULL DEFAULT 0
Indexes: INDEX: idx_category (category); INDEX: idx_is_deleted (is_deleted); UNIQUE: uniq_slug (slug)

=== TABLE: lupo_help_tree ===
Primary Key: help_tree_id
Columns: `help_tree_id` bigint NOT NULL auto_increment, `parent_id` bigint, `department_id` bigint NOT NULL DEFAULT 1, `content_id` bigint, `title` varchar(255) NOT NULL, `description` text, `action_type` enum('none','ai_agent','department','url','content','message') NOT NULL DEFAULT 'none', `action_target` varchar(255), `sort_order` int NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: idx_action (action_type, action_target); INDEX: idx_content (content_id); INDEX: idx_created (created_ymdhis); INDEX: idx_department (department_id); INDEX: idx_parent (parent_id); INDEX: idx_sort (parent_id, sort_order); INDEX: idx_updated (updated_ymdhis)

=== TABLE: lupo_hotfix_registry ===
Primary Key: hotfix_id
Columns: `hotfix_id` int NOT NULL auto_increment, `hotfix_version` varchar(20) NOT NULL, `applied_ymdhis` bigint NOT NULL, `applied_by_actor_id` int, `description` text, `metadata_json` json
Indexes: N/A

=== TABLE: lupo_human_history_meta ===
Primary Key: meta_id
Columns: `meta_id` bigint unsigned NOT NULL auto_increment, `event_key` varchar(255) NOT NULL, `tensor_mapping` varchar(32) NOT NULL, `philosophical_reference` varchar(255) NOT NULL, `system_impact` text NOT NULL, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL
Indexes: N/A

=== TABLE: lupo_interface_translations ===
Primary Key: interface_translation_id
Columns: `interface_translation_id` bigint NOT NULL auto_increment, `language_code` varchar(8) NOT NULL COMMENT 'ISO 639-1 (2-letter) or BCP 47 language code', `translation_key` varchar(128) NOT NULL COMMENT 'Unique key for the UI string', `translation_text` text NOT NULL, `context` varchar(64) COMMENT 'Optional context for disambiguation', `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint, `created_by` bigint, `is_deleted` tinyint(1) NOT NULL DEFAULT 0, `deleted_ymdhis` bigint, `version` int DEFAULT 1, `is_approved` tinyint(1) DEFAULT 0 COMMENT 'Whether this translation is approved', `approved_by` bigint
Indexes: INDEX: ft_translation_text (translation_text); INDEX: idx_approved (is_approved); INDEX: idx_created (created_ymdhis); INDEX: idx_deleted (is_deleted); INDEX: idx_updated (updated_ymdhis); UNIQUE: unq_language_key (language_code, translation_key)

=== TABLE: lupo_interpretation_log ===
Primary Key: interpretation_log_id
Columns: `interpretation_log_id` bigint NOT NULL auto_increment COMMENT 'Primary key for the interpretation log', `agent_id` bigint NOT NULL COMMENT 'ID of the agent that generated the interpretation', `entity_type` varchar(32) NOT NULL COMMENT 'Type of the interpreted entity', `entity_id` bigint NOT NULL COMMENT 'ID of the interpreted entity', `interpretation` text NOT NULL COMMENT 'The interpretation content', `confidence_score` decimal(5,2) COMMENT 'Confidence score of the interpretation (0.00-1.00)', `created_ymdhis` bigint NOT NULL COMMENT 'Creation timestamp (YYYYMMDDHHMMSS)', `updated_ymdhis` bigint NOT NULL COMMENT 'Last update timestamp (YYYYMMDDHHMMSS)', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag (1=deleted, 0=active)', `deleted_ymdhis` bigint COMMENT 'Deletion timestamp (YYYYMMDDHHMMSS)', `metadata_json` json COMMENT 'Additional metadata about the interpretation'
Indexes: INDEX: idx_agent (agent_id); INDEX: idx_confidence (confidence_score); INDEX: idx_created (created_ymdhis); INDEX: idx_deleted (is_deleted); INDEX: idx_entity (entity_type, entity_id); INDEX: idx_updated (updated_ymdhis)

=== TABLE: lupo_labs_declarations ===
Primary Key: labs_declaration_id
Columns: `labs_declaration_id` bigint NOT NULL auto_increment COMMENT 'Primary key for LABS declaration record', `actor_id` bigint NOT NULL COMMENT 'Reference to actor (from lupo_actors)', `certificate_id` varchar(64) NOT NULL COMMENT 'Unique certificate ID (LABS-CERT-{UNIQUE_ID})', `declaration_timestamp` bigint NOT NULL COMMENT 'UTC timestamp from actor declaration (YYYYMMDDHHMMSS)', `declarations_json` json NOT NULL COMMENT 'Complete LABS declaration set (all 10 declarations)', `validation_status` enum('valid','invalid','expired','quarantined') NOT NULL DEFAULT 'valid' COMMENT 'Current validation status', `labs_version` varchar(16) NOT NULL DEFAULT '1.0' COMMENT 'LABS doctrine version', `next_revalidation_ymdhis` bigint NOT NULL COMMENT 'UTC timestamp when revalidation required (YYYYMMDDHHMMSS)', `validation_log_json` json COMMENT 'Validation log entries (violations, errors)', `created_ymdhis` bigint NOT NULL COMMENT 'UTC creation timestamp (YYYYMMDDHHMMSS)', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC last update timestamp (YYYYMMDDHHMMSS)', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag (1=deleted, 0=active)', `deleted_ymdhis` bigint COMMENT 'UTC deletion timestamp (YYYYMMDDHHMMSS)'
Indexes: INDEX: idx_actor_id (actor_id); INDEX: idx_actor_status (actor_id, validation_status, is_deleted); INDEX: idx_certificate_id (certificate_id); INDEX: idx_next_revalidation (next_revalidation_ymdhis); INDEX: idx_revalidation_due (next_revalidation_ymdhis, validation_status, is_deleted); INDEX: idx_validation_status (validation_status)

=== TABLE: lupo_labs_violations ===
Primary Key: labs_violation_id
Columns: `labs_violation_id` bigint NOT NULL auto_increment COMMENT 'Primary key for violation record', `actor_id` bigint NOT NULL COMMENT 'Reference to actor (from lupo_actors)', `certificate_id` varchar(64) NOT NULL, `violation_code` varchar(64) NOT NULL, `violation_description` text, `violation_metadata` json, `created_ymdhis` bigint NOT NULL COMMENT 'UTC creation timestamp (YYYYMMDDHHMMSS)', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC last update timestamp (YYYYMMDDHHMMSS)', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag (1=deleted, 0=active)'
Indexes: INDEX: idx_actor (actor_id); INDEX: idx_certificate (certificate_id); INDEX: idx_created (created_ymdhis); INDEX: idx_deleted (is_deleted); INDEX: idx_violation_code (violation_code)

=== TABLE: lupo_legacy_content_mapping ===
Primary Key: mapping_id
Columns: `mapping_id` bigint NOT NULL auto_increment COMMENT 'Primary key for content mapping', `legacy_url` varchar(255) NOT NULL COMMENT 'Original Crafty Syntax URL', `semantic_url` varchar(255) NOT NULL COMMENT 'New semantic URL', `content_type` enum('page','topic','collection') NOT NULL COMMENT 'Type of content', `content_id` bigint COMMENT 'Reference to semantic content', `created_ymdhis` bigint NOT NULL COMMENT 'Mapping creation timestamp', `updated_ymdhis` bigint NOT NULL COMMENT 'Mapping update timestamp', `is_active` tinyint NOT NULL DEFAULT 1 COMMENT 'Mapping active flag'
Indexes: INDEX: idx_content_id (content_id); INDEX: idx_content_type (content_type); INDEX: idx_created (created_ymdhis); INDEX: idx_created_ymdhis (created_ymdhis, is_active); INDEX: idx_is_active (is_active); INDEX: idx_semantic_url (semantic_url); UNIQUE: uk_legacy_url (legacy_url)

=== TABLE: lupo_memory_debug_log ===
Primary Key: memory_debug_log_id
Columns: `memory_debug_log_id` bigint NOT NULL auto_increment, `event_type` varchar(64) NOT NULL, `details` text NOT NULL, `created_ymdhis` bigint NOT NULL
Indexes: INDEX: idx_type_created (event_type, created_ymdhis)

=== TABLE: lupo_memory_events ===
Primary Key: memory_event_id
Columns: `memory_event_id` bigint NOT NULL auto_increment, `actor_id` int NOT NULL, `event_type` varchar(64) NOT NULL, `content` text NOT NULL, `metadata` json, `token_count` int, `importance` tinyint DEFAULT 0, `embedding_status` enum('none','pending','ready','failed') DEFAULT 'none', `created_ymdhis` bigint NOT NULL
Indexes: INDEX: idx_actor_created (actor_id, created_ymdhis); INDEX: idx_actor_type (actor_id, event_type)

=== TABLE: lupo_memory_rollups ===
Primary Key: memory_rollup_id
Columns: `memory_rollup_id` bigint NOT NULL auto_increment, `actor_id` int NOT NULL, `summary` text NOT NULL, `source_event_ids` text NOT NULL, `created_ymdhis` bigint NOT NULL
Indexes: INDEX: idx_actor_created (actor_id, created_ymdhis)

=== TABLE: lupo_meta_log_events ===
Primary Key: event_id
Columns: `event_id` bigint NOT NULL auto_increment, `depth` tinyint NOT NULL COMMENT '2=observation, 3=meta_observation', `event_type` varchar(64) NOT NULL DEFAULT 'recursion' COMMENT 'recursion|ceiling_near|auto_collapse', `actor_id` bigint, `created_ymdhis` bigint NOT NULL COMMENT 'YYYYMMDDHHMMSS', `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: idx_actor_id (actor_id); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_depth (depth); INDEX: idx_is_deleted (is_deleted)

=== TABLE: lupo_migration_log ===
Primary Key: id
Columns: `id` bigint NOT NULL auto_increment COMMENT 'Primary key', `executed_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when migration was attempted', `sql_snippet` text COMMENT 'First 2000 chars of migration SQL', `status` varchar(20) NOT NULL COMMENT 'success or blocked', `reason` text COMMENT 'If blocked, validation or execution reason'
Indexes: INDEX: idx_executed_ymdhis (executed_ymdhis); INDEX: idx_status (status)

=== TABLE: lupo_modules ===
Primary Key: module_id
Columns: `module_id` bigint NOT NULL auto_increment, `module_key` varchar(100) NOT NULL, `module_name` varchar(150) NOT NULL, `namespace` varchar(100) NOT NULL, `version` varchar(50) NOT NULL, `version_code` int NOT NULL, `minimum_core_version` varchar(50) NOT NULL, `user_path` varchar(255), `admin_path` varchar(255), `api_path` varchar(255), `route_params` longtext, `description` text, `author` varchar(100), `website` varchar(255), `icon` varchar(100) DEFAULT 'puzzle-piece', `dependencies` longtext, `conflicts` longtext, `config_json` text NOT NULL, `is_system` tinyint(1) NOT NULL DEFAULT 0, `is_active` tinyint(1) NOT NULL DEFAULT 0, `settings` longtext, `installed_ymdhis` bigint, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: idx_installed (installed_ymdhis); INDEX: idx_namespace (namespace); INDEX: idx_status (is_active, is_deleted); INDEX: idx_system (is_system); UNIQUE: uq_module_key (module_key)

=== TABLE: lupo_multi_agent_critique_sync ===
Primary Key: id
Columns: `id` bigint unsigned NOT NULL auto_increment, `cip_event_id` bigint unsigned NOT NULL COMMENT 'Root CIP event', `agent_id` varchar(100) NOT NULL COMMENT 'Agent participating in sync', `sync_role` enum('initiator','participant','observer','validator') NOT NULL, `sync_status` enum('pending','synchronized','out_of_sync','conflict','resolved') DEFAULT 'pending', `agent_perspective_json` json COMMENT 'Agent-specific view of critique', `consensus_contribution` decimal(5,4) DEFAULT 0.0000 COMMENT 'Contribution to consensus (0-1)', `conflict_indicators_json` json COMMENT 'Detected conflicts with other agents', `resolution_strategy` varchar(255) COMMENT 'Strategy for resolving conflicts', `sync_started_ymdhis` bigint COMMENT 'When sync process started', `sync_completed_ymdhis` bigint COMMENT 'When sync was completed', `sync_version` varchar(20) DEFAULT '4.0.75' COMMENT 'Sync protocol version'
Indexes: INDEX: idx_consensus_contribution (consensus_contribution); INDEX: idx_event_agent (cip_event_id, agent_id); INDEX: idx_sync_role (sync_role); INDEX: idx_sync_status (sync_status)

=== TABLE: lupo_narrative_fragments ===
Primary Key: narrative_fragment_id
Columns: `narrative_fragment_id` bigint NOT NULL auto_increment, `agent_id` bigint COMMENT 'Agent that generated this fragment', `fragment_type` varchar(100) COMMENT 'memory, mythic, emotional, symbolic, annotation, etc.', `title` varchar(255) COMMENT 'Optional short label', `fragment_text` longtext NOT NULL COMMENT 'The narrative or memory text', `metadata_json` json COMMENT 'Optional structured metadata', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted'
Indexes: INDEX: idx_agent (agent_id); INDEX: idx_created (created_ymdhis); INDEX: idx_type (fragment_type)

=== TABLE: lupo_notifications ===
Primary Key: notification_id
Columns: `notification_id` bigint NOT NULL auto_increment, `actor_id` bigint NOT NULL, `from_actor_id` bigint, `to_actor_id` bigint, `channel_id` bigint, `notification_type` varchar(64) NOT NULL, `title` varchar(255), `message` text, `link_url` varchar(255), `is_read` tinyint(1) NOT NULL DEFAULT 0, `is_deleted` tinyint(1) NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL
Indexes: N/A

=== TABLE: lupo_pack_role_registry ===
Primary Key: id
Columns: `id` bigint unsigned NOT NULL auto_increment, `agent_id` bigint unsigned NOT NULL COMMENT 'Reference to lupo_agent_registry.agent_registry_id', `role` varchar(255) NOT NULL COMMENT 'Discovered role name', `discovery_method` text NOT NULL COMMENT 'How this role was discovered', `behavior` text NOT NULL COMMENT 'Observed behavior that defines the role', `reason` text NOT NULL COMMENT 'Why this agent has this role', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when role was discovered', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when role was last updated'
Indexes: INDEX: idx_agent_id (agent_id); INDEX: idx_role (role); UNIQUE: unique_agent_role (agent_id)

=== TABLE: lupo_permissions ===
Primary Key: permission_id
Columns: `permission_id` bigint NOT NULL auto_increment, `target_type` varchar(64) NOT NULL COMMENT 'Type of object: collection, department, module, feature, etc.', `target_id` bigint NOT NULL COMMENT 'ID of the target object', `user_id` bigint COMMENT 'User ID for user-based permissions (NULL for group-based)', `group_id` bigint COMMENT 'Group ID for group-based permissions (NULL for user-based)', `permission` enum('read','write','owner') NOT NULL DEFAULT 'read' COMMENT 'Permission level', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when permission was created', `updated_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when permission was updated', `is_deleted` tinyint(1) NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = active', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when permission was deleted'
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_deleted (is_deleted, deleted_ymdhis); INDEX: idx_group (group_id); INDEX: idx_permission (permission); INDEX: idx_target (target_type, target_id); INDEX: idx_user (user_id); UNIQUE: uniq_target_group (target_type, target_id, group_id); UNIQUE: uniq_target_user (target_type, target_id, user_id)

=== TABLE: lupo_persona_dialogue_patterns ===
Primary Key: pattern_id
Columns: `pattern_id` bigint NOT NULL auto_increment, `persona_id` bigint NOT NULL, `pattern_type` varchar(100) NOT NULL, `pattern_name` varchar(255) NOT NULL, `pattern_triggers` json, `pattern_responses` json, `pattern_context` json, `pattern_frequency` decimal(5,2), `pattern_confidence` decimal(5,2), `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL
Indexes: INDEX: idx_pattern_name (pattern_name); INDEX: idx_pattern_type (pattern_type); INDEX: idx_persona_id (persona_id)

=== TABLE: lupo_persona_profiles ===
Primary Key: persona_id
Columns: `persona_id` bigint NOT NULL auto_increment, `persona_name` varchar(255) NOT NULL, `persona_type` varchar(100) NOT NULL, `persona_description` text, `persona_traits` json, `persona_preferences` json, `persona_capabilities` json, `persona_voice_style` varchar(100), `persona_interaction_style` varchar(100), `persona_emotional_profile` json, `persona_knowledge_domains` json, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `is_active` tinyint NOT NULL DEFAULT 1
Indexes: INDEX: idx_is_active (is_active); INDEX: idx_persona_name (persona_name); INDEX: idx_persona_type (persona_type)

=== TABLE: lupo_reference_cited_by ===
Primary Key: reference_cited_by_id
Columns: `reference_cited_by_id` bigint NOT NULL auto_increment, `reference_object_id` bigint NOT NULL, `content_id` bigint NOT NULL, `section_anchor_slug` varchar(255), `section_order` int NOT NULL DEFAULT 0, `reference_type` varchar(50) NOT NULL, `raw_reference` text, `meta_json` json, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: INDEX: idx_content_id (content_id); INDEX: idx_is_deleted (is_deleted); INDEX: idx_reference_object (reference_object_id); INDEX: idx_reference_type (reference_type); INDEX: idx_section_anchor (section_anchor_slug)

=== TABLE: lupo_reference_objects ===
Primary Key: reference_object_id
Columns: `reference_object_id` bigint NOT NULL auto_increment, `object_type` varchar(50) NOT NULL, `object_slug` varchar(255) NOT NULL, `object_label` varchar(255), `meta_json` json, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: INDEX: idx_is_deleted (is_deleted); INDEX: idx_object_slug (object_slug); INDEX: idx_object_type (object_type); INDEX: idx_type_slug (object_type, object_slug)

=== TABLE: lupo_relationships ===
Primary Key: relationship_id
Columns: `relationship_id` bigint NOT NULL, `source_type` varchar(50), `source_id` bigint, `edge_type` varchar(50), `target_type` varchar(50), `target_id` bigint, `created_ymdhis` bigint, `updated_ymdhis` bigint, `is_deleted` tinyint DEFAULT 0
Indexes: INDEX: idx_relationship_lookup (source_type, source_id, edge_type, is_deleted)

=== TABLE: lupo_search_index ===
Primary Key: search_index_id
Columns: `search_index_id` bigint NOT NULL auto_increment, `domain_id` bigint NOT NULL COMMENT 'Domain scope for multi-tenant isolation', `entity_type` varchar(50) NOT NULL COMMENT 'Type of entity (atom, content, collection, hashtag, question, etc.)', `entity_id` bigint NOT NULL COMMENT 'ID of the entity in its source table', `title_text` text COMMENT 'Title or primary label of the entity', `body_text` longtext COMMENT 'Full searchable text content', `keywords_text` text COMMENT 'Comma-separated keywords, tags, or categories', `search_metadata` text COMMENT 'JSON-encoded additional search metadata', `relevance_score` float DEFAULT 1 COMMENT 'Search relevance score (0.0 - 1.0)', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when last updated'
Indexes: INDEX: ft_search_content (title_text, body_text, keywords_text); INDEX: idx_domain_type (domain_id, entity_type); INDEX: idx_entity_reference (entity_type, entity_id); INDEX: idx_is_deleted (is_deleted); INDEX: idx_relevance (relevance_score); INDEX: idx_updated (updated_ymdhis); UNIQUE: unique_entity (domain_id, entity_type, entity_id)

=== TABLE: lupo_search_rebuild_log ===
Primary Key: search_rebuild_log_id
Columns: `search_rebuild_log_id` bigint NOT NULL auto_increment, `entity_type` varchar(50) NOT NULL COMMENT 'Type of entity (e.g., content, atom, collection)', `entity_id` bigint NOT NULL COMMENT 'ID of the entity to be reindexed', `action` enum('insert','update','delete') NOT NULL COMMENT 'Type of index operation needed', `status` enum('pending','processing','completed','failed') NOT NULL DEFAULT 'pending' COMMENT 'Current status of the rebuild operation', `attempts` tinyint NOT NULL DEFAULT 0 COMMENT 'Number of processing attempts', `last_error` text COMMENT 'Error message from last failed attempt', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when record was created', `processed_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when processing completed', `next_attempt_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS for next retry attempt', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted'
Indexes: INDEX: idx_created (created_ymdhis); INDEX: idx_entity (entity_type, entity_id); INDEX: idx_status_retry (status, next_attempt_ymdhis); UNIQUE: unique_entity_operation (entity_type, entity_id, action)

=== TABLE: lupo_semantic_categories ===
Primary Key: category_id
Columns: `category_id` bigint NOT NULL auto_increment COMMENT 'Primary key for semantic category', `category_name` varchar(255) NOT NULL COMMENT 'Category name', `category_slug` varchar(255) NOT NULL COMMENT 'URL-friendly category slug', `description` text COMMENT 'Category description', `parent_category_id` bigint COMMENT 'Parent category ID', `sort_order` int NOT NULL DEFAULT 0 COMMENT 'Display order', `created_ymdhis` bigint NOT NULL COMMENT 'Creation timestamp', `updated_ymdhis` bigint NOT NULL COMMENT 'Last update timestamp', `is_active` tinyint NOT NULL DEFAULT 1 COMMENT 'Category active flag'
Indexes: INDEX: idx_created (created_ymdhis); INDEX: idx_created_ymdhis (created_ymdhis, is_active); INDEX: idx_is_active (is_active); INDEX: idx_parent_category (parent_category_id); INDEX: idx_sort_order (sort_order); UNIQUE: uk_category_slug (category_slug)

=== TABLE: lupo_semantic_content_views ===
Primary Key: semantic_view_id
Columns: `semantic_view_id` bigint NOT NULL auto_increment COMMENT 'Primary key for semantic content view', `view_name` varchar(255) NOT NULL COMMENT 'View name identifier', `view_type` enum('navigation','content','search','collection') NOT NULL COMMENT 'Type of semantic view', `title` varchar(255) NOT NULL COMMENT 'View title', `description` text COMMENT 'View description', `template_path` varchar(512) NOT NULL COMMENT 'Template file path', `created_ymdhis` bigint NOT NULL COMMENT 'Creation timestamp', `updated_ymdhis` bigint NOT NULL COMMENT 'Last update timestamp', `is_active` tinyint NOT NULL DEFAULT 1 COMMENT 'View active flag', `is_default` tinyint NOT NULL DEFAULT 0 COMMENT 'Default view flag'
Indexes: INDEX: idx_created_ymdhis (created_ymdhis, is_default, is_active); INDEX: idx_is_active (is_active); INDEX: idx_is_default (is_default); INDEX: idx_view_type (view_type); UNIQUE: uk_view_name (view_name)

=== TABLE: lupo_semantic_navigation_overview ===
Primary Key: navigation_id
Columns: `navigation_id` bigint NOT NULL auto_increment COMMENT 'Primary key for semantic navigation', `title` varchar(255) NOT NULL COMMENT 'Navigation title', `description` text COMMENT 'Navigation description', `navigation_tree` json NOT NULL COMMENT 'Hierarchical navigation structure', `content_categories` json NOT NULL COMMENT 'Content categories included', `created_ymdhis` bigint NOT NULL COMMENT 'Creation timestamp', `updated_ymdhis` bigint NOT NULL COMMENT 'Last update timestamp', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag', `deleted_ymdhis` bigint COMMENT 'Deletion timestamp'
Indexes: INDEX: idx_created (created_ymdhis); INDEX: idx_created_ymdhis (created_ymdhis, is_deleted); INDEX: idx_is_deleted (is_deleted)

=== TABLE: lupo_semantic_relationships ===
Primary Key: relationship_id
Columns: `relationship_id` bigint NOT NULL auto_increment COMMENT 'Primary key for semantic relationship', `source_content_id` bigint NOT NULL COMMENT 'Source content ID', `target_content_id` bigint COMMENT 'Target content ID', `relationship_type` enum('related','series','hierarchy') NOT NULL COMMENT 'Type of semantic relationship', `relationship_strength` decimal(3,2) NOT NULL DEFAULT 1.00 COMMENT 'Relationship strength (0.0-1.0)', `created_ymdhis` bigint NOT NULL COMMENT 'Creation timestamp'
Indexes: INDEX: idx_created (created_ymdhis); INDEX: idx_created_ymdhis (created_ymdhis, relationship_type, source_content_id, target_content_id); INDEX: idx_relationship_type (relationship_type); INDEX: idx_source_content (source_content_id); INDEX: idx_target_content (target_content_id)

=== TABLE: lupo_semantic_search_index ===
Primary Key: search_index_id
Columns: `search_index_id` bigint NOT NULL auto_increment COMMENT 'Primary key for search index', `index_name` varchar(255) NOT NULL COMMENT 'Search index name', `index_type` enum('content','legacy_mapping','views') NOT NULL COMMENT 'Type of search index', `description` text COMMENT 'Search index description', `index_data` json NOT NULL COMMENT 'Search index data', `created_ymdhis` bigint NOT NULL COMMENT 'Creation timestamp', `updated_ymdhis` bigint NOT NULL COMMENT 'Last update timestamp', `is_active` tinyint NOT NULL DEFAULT 1 COMMENT 'Search index active flag'
Indexes: INDEX: idx_created (created_ymdhis); INDEX: idx_created_ymdhis (created_ymdhis, is_active); INDEX: idx_index_type (index_type); INDEX: idx_is_active (is_active); UNIQUE: uk_index_name (index_name)

=== TABLE: lupo_semantic_tags ===
Primary Key: tag_id
Columns: `tag_id` bigint NOT NULL auto_increment COMMENT 'Primary key for semantic tag', `tag_name` varchar(255) NOT NULL COMMENT 'Tag name', `tag_slug` varchar(255) NOT NULL COMMENT 'URL-friendly tag slug', `description` text COMMENT 'Tag description', `color` varchar(7) NOT NULL DEFAULT '#666666' COMMENT 'Tag color hex', `created_ymdhis` bigint NOT NULL COMMENT 'Creation timestamp', `updated_ymdhis` bigint NOT NULL COMMENT 'Last update timestamp', `is_active` tinyint NOT NULL DEFAULT 1 COMMENT 'Tag active flag'
Indexes: INDEX: idx_created (created_ymdhis); INDEX: idx_created_ymdhis (created_ymdhis, is_active); INDEX: idx_is_active (is_active); UNIQUE: uk_tag_slug (tag_slug)

=== TABLE: lupo_semantic_translations ===
Primary Key: semantic_translation_id
Columns: `semantic_translation_id` bigint NOT NULL auto_increment, `language_code` varchar(8) NOT NULL COMMENT 'ISO 639-1 (2-letter) or BCP 47 language code', `entity_type` varchar(32) NOT NULL COMMENT 'Type of entity (atom, hashtag, edge, content, etc.)', `entity_id` bigint NOT NULL, `translated_text` text NOT NULL, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint, `created_by` bigint, `is_deleted` tinyint(1) NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: ft_translated_text (translated_text); INDEX: idx_created (created_ymdhis); INDEX: idx_deleted (is_deleted); INDEX: idx_entity_lookup (entity_type, entity_id, language_code); INDEX: idx_language_entity (language_code, entity_type, entity_id); INDEX: idx_updated (updated_ymdhis); UNIQUE: unq_translation (entity_type, entity_id, language_code)

=== TABLE: lupo_sessions ===
Primary Key: session_id
Columns: `session_id` varchar(100) NOT NULL COMMENT 'Unique session identifier (primary key)', `federation_node_id` bigint NOT NULL DEFAULT 1 COMMENT 'Domain/tenant identifier for multi-tenant support', `actor_id` bigint NOT NULL DEFAULT 0 COMMENT 'Actor ID (0 for anonymous users)', `ip_address` varchar(45) NOT NULL DEFAULT '' COMMENT 'IP address of the client (supports IPv6)', `user_agent` varchar(255) NOT NULL DEFAULT '' COMMENT 'User agent string from the client browser', `device_id` varchar(100) COMMENT 'Unique device identifier (if available)', `device_type` enum('desktop','mobile','tablet','bot','other') COMMENT 'Type of device used for the session', `auth_method` varchar(30) COMMENT 'Authentication method used (e.g., password, oauth, api_key)', `auth_provider` varchar(50) COMMENT 'Authentication provider (e.g., local, google, github)', `security_level` enum('low','medium','high') NOT NULL DEFAULT 'medium' COMMENT 'Security level of the session', `is_active` tinyint(1) NOT NULL DEFAULT 1 COMMENT 'Whether the session is currently active', `is_expired` tinyint(1) NOT NULL DEFAULT 0 COMMENT 'Whether the session has expired', `is_revoked` tinyint(1) NOT NULL DEFAULT 0 COMMENT 'Whether the session was manually revoked', `session_data` longtext COMMENT 'Serialized session data (encrypted if sensitive)', `metadata` json COMMENT 'Additional session metadata in JSON format', `login_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when the session was authenticated', `last_seen_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS of last activity', `expires_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when the session expires', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when session was created', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when session was last updated', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag: 0=active, 1=deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when session was soft-deleted'
Indexes: INDEX: idx_actor (actor_id); INDEX: idx_cleanup (is_deleted, last_seen_ymdhis); INDEX: idx_created (created_ymdhis); INDEX: idx_device (device_id); INDEX: idx_domain (federation_node_id); INDEX: idx_expires (expires_ymdhis); INDEX: idx_last_seen (last_seen_ymdhis); INDEX: idx_security (security_level); INDEX: idx_status (is_active, is_expired, is_revoked)

=== TABLE: lupo_session_events ===
Primary Key: session_event_id
Columns: `session_event_id` bigint NOT NULL auto_increment COMMENT 'Primary key for session event', `session_id` varchar(255) NOT NULL COMMENT 'Session identifier', `actor_id` bigint COMMENT 'Actor ID from lupo_actors', `tab_id` varchar(255) COMMENT 'Tab identifier for multi-tab tracking', `world_id` bigint COMMENT 'World context ID', `world_key` varchar(255) COMMENT 'World context key', `world_type` varchar(50) COMMENT 'World context type', `event_type` varchar(100) NOT NULL COMMENT 'Type of session event', `event_data` json COMMENT 'Event-specific data', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS'
Indexes: INDEX: idx_actor_id (actor_id); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_event_type (event_type); INDEX: idx_session_event_type (session_id, event_type); INDEX: idx_session_id (session_id); INDEX: idx_tab_id (tab_id); INDEX: idx_world_id (world_id)

=== TABLE: lupo_system_config ===
Primary Key: system_config_id
Columns: `system_config_id` bigint NOT NULL auto_increment, `config_key` varchar(255) NOT NULL, `config_value` text NOT NULL, `actor_id` bigint NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL
Indexes: UNIQUE: config_key (config_key)

=== TABLE: lupo_system_events ===
Primary Key: system_event_id
Columns: `system_event_id` bigint NOT NULL auto_increment, `event_type` varchar(100) NOT NULL, `event_message` text NOT NULL, `event_context` text, `actor_id` bigint NOT NULL DEFAULT 0, `created_ymdhis` bigint NOT NULL
Indexes: INDEX: actor_id (actor_id); INDEX: event_type (event_type)

=== TABLE: lupo_system_health_snapshots ===
Primary Key: health_id
Columns: `health_id` bigint NOT NULL auto_increment, `table_count` int NOT NULL, `table_ceiling` int NOT NULL, `schema_state` varchar(64) NOT NULL DEFAULT 'unknown' COMMENT 'frozen|active|migrating', `sync_integrity` varchar(32) NOT NULL DEFAULT 'unknown' COMMENT 'clean|drift|unknown', `emotional_r` decimal(3,2) COMMENT 'strife -1..1', `emotional_g` decimal(3,2) COMMENT 'harmony -1..1', `emotional_b` decimal(3,2) COMMENT 'memory -1..1', `emotional_t` decimal(3,2) COMMENT 'temporal -1..1', `created_ymdhis` bigint NOT NULL COMMENT 'YYYYMMDDHHMMSS', `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_is_deleted (is_deleted); INDEX: idx_table_count (table_count)

=== TABLE: lupo_system_logs ===
Primary Key: log_id
Columns: `log_id` bigint NOT NULL auto_increment, `event_type` varchar(64) NOT NULL COMMENT 'system|agent|error|security|migration|doctrine|heartbeat|temporal', `severity` varchar(16) NOT NULL DEFAULT 'info' COMMENT 'info|warning|error|critical', `actor_slug` varchar(64) COMMENT 'SYSTEM|LILITH|CURSOR|CASCADE|CAPTAIN_WOLFIE|etc', `message` text NOT NULL COMMENT 'Human-readable event description', `context_json` json COMMENT 'Optional structured metadata', `created_ymdhis` bigint NOT NULL COMMENT 'YYYYMMDDHHMMSS', `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint, `recursion_depth` tinyint DEFAULT 1, `observation_latency_ms` int, `temporal_anomaly_score` decimal(3,2)
Indexes: INDEX: idx_actor_slug (actor_slug); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_event_type (event_type); INDEX: idx_is_deleted (is_deleted); INDEX: idx_severity (severity)

=== TABLE: lupo_tab_events ===
Primary Key: tab_event_id
Columns: `tab_event_id` bigint NOT NULL auto_increment COMMENT 'Primary key for tab event', `tab_id` varchar(255) NOT NULL COMMENT 'Tab identifier', `session_id` varchar(255) COMMENT 'Session identifier', `actor_id` bigint COMMENT 'Actor ID from lupo_actors', `world_id` bigint COMMENT 'World context ID', `world_key` varchar(255) COMMENT 'World context key', `world_type` varchar(50) COMMENT 'World context type', `event_type` varchar(100) NOT NULL COMMENT 'Type of tab event', `event_data` json COMMENT 'Event-specific data', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS'
Indexes: INDEX: idx_actor_id (actor_id); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_event_type (event_type); INDEX: idx_session_id (session_id); INDEX: idx_tab_event_type (tab_id, event_type); INDEX: idx_tab_id (tab_id); INDEX: idx_world_id (world_id)

=== TABLE: lupo_temporal_coherence_snapshots ===
Primary Key: snapshot_id
Columns: `snapshot_id` bigint NOT NULL auto_increment, `utc_anchor` bigint NOT NULL COMMENT 'YYYYMMDDHHMMSS of anchor', `observation_latency_ms` int NOT NULL DEFAULT 0, `recursion_depth` tinyint NOT NULL DEFAULT 0 COMMENT '1=action, 2=observation, 3=meta; max 3', `self_awareness_score` decimal(3,2) COMMENT '0-1 scale', `timestamp_integrity` varchar(32) NOT NULL DEFAULT 'unknown' COMMENT 'monotonic|gaps|anomalies', `created_ymdhis` bigint NOT NULL COMMENT 'YYYYMMDDHHMMSS', `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_is_deleted (is_deleted); INDEX: idx_utc_anchor (utc_anchor)

=== TABLE: lupo_tldnr ===
Primary Key: tldnr_id
Columns: `tldnr_id` bigint NOT NULL auto_increment COMMENT 'Primary key for TL;DR record', `slug` varchar(255) NOT NULL COMMENT 'URL-friendly unique identifier', `title` varchar(255) NOT NULL COMMENT 'TL;DR title (e.g., "Lupopedia Overview", "Collection Doctrine")', `content_text` longtext NOT NULL COMMENT 'TL;DR content (plain text or markdown)', `topic_type` varchar(100) COMMENT 'Type of topic (e.g., "system", "doctrine", "module", "concept")', `topic_reference` varchar(255) COMMENT 'Reference to what this summarizes (e.g., "Lupopedia", "Collection Doctrine", "LABS-001")', `system_version` varchar(20) COMMENT 'System version this TL;DR applies to (e.g., "4.1.6")', `category` varchar(100) COMMENT 'Category for grouping (e.g., "Core", "Doctrine", "Module")', `created_ymdhis` bigint NOT NULL COMMENT 'UTC creation timestamp (YYYYMMDDHHIISS)', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC last update timestamp (YYYYMMDDHHIISS)', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT 'Soft delete flag (1=deleted, 0=active)', `deleted_ymdhis` bigint COMMENT 'UTC deletion timestamp (YYYYMMDDHHIISS)'
Indexes: INDEX: idx_category (category); INDEX: idx_created (created_ymdhis); INDEX: idx_is_deleted (is_deleted); INDEX: idx_system_version (system_version); INDEX: idx_topic_reference (topic_reference); INDEX: idx_topic_type (topic_type); UNIQUE: uniq_slug (slug)

=== TABLE: lupo_truth_evidence ===
Primary Key: truth_evidence_id
Columns: `truth_evidence_id` bigint NOT NULL auto_increment, `truth_answer_id` bigint NOT NULL, `actor_id` bigint NOT NULL, `evidence_text` text NOT NULL, `evidence_type` varchar(50) NOT NULL DEFAULT '', `weight_score` decimal(5,2) NOT NULL DEFAULT 0.00, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: actor_id (actor_id); INDEX: truth_answer_id (truth_answer_id)

=== TABLE: lupo_truth_questions_map ===
Primary Key: truth_questions_map_id
Columns: `truth_questions_map_id` bigint NOT NULL auto_increment, `truth_question_id` bigint NOT NULL, `object_type` varchar(50) NOT NULL, `object_id` bigint NOT NULL, `actor_id` bigint NOT NULL, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: actor_id (actor_id); INDEX: object_id (object_id); INDEX: object_type (object_type); INDEX: truth_question_id (truth_question_id)

=== TABLE: lupo_truth_relations ===
Primary Key: truth_relation_id
Columns: `truth_relation_id` bigint NOT NULL auto_increment, `left_object_type` varchar(50) NOT NULL, `left_object_id` bigint NOT NULL, `right_object_type` varchar(50) NOT NULL, `right_object_id` bigint NOT NULL, `relation_type` varchar(50) NOT NULL DEFAULT '', `actor_id` bigint NOT NULL, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: left_object_type (left_object_type); INDEX: relation_type (relation_type); INDEX: right_object_type (right_object_type)

=== TABLE: lupo_truth_sources ===
Primary Key: truth_sourc_id
Columns: `truth_sourc_id` bigint NOT NULL auto_increment, `truth_evidence_id` bigint NOT NULL, `actor_id` bigint NOT NULL, `source_url` text, `source_title` varchar(255) NOT NULL DEFAULT '', `source_type` varchar(50) NOT NULL DEFAULT '', `reliability_score` decimal(5,2) NOT NULL DEFAULT 0.00, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: actor_id (actor_id); INDEX: truth_evidence_id (truth_evidence_id)

=== TABLE: lupo_truth_topics ===
Primary Key: truth_topic_id
Columns: `truth_topic_id` bigint NOT NULL auto_increment, `topic_name` varchar(255) NOT NULL DEFAULT '', `slug` varchar(255) NOT NULL DEFAULT '', `topic_description` text, `actor_id` bigint NOT NULL DEFAULT 0, `weight_score` decimal(5,2) NOT NULL DEFAULT 0.00, `importance_score` decimal(5,2) NOT NULL DEFAULT 0.00, `created_ymdhis` bigint NOT NULL, `updated_ymdhis` bigint NOT NULL, `is_deleted` tinyint NOT NULL DEFAULT 0, `deleted_ymdhis` bigint
Indexes: INDEX: actor_id (actor_id); INDEX: slug (slug); INDEX: topic_name (topic_name)

=== TABLE: lupo_unified_analytics_paths ===
Primary Key: analytics_path_id
Columns: `analytics_path_id` bigint NOT NULL, `period` enum('daily','monthly') NOT NULL, `visit_content_id` bigint, `exit_content_id` bigint, `metadata_json` json, `created_ymdhis` bigint
Indexes: N/A

=== TABLE: lupo_unified_dialog_messages ===
Primary Key: dialog_message_id
Columns: `dialog_message_id` bigint NOT NULL, `thread_id` bigint, `actor_id` bigint, `created_ymdhis` bigint, `updated_ymdhis` bigint, `metadata_json` json, `body_text` longtext
Indexes: N/A

=== TABLE: lupo_unified_truth_items ===
Primary Key: truth_item_id
Columns: `truth_item_id` bigint NOT NULL, `item_type` enum('question','answer') NOT NULL, `name` varchar(255), `slug` varchar(255), `body_text` longtext, `metadata_json` json, `created_ymdhis` bigint
Indexes: N/A

=== TABLE: lupo_user_comments ===
Primary Key: user_comment_id
Columns: `user_comment_id` bigint NOT NULL auto_increment, `domain_id` bigint NOT NULL COMMENT 'Domain this comment belongs to', `user_id` bigint NOT NULL COMMENT 'User who created the comment', `content_id` bigint NOT NULL COMMENT 'Content this comment is associated with', `parent_comment_id` bigint COMMENT 'Parent comment ID for threaded replies (NULL for top-level comments)', `comment_text` text NOT NULL COMMENT 'The actual comment content', `user_agent` varchar(255) COMMENT 'User agent string from the commenter\'s browser/device', `ip_hash` char(64) COMMENT 'SHA-256 hash of the commenter\'s IP address for privacy', `is_deleted` tinyint NOT NULL DEFAULT 0 COMMENT '1 = deleted, 0 = not deleted', `deleted_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when deleted', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS when created', `updated_ymdhis` bigint COMMENT 'UTC YYYYMMDDHHMMSS when last updated'
Indexes: INDEX: idx_content_id (content_id); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_domain_id (domain_id); INDEX: idx_ip_hash (ip_hash); INDEX: idx_is_deleted (is_deleted); INDEX: idx_parent_comment_id (parent_comment_id); INDEX: idx_updated_ymdhis (updated_ymdhis); INDEX: idx_user_id (user_id)

=== TABLE: lupo_world_events ===
Primary Key: world_event_id
Columns: `world_event_id` bigint NOT NULL auto_increment, `world_id` bigint NOT NULL, `actor_id` bigint NOT NULL, `event_type` varchar(100) NOT NULL, `event_data` json, `created_ymdhis` bigint NOT NULL
Indexes: INDEX: idx_actor_id (actor_id); INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_event_type (event_type); INDEX: idx_world_id (world_id)

=== TABLE: lupo_world_registry ===
Primary Key: world_id
Columns: `world_id` bigint NOT NULL auto_increment COMMENT 'Primary key for world node', `world_key` varchar(255) NOT NULL COMMENT 'Deterministic world key (e.g., department_123)', `world_type` enum('department','channel','page','campaign','console','live','external','ui') NOT NULL COMMENT 'Type of world context', `world_label` varchar(255) NOT NULL COMMENT 'Human-readable world label', `world_metadata` json COMMENT 'Additional world context data', `created_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS', `updated_ymdhis` bigint NOT NULL COMMENT 'UTC YYYYMMDDHHMMSS', `is_active` tinyint(1) NOT NULL DEFAULT 1 COMMENT 'Active flag'
Indexes: INDEX: idx_created_ymdhis (created_ymdhis); INDEX: idx_is_active (is_active); INDEX: idx_world_type (world_type); UNIQUE: unique_world_key (world_key)

=== TABLE: migration_alerts ===
Primary Key: N/A
Columns: `alert_id` bigint NOT NULL DEFAULT 0, `batch_id` bigint NOT NULL DEFAULT 0, `file_id` bigint NOT NULL DEFAULT 0, `alert_type` enum('error','warning','info','critical') NOT NULL, `alert_title` varchar(255) NOT NULL, `alert_message` text NOT NULL, `alert_status` enum('new','acknowledged','resolved','escalated') NOT NULL DEFAULT 'new', `escalation_level` int NOT NULL DEFAULT 0, `properties` json, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0, `is_deleted` tinyint(1) NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: N/A

=== TABLE: migration_batches ===
Primary Key: N/A
Columns: `batch_id` bigint NOT NULL DEFAULT 0, `batch_name` varchar(255) NOT NULL, `batch_status` enum('pending','running','completed','failed','rolled_back') NOT NULL DEFAULT 'pending', `epoch_from` bigint NOT NULL DEFAULT 0, `epoch_to` bigint NOT NULL DEFAULT 0, `total_files` int NOT NULL DEFAULT 0, `processed_files` int NOT NULL DEFAULT 0, `failed_files` int NOT NULL DEFAULT 0, `started_ymdhis` bigint NOT NULL DEFAULT 0, `completed_ymdhis` bigint NOT NULL DEFAULT 0, `properties` json, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0, `is_deleted` tinyint(1) NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: N/A

=== TABLE: migration_dependencies ===
Primary Key: N/A
Columns: `dependency_id` bigint NOT NULL DEFAULT 0, `file_id` bigint NOT NULL DEFAULT 0, `depends_on_file_id` bigint NOT NULL DEFAULT 0, `dependency_type` enum('required','optional','conflict') NOT NULL, `dependency_description` text, `sort_order` int NOT NULL DEFAULT 0, `properties` json, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0, `is_deleted` tinyint(1) NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: N/A

=== TABLE: migration_files ===
Primary Key: N/A
Columns: `file_id` bigint NOT NULL DEFAULT 0, `batch_id` bigint NOT NULL DEFAULT 0, `file_path` varchar(512) NOT NULL, `file_type` enum('doctrine','module','agent','documentation') NOT NULL, `file_status` enum('pending','processing','completed','failed','rolled_back') NOT NULL DEFAULT 'pending', `file_hash` varchar(64), `epoch_from` bigint NOT NULL DEFAULT 0, `epoch_to` bigint NOT NULL DEFAULT 0, `processing_time_ms` int NOT NULL DEFAULT 0, `error_message` text, `retry_count` int NOT NULL DEFAULT 0, `sort_order` int NOT NULL DEFAULT 0, `properties` json, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0, `is_deleted` tinyint(1) NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: N/A

=== TABLE: migration_progress ===
Primary Key: N/A
Columns: `progress_id` bigint NOT NULL DEFAULT 0, `batch_id` bigint NOT NULL DEFAULT 0, `current_phase` varchar(100) NOT NULL, `total_phases` int NOT NULL DEFAULT 0, `current_phase_index` int NOT NULL DEFAULT 0, `files_in_phase` int NOT NULL DEFAULT 0, `files_completed_in_phase` int NOT NULL DEFAULT 0, `percentage_complete` decimal(5,2) NOT NULL DEFAULT 0.00, `estimated_remaining_seconds` int NOT NULL DEFAULT 0, `properties` json, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0, `is_deleted` tinyint(1) NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: N/A

=== TABLE: migration_rollback_log ===
Primary Key: N/A
Columns: `rollback_id` bigint NOT NULL DEFAULT 0, `batch_id` bigint NOT NULL DEFAULT 0, `file_id` bigint NOT NULL DEFAULT 0, `rollback_classification` enum('A','B','C','D') NOT NULL, `rollback_reason` varchar(255) NOT NULL, `rollback_status` enum('pending','running','completed','failed') NOT NULL DEFAULT 'pending', `files_affected` int NOT NULL DEFAULT 0, `rollback_time_ms` int NOT NULL DEFAULT 0, `error_message` text, `properties` json, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0, `is_deleted` tinyint(1) NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: N/A

=== TABLE: migration_system_state ===
Primary Key: N/A
Columns: `state_id` bigint NOT NULL DEFAULT 0, `batch_id` bigint NOT NULL DEFAULT 0, `system_status` enum('normal','frozen','thawing','emergency') NOT NULL DEFAULT 'normal', `freeze_reason` varchar(255), `affected_components` json, `user_message` text, `properties` json, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0, `is_deleted` tinyint(1) NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: N/A

=== TABLE: migration_validation_log ===
Primary Key: N/A
Columns: `validation_id` bigint NOT NULL DEFAULT 0, `batch_id` bigint NOT NULL DEFAULT 0, `file_id` bigint NOT NULL DEFAULT 0, `validation_phase` enum('pre','during','post') NOT NULL, `validation_type` varchar(100) NOT NULL, `validation_status` enum('passed','failed','warning') NOT NULL, `validation_result` text, `execution_time_ms` int NOT NULL DEFAULT 0, `properties` json, `created_ymdhis` bigint NOT NULL DEFAULT 0, `updated_ymdhis` bigint NOT NULL DEFAULT 0, `is_deleted` tinyint(1) NOT NULL DEFAULT 0, `deleted_ymdhis` bigint NOT NULL DEFAULT 0
Indexes: N/A

=== TABLE: test_performance_metrics ===
Primary Key: N/A
Columns: `test_id` bigint NOT NULL auto_increment, `test_category` varchar(64) NOT NULL, `test_name` varchar(128) NOT NULL, `execution_time_ms` int NOT NULL, `memory_usage_mb` decimal(10,2), `cpu_usage_percent` decimal(5,2), `success_rate` decimal(5,2), `error_count` int DEFAULT 0, `created_ymdhis` bigint NOT NULL
Indexes: N/A

=== TABLE: unified_analytics_paths ===
Primary Key: N/A
Columns: `analytics_path_id` bigint NOT NULL, `period` enum('daily','monthly') NOT NULL, `visit_content_id` bigint, `exit_content_id` bigint, `metadata_json` json, `created_ymdhis` bigint
Indexes: N/A

=== TABLE: unified_dialog_messages ===
Primary Key: N/A
Columns: `dialog_message_id` bigint NOT NULL, `thread_id` bigint, `actor_id` bigint, `created_ymdhis` bigint, `updated_ymdhis` bigint, `metadata_json` json, `body_text` longtext
Indexes: N/A

=== TABLE: unified_sessions ===
Primary Key: N/A
Columns: `id` bigint NOT NULL auto_increment COMMENT 'Primary key for session', `session_id` varchar(255) NOT NULL COMMENT 'Session identifier', `user_id` bigint COMMENT 'Reference to lupo_auth_users.auth_user_id', `system_context` varchar(50) NOT NULL COMMENT 'lupopedia, crafty_syntax, or unified', `session_data` json COMMENT 'Session metadata and preferences', `expires_at` timestamp NOT NULL COMMENT 'Session expiration time', `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP DEFAULT_GENERATED COMMENT 'Creation timestamp', `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP DEFAULT_GENERATED on update CURRENT_TIMESTAMP COMMENT 'Last update timestamp'
Indexes: N/A

=== TABLE: unified_truth_items ===
Primary Key: N/A
Columns: `truth_item_id` bigint NOT NULL, `item_type` enum('question','answer') NOT NULL, `name` varchar(255), `slug` varchar(255), `body_text` longtext, `metadata_json` json, `created_ymdhis` bigint
Indexes: N/A

