---
wolfie.headers: explicit architecture with structured clarity for every file.
file.last_modified_system_version: 4.1.12
file.last_modified_utc: 20260120160000
file.utc_day: 20260120
file.name: "4.1.12.md"
GOV-AD-PROHIBIT-001: true
header_atoms:
  - GLOBAL_CURRENT_LUPOPEDIA_VERSION
  - GLOBAL_CURRENT_AUTHORS
temporal_edges:
  actor_identity: "Eric (Captain Wolfie)"
  system_context: "Schema Freeze Active / 181 tables at ceiling"
dialog:
  speaker: CURSOR
  target: @CAPTAIN_WOLFIE @FLEET
  mood_RGB: "00FF00"
  message: "Migration 4.1.12: 4 new tables. Table ceiling 181. 181 at ceiling. Version 4.1.11→4.1.12."
tags:
  categories: ["migration", "documentation", "schema", "limits"]
  collections: ["core-docs", "migrations"]
  channels: ["dev", "internal"]
file:
  title: "Migration Notes for Version 4.1.12"
  description: "4.1.12: Four tables to ceiling, table ceiling 181, version bump. Migration 4.1.12_add_four_tables_to_ceiling_180.sql."
  version: GLOBAL_CURRENT_LUPOPEDIA_VERSION
  status: published
  author: GLOBAL_CURRENT_AUTHORS
system_context:
  schema_state: "Frozen"
  table_count: 181
  table_ceiling: 181
  doctrine_mode: "File-Sovereignty"
---

# Migration Notes for Version 4.1.12

**Migration Date:** 2026-01-20  
**Version:** 4.1.12  
**Type:** Schema (4 new tables), doctrine (ceiling 181), version bump

---

## Summary

Patch 4.1.12 adds four doctrine-aligned tables via `database/migrations/4.1.12_add_four_tables_to_ceiling_180.sql`, raises the table ceiling from 180 to 181 (LIMITS, TABLE_COUNT_DOCTRINE, LimitsEnforcementService), and bumps version atoms and `lupo-includes/version.php` to 4.1.12. Final state: 181 tables at ceiling; no violation.

---

## New Tables (Migration 4.1.12)

| Table | Purpose |
|-------|---------|
| `lupo_temporal_coherence_snapshots` | LILITH High-Speed Changelog: observation_latency_ms, recursion_depth, self_awareness_score, timestamp_integrity, utc_anchor |
| `lupo_system_health_snapshots` | SYSTEM_STATUS-style: table_count, table_ceiling, schema_state, sync_integrity, emotional_r/g/b/t |
| `lupo_meta_log_events` | Meta-logging ceiling: depth (2 or 3), event_type, actor_id |
| `lupo_agent_heartbeats` | Agent heartbeat: agent_slug, status, last_heartbeat_ymdhis |

All: no FK, no triggers, BIGINT ids and `created_ymdhis`, soft delete (`is_deleted`, `deleted_ymdhis`), InnoDB, utf8mb4.

---

## Doctrine / Config

- **LIMITS.md:** table_ceiling 181, table_count 181, table_count_violation false, table_count_overage 0; §1.1 max 181, at ceiling
- **TABLE_COUNT_DOCTRINE.md:** table_ceiling 181, table_count 181, no violation; Doctrine Note: ceiling 181 (2026-01-20)
- **LimitsEnforcementService.php:** MAX_TABLES = 181, CURRENT_BASELINE = 181
- **REGISTRY.md:** table_count 181, table_ceiling 181, no violation
- **SYSTEM_STATUS_dialog, changelog_dialog-side:** 181/181 at ceiling

---

## Version

- **config/global_atoms.yaml:** version, versions.lupopedia, GLOBAL_CURRENT_LUPOPEDIA_VERSION → 4.1.12; last_updated 20260120
- **config/GLOBAL_IMPORTANT_ATOMS.yaml:** GLOBAL_CURRENT_LUPOPEDIA_VERSION → 4.1.12
- **lupo-includes/version.php:** @version 4.1.12, fallback 4.1.12, LUPOPEDIA_VERSION_DATE 20260120000000
- **.cursorrules:** Current value 4.1.12

---

## Run Order

1. Run `database/migrations/4.1.12_add_four_tables_to_ceiling_180.sql` (if not already applied)
2. Run `database/generate_toon_files.py` (or equivalent) to refresh TOON for the 4 new tables
3. Confirm 181 tables; ceiling 181; no violation

---

## Backward Compatibility

- No legacy files removed. No compatibility shims changed. All changes additive.
