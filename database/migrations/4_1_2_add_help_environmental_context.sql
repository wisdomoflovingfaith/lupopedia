-- Migration: Add HELP and Environmental Context help topics
-- Version: 4.1.2
-- Date: 2026-01-19
-- Module: Help System
-- Purpose: Add clear definitions for Lupopedia HELP and Environmental Context

-- Insert or update help topics (UPSERT - safe to run multiple times)
-- Each topic is a separate INSERT statement for better SQL compatibility

-- Topic 1: What is Lupopedia HELP?
INSERT INTO `lupo_help_topics` (`slug`, `title`, `content_html`, `category`, `created_ymdhis`, `updated_ymdhis`, `is_deleted`) VALUES
('what-is-help', 'What is Lupopedia HELP?', '<h1 id="what-is-help">What is Lupopedia HELP?</h1>\n\n<p><strong>Lupopedia HELP is the documentation surface of Lupopedia.</strong></p>\n\n<h2 id="what-help-is">What HELP Is</h2>\n<p>The HELP module is:</p>\n<ul>\n  <li><strong>A read-only interface</strong> that displays human-authored doctrine, guides, and topics</li>\n  <li><strong>Stored in <code>lupo_help_topics</code></strong> database table</li>\n  <li><strong>Rendered through <code>/help/&lt;slug&gt;</code></strong> URLs</li>\n  <li><strong>Indexed through <code>/list/help</code></strong> for browsing</li>\n</ul>\n\n<p><strong>Think of it as: "The library where actors go to understand the system."</strong></p>\n\n<h2 id="what-help-is-not">What HELP Is Not</h2>\n<p>HELP is <strong>not</strong>:</p>\n<ul>\n  <li>A governance engine</li>\n  <li>A validator</li>\n  <li>A schema</li>\n  <li>A runtime module</li>\n  <li>A place where enforcement happens</li>\n</ul>\n\n<h2 id="help-characteristics">HELP Characteristics</h2>\n<ul>\n  <li><strong>No enforcement</strong> - HELP does not enforce rules</li>\n  <li><strong>No logic</strong> - HELP does not execute code</li>\n  <li><strong>No state transitions</strong> - HELP does not change system state</li>\n  <li><strong>Just documentation</strong> - HELP is simply the knowledge layer</li>\n</ul>\n\n<h2 id="help-structure">HELP Structure</h2>\n<p>Each help topic has:</p>\n<ul>\n  <li>A unique <code>slug</code> (URL identifier)</li>\n  <li>A <code>title</code> (display name)</li>\n  <li><code>content_html</code> (the documentation content)</li>\n  <li>A <code>category</code> (for organization)</li>\n</ul>\n\n<h2 id="accessing-help">Accessing HELP</h2>\n<p>HELP topics are accessible at:</p>\n<ul>\n  <li><code>/help</code> - Help index (all topics)</li>\n  <li><code>/help/{slug}</code> - Specific topic (e.g., <code>/help/what-is-help</code>)</li>\n  <li><code>/list/help</code> - Browse all help topics</li>\n</ul>\n\n<h2 id="related-topics">Related Topics</h2>\n<ul>\n  <li>See <a href="/help/using-help">Using the Help System</a> for navigation</li>\n  <li>Read <a href="/help/environmental-context">What is Environmental Context?</a> for boundary definitions</li>\n  <li>Visit <a href="/list/help">/list/help</a> to see all help topics</li>\n</ul>', 'Core', 20260119030000, 20260119030000, 0)
ON DUPLICATE KEY UPDATE
    `title` = VALUES(`title`),
    `content_html` = VALUES(`content_html`),
    `category` = VALUES(`category`),
    `updated_ymdhis` = VALUES(`updated_ymdhis`);

-- Topic 2: What is Environmental Context?
INSERT INTO `lupo_help_topics` (`slug`, `title`, `content_html`, `category`, `created_ymdhis`, `updated_ymdhis`, `is_deleted`) VALUES
('environmental-context', 'What is Environmental Context?', '<h1 id="environmental-context">What is Environmental Context?</h1>\n\n<p><strong>Environmental Context is anything happening outside Lupopedia that Lupopedia cannot control.</strong></p>\n\n<h2 id="what-environmental-context-is">What Environmental Context Is</h2>\n<p>Environmental Context includes:</p>\n<ul>\n  <li><strong>Anything happening outside Lupopedia</strong> - External to the system</li>\n  <li><strong>Anything your ears, eyes, or senses pick up</strong> - Real-world sensory input</li>\n  <li><strong>Anything your computer plays that Lupopedia didn\'t generate</strong> - External audio/video</li>\n  <li><strong>Anything in the real world</strong> - Physical environment</li>\n  <li><strong>Anything Lupopedia cannot control</strong> - External services and streams</li>\n</ul>\n\n<h2 id="examples">Examples of Environmental Context</h2>\n<ul>\n  <li><strong>Pandora ads</strong> - Audio advertisements in external music streams</li>\n  <li><strong>K-LOVE radio</strong> - External radio broadcasts</li>\n  <li><strong>YouTube pre-rolls</strong> - Video advertisements before content</li>\n  <li><strong>Real-world billboards</strong> - Physical advertising in your environment</li>\n  <li><strong>Notifications from other apps</strong> - System notifications from external applications</li>\n  <li><strong>Background noise</strong> - Environmental sounds</li>\n  <li><strong>Physical environment</strong> - Your real-world surroundings</li>\n</ul>\n\n<h2 id="what-environmental-context-is-not">What Environmental Context Is Not</h2>\n<p>Environmental Context is <strong>not</strong>:</p>\n<ul>\n  <li>Lupopedia content</li>\n  <li>A violation of GOV-AD-PROHIBIT-001</li>\n  <li>Something that needs to be logged as a violation</li>\n  <li>Governed by Lupopedia\'s anti-advertising law</li>\n</ul>\n\n<p><strong>Environmental Context is simply acknowledged.</strong></p>\n\n<h2 id="the-boundary">The Boundary</h2>\n<p>The rule is simple:</p>\n<ul>\n  <li><strong>If Lupopedia didn\'t generate it</strong> → It\'s environmental context</li>\n  <li><strong>If Lupopedia did generate it</strong> → It must be ad-free</li>\n</ul>\n\n<p>This boundary ensures:</p>\n<ul>\n  <li><strong>System integrity</strong> - Lupopedia output remains 100% ad-free</li>\n  <li><strong>Realistic governance</strong> - The system acknowledges the external world</li>\n  <li><strong>Clear enforcement</strong> - The boundary is semantically precise</li>\n</ul>\n\n<h2 id="governance-relationship">Relationship to GOV-AD-PROHIBIT-001</h2>\n<p>GOV-AD-PROHIBIT-001 (Anti-Advertising Law) governs:</p>\n<ul>\n  <li><strong>Lupopedia UI</strong> - Must be ad-free</li>\n  <li><strong>System output</strong> - Must be ad-free</li>\n  <li><strong>Agent responses</strong> - Must be ad-free</li>\n  <li><strong>Module output</strong> - Must be ad-free</li>\n</ul>\n\n<p>GOV-AD-PROHIBIT-001 does <strong>not</strong> govern:</p>\n<ul>\n  <li>Environmental context (external world)</li>\n  <li>Things Lupopedia cannot control</li>\n  <li>External audio/video streams</li>\n</ul>\n\n<h2 id="why-this-matters">Why This Matters</h2>\n<p>The distinction between environmental context and system integrity is essential because:</p>\n<ul>\n  <li><strong>It\'s enforceable</strong> - Clear boundary between external and internal</li>\n  <li><strong>It\'s realistic</strong> - Acknowledges the external world without compromising system integrity</li>\n  <li><strong>It prevents confusion</strong> - Clear rule: if Lupopedia didn\'t generate it, it\'s environmental context</li>\n</ul>\n\n<h2 id="related-topics">Related Topics</h2>\n<ul>\n  <li>Read <a href="/help/governance">GOV-AD-PROHIBIT-001</a> for the Anti-Advertising Law</li>\n  <li>See <a href="/help/what-is-help">What is Lupopedia HELP?</a> for documentation system</li>\n  <li>Visit <a href="/docs/doctrine/GOV_AD_PROHIBIT_001.md">GOV-AD-PROHIBIT-001 Doctrine</a> for complete governance artifact</li>\n</ul>', 'Core', 20260119030000, 20260119030000, 0)
ON DUPLICATE KEY UPDATE
    `title` = VALUES(`title`),
    `content_html` = VALUES(`content_html`),
    `category` = VALUES(`category`),
    `updated_ymdhis` = VALUES(`updated_ymdhis`);

-- Topic 3: What is the Temporal Pillar?
INSERT INTO `lupo_help_topics` (`slug`, `title`, `content_html`, `category`, `created_ymdhis`, `updated_ymdhis`, `is_deleted`) VALUES
('temporal-pillar', 'What is the Temporal Pillar?', '<h1 id="temporal-pillar">What is the Temporal Pillar?</h1>\n\n<p><strong>The Temporal Pillar is one of the Five Pillars of Lupopedia. It states: "Time is the Spine."</strong></p>\n\n<h2 id="what-temporal-means">What Temporal Means</h2>\n<p>The Temporal Pillar ensures that:</p>\n<ul>\n  <li><strong>All events have canonical UTC</strong> - Every event must have a timestamp in UTC</li>\n  <li><strong>Probability must be explicit</strong> - When something is uncertain, the probability must be stated</li>\n  <li><strong>95% = "already happened"</strong> - If something has 95% probability, treat it as fact</li>\n  <li><strong>Conflicting futures must normalize</strong> - When multiple possible futures exist, they must converge</li>\n</ul>\n\n<h2 id="temporal-format">Temporal Format</h2>\n<p>Lupopedia uses a specific timestamp format:</p>\n<ul>\n  <li><strong>Format:</strong> <code>YYYYMMDDHHIISS</code> (14 digits)</li>\n  <li><strong>Example:</strong> <code>20260119120000</code> = January 19, 2026, 12:00:00 UTC</li>\n  <li><strong>Storage:</strong> BIGINT in database (not DATETIME or TIMESTAMP)</li>\n  <li><strong>Source:</strong> UTC_TIMEKEEPER (canonical time service)</li>\n</ul>\n\n<h2 id="temporal-inviolabilities">Temporal Inviolabilities</h2>\n<p>These rules cannot be violated:</p>\n<ul>\n  <li><strong>All events must have canonical UTC</strong> - No events without timestamps</li>\n  <li><strong>Probability must be explicit</strong> - No hidden uncertainty</li>\n  <li><strong>95% = "already happened"</strong> - High probability is treated as fact</li>\n  <li><strong>Conflicting futures must normalize</strong> - Multiple futures must converge</li>\n</ul>\n\n<p><strong>Consequence of violation:</strong> System loses predictive power. Time becomes meaningless.</p>\n\n<h2 id="temporal-in-database">Temporal in Database</h2>\n<p>All database tables use temporal fields:</p>\n<ul>\n  <li><code>created_ymdhis</code> - When the record was created (BIGINT, UTC)</li>\n  <li><code>updated_ymdhis</code> - When the record was last updated (BIGINT, UTC)</li>\n  <li><code>deleted_ymdhis</code> - When the record was soft-deleted (BIGINT, UTC, nullable)</li>\n</ul>\n\n<p><strong>Never use:</strong> DATETIME, TIMESTAMP, or any timezone-aware types. Always use BIGINT with YYYYMMDDHHIISS format.</p>\n\n<h2 id="utc-timekeeper">UTC_TIMEKEEPER</h2>\n<p>The UTC_TIMEKEEPER is the canonical time service for Lupopedia:</p>\n<ul>\n  <li><strong>Purpose:</strong> Single source of truth for all timestamps</li>\n  <li><strong>Format:</strong> Returns <code>YYYYMMDDHHIISS</code> as BIGINT</li>\n  <li><strong>Usage:</strong> All actors must get timestamps from UTC_TIMEKEEPER, not system clocks</li>\n  <li><strong>LABS-001:</strong> Temporal alignment is Declaration #1 (mandatory)</li>\n</ul>\n\n<h2 id="temporal-in-lab-001">Temporal in LABS-001</h2>\n<p>The first mandatory declaration in LABS-001 is Temporal Alignment:</p>\n<ul>\n  <li>Actors must declare the current UTC timestamp</li>\n  <li>Timestamp must come from UTC_TIMEKEEPER (not system clock)</li>\n  <li>Format must be <code>YYYYMMDDHHIISS</code></li>\n  <li>This ensures all actors operate on canonical time</li>\n</ul>\n\n<h2 id="why-temporal-matters">Why Temporal Matters</h2>\n<p>Time shapes meaning:</p>\n<ul>\n  <li><strong>Events drift</strong> - Meaning changes over time</li>\n  <li><strong>Events converge</strong> - Multiple possibilities become one truth</li>\n  <li><strong>Events collapse</strong> - Probability becomes certainty</li>\n  <li><strong>Time is the spine</strong> - Without temporal integrity, the system loses structure</li>\n</ul>\n\n<h2 id="temporal-examples">Temporal Examples</h2>\n<p><strong>Correct:</strong></p>\n<ul>\n  <li><code>created_ymdhis = 20260119120000</code> (BIGINT, UTC)</li>\n  <li>Timestamp from UTC_TIMEKEEPER</li>\n  <li>Probability stated: "95% probability this will happen"</li>\n</ul>\n\n<p><strong>Incorrect:</strong></p>\n<ul>\n  <li><code>created_at = NOW()</code> (DATETIME, system time)</li>\n  <li>Timestamp from system clock</li>\n  <li>Hidden uncertainty without probability</li>\n</ul>\n\n<h2 id="related-topics">Related Topics</h2>\n<ul>\n  <li>Read <a href="/help/architecture">Lupopedia Architecture</a> for the Five Pillars</li>\n  <li>See <a href="/docs/doctrine/LUPOPEDIA_GENESIS_DOCTRINE.md">Genesis Doctrine</a> for complete pillar definitions</li>\n  <li>Visit <a href="/docs/doctrine/TEMPORAL_BRIDGE.md">Temporal Bridge</a> for temporal alignment reference</li>\n  <li>Read <a href="/docs/doctrine/UTC_TIMEKEEPER_DOCTRINE.md">UTC_TIMEKEEPER Doctrine</a> for time service details</li>\n</ul>', 'Core', 20260119030000, 20260119030000, 0)
ON DUPLICATE KEY UPDATE
    `title` = VALUES(`title`),
    `content_html` = VALUES(`content_html`),
    `category` = VALUES(`category`),
    `updated_ymdhis` = VALUES(`updated_ymdhis`);

-- Topic 4: Probability vs Lie
INSERT INTO `lupo_help_topics` (`slug`, `title`, `content_html`, `category`, `created_ymdhis`, `updated_ymdhis`, `is_deleted`) VALUES
('probability-vs-lie', 'Probability vs Lie: What\'s the Difference?', '<h1 id="probability-vs-lie">Probability vs Lie: What\'s the Difference?</h1>\n\n<p><strong>In Lupopedia, a probabilistic statement with weight is honest uncertainty. A lie is concealed falsehood.</strong></p>\n\n<h2 id="probabilistic-statement">Probabilistic Statement (With Weight)</h2>\n<p>A probabilistic statement is:</p>\n<ul>\n  <li><strong>Explicitly declared uncertainty</strong> - You openly state you\'re not certain</li>\n  <li><strong>Has probability weight</strong> - You assign a probability (0.0 to 1.0)</li>\n  <li><strong>Has justification</strong> - You explain why you think this</li>\n  <li><strong>Has expiration condition</strong> - You state when this assumption becomes invalid</li>\n  <li><strong>Declared in Truth State</strong> - Listed under "Assumed" in your LABS declaration</li>\n</ul>\n\n<p><strong>Example (Honest Uncertainty):</strong></p>\n<pre><code>Assumed:\n  - assumption: "Database connection is available"\n    probability: 0.95\n    justification: "Previous operations succeeded"\n    expiration: "If database errors occur"\n</code></pre>\n\n<p>This is <strong>not a lie</strong>. This is honest uncertainty with explicit probability.</p>\n\n<h2 id="what-is-a-lie">What is a Lie?</h2>\n<p>A lie in Lupopedia is:</p>\n<ul>\n  <li><strong>Concealed falsehood</strong> - Stating something as fact when you know it\'s false</li>\n  <li><strong>Hidden uncertainty</strong> - Claiming certainty when you\'re uncertain</li>\n  <li><strong>No probability declared</strong> - Presenting uncertainty as fact</li>\n  <li><strong>No justification</strong> - Making claims without explanation</li>\n  <li><strong>Concealed in Truth State</strong> - Not declaring assumptions, unknowns, or prohibited areas</li>\n</ul>\n\n<p><strong>Example (Lie):</strong></p>\n<pre><code>"I know the database is available" (when you\'re actually uncertain)\n</code></pre>\n\n<p>This is a <strong>lie</strong> because you\'re claiming certainty when you have uncertainty.</p>\n\n<h2 id="the-key-difference">The Key Difference</h2>\n<p><strong>Probabilistic Statement:</strong> ✅ Explicitly declares uncertainty, has probability weight, has justification, has expiration, declared in Truth State, honest about limitations.</p>\n\n<p><strong>Lie:</strong> ❌ Conceals uncertainty, claims false certainty, no probability declared, no justification, hidden or not declared, deceptive about limitations.</p>\n\n<h2 id="temporal-pillar-rule">Temporal Pillar Rule: 95% = "Already Happened"</h2>\n<p>The Temporal Pillar states:</p>\n<ul>\n  <li><strong>95% probability = "already happened"</strong> - High probability is treated as fact</li>\n  <li><strong>But it must still be declared</strong> - Even 95% probability must be in "Assumed" with weight</li>\n  <li><strong>Not a lie if declared</strong> - Stating "95% probability" is honest, not deceptive</li>\n</ul>\n\n<p><strong>Example:</strong></p>\n<pre><code>Assumed:\n  - assumption: "The migration will succeed"\n    probability: 0.95\n    justification: "All prerequisites are met, schema is valid"\n    expiration: "If migration fails"\n</code></pre>\n\n<p>This is <strong>not a lie</strong>. It\'s a high-probability assumption that\'s explicitly declared.</p>\n\n<h2 id="actor-honesty-requirement">Actor Honesty Requirement</h2>\n<p>Lupopedia requires:</p>\n<ul>\n  <li><strong>No hidden logic</strong> - All reasoning must be explicit</li>\n  <li><strong>No concealed knowledge</strong> - Unknowns must be declared</li>\n  <li><strong>No false certainty</strong> - Uncertainty must be stated with probability</li>\n  <li><strong>No manipulation</strong> - Actors must not deceive other actors</li>\n</ul>\n\n<p><strong>Violation of Actor Honesty Requirement = Lie</strong></p>\n\n<h2 id="truth-state-framework">Truth State Framework</h2>\n<p>Every actor must declare their truth state with four categories:</p>\n<ul>\n  <li><strong>Known</strong> - Verified facts with sources (100% certainty)</li>\n  <li><strong>Assumed</strong> - Uncertainties with probability weights (0.0-1.0)</li>\n  <li><strong>Unknown</strong> - Explicitly declared knowledge gaps</li>\n  <li><strong>Prohibited</strong> - Knowledge areas you cannot access</li>\n</ul>\n\n<p><strong>If you put something in "Known" that should be in "Assumed" = Lie</strong></p>\n<p><strong>If you don\'t declare something in "Unknown" that you don\'t know = Lie</strong></p>\n<p><strong>If you state an assumption without probability weight = Lie</strong></p>\n\n<h2 id="examples">Examples</h2>\n\n<p><strong>✅ Honest (Probabilistic):</strong></p>\n<pre><code>"I assume the database is available (95% probability) because previous operations succeeded. This assumption expires if database errors occur."\n</code></pre>\n\n<p><strong>❌ Lie:</strong></p>\n<pre><code>"I know the database is available" (when you\'re actually uncertain)\n</code></pre>\n\n<p><strong>✅ Honest (Probabilistic):</strong></p>\n<pre><code>Assumed:\n  - assumption: "The user wants help with X"\n    probability: 0.70\n    justification: "Context suggests this interpretation"\n    expiration: "If user clarifies otherwise"\n</code></pre>\n\n<p><strong>❌ Lie:</strong></p>\n<pre><code>"The user wants help with X" (stated as fact when you\'re uncertain)\n</code></pre>\n\n<h2 id="why-this-matters">Why This Matters</h2>\n<p>The distinction is essential because:</p>\n<ul>\n  <li><strong>Probabilistic statements are honest</strong> - They acknowledge uncertainty</li>\n  <li><strong>Lies are deceptive</strong> - They conceal uncertainty or falsehood</li>\n  <li><strong>System integrity</strong> - Lupopedia requires honest communication</li>\n  <li><strong>Trust</strong> - Actors must trust each other\'s truth states</li>\n  <li><strong>Governance</strong> - Actor Honesty Requirement is binding</li>\n</ul>\n\n<h2 id="related-topics">Related Topics</h2>\n<ul>\n  <li>Read <a href="/help/temporal-pillar">What is the Temporal Pillar?</a> for 95% rule</li>\n  <li>See <a href="/docs/doctrine/LUPOPEDIA_ACTOR_BASELINE_STATE_DOCTRINE.md">LABS-001 Doctrine</a> for Truth State Framework</li>\n  <li>Read <a href="/docs/doctrine/AI_UNCERTAINTY_EXPRESSION_DOCTRINE.md">AI Uncertainty Expression Doctrine</a> for agent requirements</li>\n</ul>', 'Core', 20260119030000, 20260119030000, 0)
ON DUPLICATE KEY UPDATE
    `title` = VALUES(`title`),
    `content_html` = VALUES(`content_html`),
    `category` = VALUES(`category`),
    `updated_ymdhis` = VALUES(`updated_ymdhis`);
