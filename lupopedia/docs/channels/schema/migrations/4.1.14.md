---
wolfie.headers: explicit architecture with structured clarity for every file.
file.last_modified_system_version: 4.1.14
file.last_modified_utc: 20260120180000
file.utc_day: 20260120
file.name: "4.1.14.md"
GOV-AD-PROHIBIT-001: true
header_atoms:
  - GLOBAL_CURRENT_LUPOPEDIA_VERSION
  - GLOBAL_CURRENT_AUTHORS
temporal_edges:
  actor_identity: "Eric (Captain Wolfie)"
  system_context: "Schema Freeze Active / 181 tables at ceiling"
dialog:
  speaker: CURSOR
  target: @CAPTAIN_WOLFIE @FLEET
  mood_RGB: "00FF00"
  message: "4.1.14: Crafty Syntax migration analysis + doctrine corrections logged. No schema. Version bump only."
tags:
  categories: ["migration", "documentation", "version", "analysis"]
  collections: ["core-docs", "migrations"]
  channels: ["dev", "internal"]
file:
  title: "Migration Notes for Version 4.1.14"
  description: "4.1.14: Crafty Syntax migration analysis + doctrine corrections. No database or schema changes."
  version: GLOBAL_CURRENT_LUPOPEDIA_VERSION
  status: published
  author: GLOBAL_CURRENT_AUTHORS
system_context:
  schema_state: "Frozen"
  table_count: 181
  table_ceiling: 181
  doctrine_mode: "File-Sovereignty"
---

# Migration Notes for Version 4.1.14

**Date:** 2026-01-20  
**Version:** 4.1.14  
**Type:** Documentation, analysis, version bump — **no database or schema changes**

---

## Summary of Crafty Syntax → Lupopedia mapping

- **34 legacy** `livehelp_*` tables; **22 Lupopedia** targets (INSERT/UPDATE). **16** deprecated/retired with no data migrated.
- **Gap:** livehelp_emailque documented as → lupo_crm_lead_messages but no `INSERT ... FROM livehelp_emailque`; only livehelp_emails used.
- Renames, type changes (Y/N→1/0, etc.). Merged: livehelp_config→lupo_modules.config_json; livehelp_users→lupo_auth_users + lupo_actor_properties; livehelp_qa→lupo_truth_questions, lupo_truth_answers, lupo_collections, lupo_collection_tabs; livehelp_transcripts→lupo_dialog_threads, lupo_dialog_messages, lupo_dialog_message_bodies.
- 22 INSERTs, 1 UPDATE (lupo_modules.config_json), 3 TRUNCATE. No CREATE, no FK, no triggers.

---

## Doctrine violations identified

- **timestamp=0:** `0` as created_ymdhis/updated_ymdhis in lupo_crafty_syntax_layer_invites, lupo_crm_leads, lupo_crafty_syntax_leave_message, lupo_actor_departments.
- **NOW() vs UTC_TIMESTAMP:** livehelp_emails → lupo_crm_lead_messages uses `DATE_FORMAT(NOW(),...)`; doctrine requires UTC.
- **Column-list mismatch:** lupo_crm_lead_messages INSERT uses literal `1` as column name in column list (typo).
- **emailque gap:** livehelp_emailque has no INSERT to lupo_crm_lead_messages.

---

## Required corrections (timestamps, NOW(), column mismatch)

- **lupo_crm_lead_messages:** fix or remove literal `1` in column list; align SELECT to target columns.
- **Timestamps:** use valid UTC YYYYMMDDHHMMSS for created_ymdhis/updated_ymdhis; replace `0` placeholders.
- **livehelp_emails → lupo_crm_lead_messages:** use `DATE_FORMAT(UTC_TIMESTAMP(),'%Y%m%d%H%i%S')` instead of `DATE_FORMAT(NOW(),...)`.
- **Comments:** "remnoved" → "removed" (livehelp_identity_daily, livehelp_identity_monthly, livehelp_keywords_daily, livehelp_keywords_monthly).
- **livehelp_emailque:** add INSERT to lupo_crm_lead_messages or document as intentionally unmigrated.

---

## No schema changes in this patch

- No new tables, fields, or constraints. No TOON regeneration. No edits to `database/migrations/craftysyntax_to_lupopedia_mysql.sql`. Version bump and documentation only.
