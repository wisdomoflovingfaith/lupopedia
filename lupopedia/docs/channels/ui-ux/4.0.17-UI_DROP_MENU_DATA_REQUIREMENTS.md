---
wolfie.headers: explicit architecture with structured clarity for every file.
file.last_modified_system_version: 4.0.18
header_atoms:
  - GLOBAL_CURRENT_LUPOPEDIA_VERSION
  - GLOBAL_CURRENT_AUTHORS
dialog:
  speaker: CURSOR
  target: @everyone
  mood_RGB: "00FF00"
  message: "Created documentation for UI drop-menu data requirements. Documents data structures needed for collection_selector, collection_tabs, and default_tabs components. Includes manual seeding instructions for 4.0.17 UI integration work."
tags:
  categories: ["documentation", "ui", "data"]
  collections: ["core-docs"]
  channels: ["dev"]
file:
  title: "UI Drop-Menu Data Requirements"
  description: "Data structure requirements and manual seeding instructions for UI drop-menu components in Lupopedia 4.0.17"
  version: GLOBAL_CURRENT_LUPOPEDIA_VERSION
  status: published
  author: GLOBAL_CURRENT_AUTHORS
---

# UI Drop-Menu Data Requirements

**Version:** GLOBAL_CURRENT_LUPOPEDIA_VERSION  
**Status:** Published  
**Last Updated:** 2026-01-15

## Overview

This document describes the data requirements for UI drop-menu components in Lupopedia 4.0.17. These components require manually seeded data to function correctly.

## Components

1. **collection_selector.php** - Saved collections navigation bar with dropdown menus
2. **collection_tabs.php** - Tabs dropdown menu (shortcutDropdown)
3. **default_tabs.php** - Contents dropdown menu (content sections)

---

## 1. Collection Selector Component

### Data Source

**Function:** `render_saved_collections($userId)`  
**File:** `lupo-includes/functions/render-saved-collections.php`  
**Variable:** `$collectionsData`

### Data Structure

```php
$collectionsData = [
    'who' => [
        'tabs' => [
            [
                'tab_name' => 'WOLFIE',
                'tab_id' => 1,
                'item_count' => 5,
                'children' => [
                    [
                        'item_type' => 'content',
                        'content_id' => 123,
                        'title' => 'Content Title',
                        'item_id' => 123
                    ],
                    [
                        'item_type' => 'tab',
                        'tab_name' => 'Sub Tab',
                        'tab_id' => 2,
                        'children' => []
                    ]
                ]
            ]
        ],
        'count' => 10
    ],
    'what' => [...],
    'where' => [...],
    'when' => [...],
    'why' => [...],
    'how' => [...],
    'do' => [...]
];
```

### Database Tables

- `lupo_saved_collections` - Collections table
- `lupo_saved_collection_items` - Items within collections
- `lupo_collection_tabs` - Tab structure
- `lupo_content` - Content items

### Manual Seeding Requirements

**Collections Data:**
- At least one collection per type (WHO, WHAT, WHERE, WHEN, WHY, HOW, DO)
- Each collection should have at least one tab
- Tabs may have nested sub-tabs
- Tabs may contain content items or links

**Example SQL:**
```sql
-- Insert collection
INSERT INTO lupo_saved_collections (collection_name, collection_type, user_id, created_ymdhis)
VALUES ('System Collection', 'who', 1, 20260115000000);

-- Insert tab
INSERT INTO lupo_collection_tabs (collection_id, tab_name, parent_tab_id, slug, created_ymdhis)
VALUES (1, 'WOLFIE', NULL, 'wolfie', 20260115000000);

-- Insert content item
INSERT INTO lupo_saved_collection_items (collection_id, tab_id, content_id, item_type, created_ymdhis)
VALUES (1, 1, 123, 'content', 20260115000000);
```

---

## 2. Collection Tabs Component

### Data Source

**Function:** `load_collection_tabs($collection_id)`  
**File:** `lupo-includes/functions/collection-tabs-loader.php`  
**Variable:** `$tabs_data`

### Data Structure

```php
$tabs_data = [
    'WHO' => [
        '_slug' => 'who',
        'WOLFIE' => [],
        'CAPTAIN' => []
    ],
    'WHAT' => [
        '_slug' => 'what',
        'SOFTWARE' => [],
        'HARDWARE' => []
    ]
];
```

### Database Tables

- `lupo_collection_tabs` - Tab structure
- `lupo_saved_collections` - Collections table

### Manual Seeding Requirements

**Tabs Data:**
- At least one main tab per collection
- Each main tab should have a slug
- Sub-tabs are optional
- Tabs should be organized hierarchically

**Example SQL:**
```sql
-- Insert main tab
INSERT INTO lupo_collection_tabs (collection_id, tab_name, parent_tab_id, slug, created_ymdhis)
VALUES (1, 'WHO', NULL, 'who', 20260115000000);

-- Insert sub-tab
INSERT INTO lupo_collection_tabs (collection_id, tab_name, parent_tab_id, slug, created_ymdhis)
VALUES (1, 'WOLFIE', 1, 'wolfie', 20260115000000);
```

---

## 3. Default Tabs Component

### Data Source

**Variable:** `$content['content_sections']`  
**Format:** JSON array of section IDs

### Data Structure

```php
$content_sections = [
    'news-and-updates',
    'download-crafty-syntax',
    'how-to-use-crafty-syntax',
    'legacy-overview'
];
```

### Database Column

**Table:** `lupo_content`  
**Column:** `content_sections` (JSON)

### Manual Seeding Requirements

**Content Sections:**
- Content must have HTML headers with IDs
- Sections are extracted from headers automatically
- Stored as JSON array in `content_sections` column
- Format: Array of section ID strings

**Example SQL:**
```sql
-- Update content with sections
UPDATE lupo_content
SET content_sections = '["news-and-updates", "download-crafty-syntax", "how-to-use-crafty-syntax"]'
WHERE content_id = 1;
```

**Example HTML:**
```html
<h2 id="news-and-updates">News and Updates</h2>
<h2 id="download-crafty-syntax">Download Crafty Syntax</h2>
<h2 id="how-to-use-crafty-syntax">How to Use Crafty Syntax</h2>
```

---

## Integration Points

### main_layout.php

All three components are included in `main_layout.php`:

```php
// Collection selector
include LUPO_UI_PATH . '/components/collection_selector.php';

// Collection tabs
include LUPO_UI_PATH . '/components/collection_tabs.php';

// Default tabs
include LUPO_UI_PATH . '/components/default_tabs.php';
```

### Variable Initialization

Variables are initialized in `main_layout.php`:

```php
// Collections data
$collectionsData = isset($collectionsData) ? $collectionsData : [];

// Tabs data
$tabs_data = isset($tabs_data) ? $tabs_data : [];
$collection_id = isset($collection_id) ? $collection_id : 0;

// Content sections
$content_sections = isset($content['content_sections']) ? $content['content_sections'] : [];
```

### Controller Integration

Controllers should pass data via `render_main_layout()` metadata:

```php
render_main_layout($page_body, [
    'collectionsData' => $collectionsData,
    'tabs_data' => $tabs_data,
    'collection_id' => $collection_id,
    'content' => $content
]);
```

---

## Testing Checklist

- [ ] Collection selector renders with seeded collections data
- [ ] Collection tabs dropdown displays tabs correctly
- [ ] Default tabs dropdown displays content sections
- [ ] Menus toggle correctly (open/close)
- [ ] Keyboard navigation works (Enter, Space, Escape)
- [ ] Click-outside-to-close works
- [ ] Submenus render correctly
- [ ] Empty states display correctly
- [ ] Data flows correctly from controllers to components

---

## Related Files

- **Components:**
  - `lupo-includes/ui/components/collection_selector.php`
  - `lupo-includes/ui/components/collection_tabs.php`
  - `lupo-includes/ui/components/default_tabs.php`
  - `lupo-includes/ui/components/saved-collections-nav.php`

- **Functions:**
  - `lupo-includes/functions/render-saved-collections.php`
  - `lupo-includes/functions/collection-tabs-loader.php`

- **Layout:**
  - `lupo-includes/ui/layouts/main_layout.php`

---

*Last Updated: January 15, 2026*  
*Version: GLOBAL_CURRENT_LUPOPEDIA_VERSION*  
*Status: Published*  
*Author: GLOBAL_CURRENT_AUTHORS*
