# Version 4.2.0 Changes

## Release Type
**Stability Release** — No new features, schema freeze, consolidation verification

## Release Date
2026-01-20

## Purpose
Establish first stable baseline after Crafty Syntax migration era. Freeze schema at consolidated state. Verify doctrine compliance. Prepare for 4.3.x feature development.

## Technical Changes

### Schema
- **Table Count:** 173 (doctrine ceiling 180)
- **Ceiling:** 180 tables (enforced)
- **State:** Frozen (no changes until 4.3.x)
- **TOON:** Regenerate via `database/generate_toon_files.py`

### Database
- `database/migrations/4.2.0_schema_freeze_enforcement.sql`: optional MySQL EVENT `schema_freeze_enforcement_4_2_0`; logs to `lupo_system_logs` when table count > 180. Doctrine prefers application-level enforcement; deploy only if CAPTAIN_WOLFIE + LILITH approve.

### Documentation
- CHANGELOG.md: 4.2.0 Stability Release section
- dialogs/changelog_dialog.md, changelog_dialog-side.md: 4.2.0 entries and sync
- docs/doctrine/TABLE_COUNT_DOCTRINE.md: Schema Freeze Status (4.2.0) section
- docs/versioning/4.2.0_changes.md (this file)
- dialogs/4.2.0_release_announcement.md

### Versioning
- System version: 4.1.20 → 4.2.0
- config/global_atoms.yaml, config/GLOBAL_IMPORTANT_ATOMS.yaml: GLOBAL_CURRENT_LUPOPEDIA_VERSION, version, versions.lupopedia
- lupo-includes/version.php: @version, fallbacks
- .cursorrules: Current value 4.2.0

## Migration Status
- **Crafty Syntax Migration:** Complete
- **Legacy Tables:** 0 remaining (per 4.1.17, 4.1.19)
- **Consolidation:** Verified (4.1.18, 4.1.19)
- **Doctrine Compliance:** Verified (4.1.20)

## System Requirements
- MySQL 5.7+ (for optional EVENT; `SET GLOBAL event_scheduler = ON` if used)
- PHP 7.4+ (unchanged)
- TOON: `database/generate_toon_files.py` or `scripts/generate_toon_from_schema.php`

## Backward Compatibility
- **Full compatibility** with 4.1.x data
- **No breaking changes** from 4.1.20
- **All APIs unchanged**
- **Migration paths preserved**

## Known Issues
None. Stability release; known issues from migration era addressed.

## Next Steps
- 4.2.1: 14-day hotfix window (doctrine fixes only)
- 4.3.x: Feature development from this baseline
- Weekly doctrine compliance audits
- Schema freeze maintained until 4.3.x

## Reference Documents
- CHANGELOG.md section 4.2.0
- docs/doctrine/TABLE_COUNT_DOCTRINE.md (Schema Freeze Status)
- database/migrations/4.2.0_schema_freeze_enforcement.sql
- dialogs/4.2.0_release_announcement.md
